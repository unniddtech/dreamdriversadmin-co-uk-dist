!function(e){function t(t){for(var s,i,n=t[0],d=t[1],c=t[2],u=0,l=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(e[s]=d[s]);for(p&&p(t);l.length;)l.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,n=1;n<a.length;n++){var d=a[n];0!==r[d]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},r={"app~5a11b65b":0},o=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window.webpackJsonp=window.webpackJsonp||[],d=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var p=d;o.push([0,"styles~11e07eb3","vendors~app~7c52aee7","vendors~app~cd1be390","vendors~app~2a42e354","vendors~app~203e0718","vendors~app~77bf5e45","vendors~app~9c5b28f6","vendors~app~399b027d","vendors~app~e258e298","vendors~app~8eeb4602","vendors~app~15f0789d","vendors~app~cc99a214","vendors~app~f9ca8911","vendors~app~3f553db4","vendors~app~04bd46bb","vendors~app~e8089dc1","vendors~app~281a44dd","vendors~app~ec8c427e","vendors~app~1c3a2c3f","vendors~app~aece278a","vendors~app~fdc6512a","vendors~app~d2305125","vendors~app~226ede7a","vendors~app~4a7e9e0b","vendors~app~78934547","vendors~app~f535d4d8","vendors~app~03631906","vendors~app~11c2601a","vendors~app~73acc9f6","app~d0ae3f07","app~f71cff67","app~069f6afa","app~e73b60ec","app~4faec1a7","app~82d9bdfe","app~ec57159e","app~b032da3b","app~191e673a","app~fbd22823","app~beb0a5bd"]),a()}({1168:function(e,t,a){"use strict";a.d(t,"i",(function(){return c})),a.d(t,"j",(function(){return p})),a.d(t,"g",(function(){return u})),a.d(t,"f",(function(){return l})),a.d(t,"h",(function(){return m})),a.d(t,"k",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"e",(function(){return f})),a.d(t,"d",(function(){return _})),a.d(t,"c",(function(){return v})),a.d(t,"a",(function(){return w}));var s=a("2b0e"),r=a("bc3a"),o=a.n(r),i=a("2ef0"),n=a("c1df"),d=a.n(n);const c=10,p=20,u=30,l=10,m=20,h=30,g=10,f=20,_=30,v=40;let E=[],L=d()("00:00","HH:mm");for(let e=0;e<96;e++)E.push({name:L.format("HH:mm"),value:L.format("HH:mm")}),L.add(15,"m");const w={dayToRange:function(e,t){let a=d()(e,"YYYY-MM-DD"),s=d()(e,"YYYY-MM-DD");switch(t){case g:break;case f:s.add(1,"w").subtract(1,"d");break;case _:s.add(2,"w").subtract(1,"d");break;case v:s.add(1,"months").subtract(1,"d")}return[a.format("YYYY-MM-DD"),s.format("YYYY-MM-DD")]},dateRangeText:function(e){if(!e)return"~";return[d()(e[0],"YYYY-MM-DD").format("DD MMM"),d()(e[1],"YYYY-MM-DD").format("DD MMM")].join(" ~ ")},getShiftHours:function(e){let t=d()(e.finish_time,"HH:mm"),a=d()(e.start_time,"HH:mm");return t.isValid()&&a.isValid()?(t.format("HH:mm")<a.format("HH:mm")&&t.add(1,"d"),(t-a)/6e4/60):0}};t.l={state:{shifts:[],period_date_from:void 0,period_date_to:void 0,timeList:E},mutations:{fetchShifts(e,{payload:t,period_date_from:a,period_date_to:s}){e.shifts=t,e.period_date_from=a,e.period_date_to=s},createNewShift(e,t){i.find(e.shifts,e=>e.id==t.id)||e.period_date_from<=t.period_date&&e.period_date_to>=t.period_date&&e.shifts.push(t)},removeShift(e,t){for(let a=0;a<e.shifts.length;a++)if(t.id==e.shifts[a].id){e.shifts.splice(a,1);break}},setShifts(e,t){e.shifts=t},editShift(e,t){const a=e.shifts.findIndex(e=>e.id===t.id);-1==a?e.period_date_from<=t.period_date&&e.period_date_to>=t.period_date&&e.shifts.push(t):s.a.set(e.shifts,a,t)},editShiftTimeSheet(e,t){const a=e.shifts.findIndex(e=>e.id===t.shift_id);if(-1==a)return;let r=e.shifts[a];r.timesheet=t,s.a.set(e.shifts,a,r)},removeShiftTimeSheet(e,t){const a=e.shifts.findIndex(e=>e.id===t.shift_id);if(-1==a)return;let r=e.shifts[a];r.timesheet=null,s.a.set(e.shifts,a,r)},updateShifts(e,t){for(let a=0;a<t.length;a++){const r=e.shifts.findIndex(e=>+e.id==+t[a].id);s.a.set(e.shifts,r,t[a])}},removeShifts(e,t){for(let a=0;a<t.length;a++)for(let s=0;s<e.shifts.length;s++)if(t[a].id==e.shifts[s].id){e.shifts.splice(s,1);break}},moderateFreeShifts(e,t){for(let a=0;a<t.length;a++){const r=e.shifts.findIndex(e=>+e.id==+t[a].id);s.a.set(e.shifts,r,t[a])}},copyShifts(e,t){const a=e.shifts.findIndex(e=>e.id===t.id);s.a.set(e.shifts,a,t)},cancelShift(e,t){const a=e.shifts.findIndex(e=>e.id===t.id);s.a.set(e.shifts,a,t)}},actions:{async fetchShifts({commit:e,dispatch:t},{period_date_from:a,period_date_to:s,with_timesheet:r,with_driver:n,filter_draft:d}){e("clearError"),e("setLoading",!0);let c=JSON.parse(localStorage.getItem("user"));try{let t="";"1"==r&&(t="&with_timesheet=1");let i="";"1"==n&&(i="&with_driver=1");let p="";"1"==d&&(p="&filter_draft=1");let{data:u}=await o.a.get(`${this._vm.appConfig.app_url}/api/shift?period_date_from=${a}&period_date_to=${s}${t}${i}${p}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+c.access_token}});e("setLoading",!1),e("fetchShifts",{payload:u,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async createNewShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.post(this._vm.appConfig.app_url+"/api/shift",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("createNewShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async removeShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.delete(`${this._vm.appConfig.app_url}/api/shift/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("removeShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async editShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.put(`${this._vm.appConfig.app_url}/api/shift/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("editShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async publishShifts({commit:e,dispatch:t},{shifts:a,options:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let t={shift_ids:i.map(a,e=>e.id),push_drivers:10==s.push_drivers?10:20},{data:n}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/publish",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("updateShifts",n)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async unpublishShifts({commit:e,dispatch:t},{shifts:a,options:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let t={shift_ids:i.map(a,e=>e.id),push_drivers:10==s.push_drivers?10:20},{data:n}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/unpublish",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("updateShifts",n)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async removeShifts({commit:e,dispatch:t},{shifts:a,options:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let t={shift_ids:i.map(a,e=>e.id),push_drivers:10==s.push_drivers?10:20},{data:n}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/remove",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("removeShifts",n)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async copyShifts({commit:e,dispatch:t},{shifts:a,to_date:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let t={shift_ids:i.map(a,e=>e.id),to_date:s},{data:n}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/copyshifts",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("copyShifts",n)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async createNewFreeShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/createFree",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("createNewShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async editFreeShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.put(`${this._vm.appConfig.app_url}/api/shift/updateFree/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("editShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async removeFreeShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.delete(`${this._vm.appConfig.app_url}/api/shift/removeFree/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("removeShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async copyShiftsFree({commit:e,dispatch:t},{shifts:a,to_date:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let t={shift_ids:i.map(a,e=>e.id),to_date:s},{data:n}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/copyShiftsFree",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("copyShifts",n)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async moderateFreeShifts({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let t={shift_ids:i.map(a,e=>e.id)},{data:r}=await o.a.post(this._vm.appConfig.app_url+"/api/shift/moderateFree",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("moderateFreeShifts",r)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async cancelShift({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.post(this._vm.appConfig.app_url+"/api/reporting/create",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("cancelShift",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{shifts:e=>e.shifts,shifts_period_date_from:e=>e.period_date_from,shifts_period_date_to:e=>e.period_date_to,timeList:e=>e.timeList}}},"156f":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return c}));var s=a("2b0e"),r=a("bc3a"),o=a.n(r),i=a("2ef0");const n=10,d=20,c=10;t.d={state:{cities:[],areas:[],locations:[]},mutations:{fetchAreas(e,t){e.areas=i.orderBy(t,e=>e.name)},fetchLocations(e,t){e.locations=t},fetchCities(e,t){e.cities=t},setAreas(e,t){e.areas=t},addAreaToList(e,t){t.restaurants=[],e.areas.push(t),localStorage.setItem("areas",JSON.stringify(e.areas))},addArea(e,t){e.areas.push(t),localStorage.setItem("areas",JSON.stringify(e.areas))},removeArea(e,t){for(let a=0;a<e.areas.length;a++)if(t.id==e.areas[a].id){e.areas.splice(a,1);break}},editArea(e,t){const a=e.areas.findIndex(e=>e.id===t.id);s.a.set(e.areas,a,t),localStorage.setItem("areas",JSON.stringify(e.areas))},addAreaRestaurant(e,t){e.areas.forEach(e=>{e.id===t.areaId&&e.restaurants&&e.restaurants.push(t)})},deleteAreaRestaurant(e,t){e.areas.forEach(e=>{e.restaurants&&e.restaurants.map((a,s)=>{a.id==t.id&&e.restaurants.splice(s,1)})})},editAreaRestaurant(e,t){e.areas.forEach(e=>{e.restaurants&&e.restaurants.map((a,r)=>{a.id==t.id&&s.a.set(e.restaurants,r,t)})})}},actions:{async fetchAreas({commit:e,dispatch:t}){if(!this.state.drivers.promisesStatus.fetchAreas){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.get(this._vm.appConfig.app_url+"/api/area",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1),e("fetchAreas",t),e("setPromiseStatus",{promiseName:"fetchAreas",status:!0})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},async fetchCities({commit:e,dispatch:t}){if(!this.state.drivers.promisesStatus.fetchCities){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.get(this._vm.appConfig.app_url+"/api/city",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1),e("fetchCities",t),e("setPromiseStatus",{promiseName:"fetchCities",status:!0})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},async fetchLocations({commit:e,dispatch:t}){await Promise.all([t("fetchAreas"),t("fetchRestaurants")]);let a=[];i.each(this.getters.areas,e=>{e._guid={id:e.id,type:n},a.push(e);let t=i.filter(this.getters.restaurants,t=>e.id==t.area_id&&t.status===c);i.each(t,e=>{e._guid={id:e.id,type:d},a.push(e)})}),e("fetchLocations",a)},async createNewArea({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.post(this._vm.appConfig.app_url+"/api/area",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("addAreaToList",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async removeArea({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.delete(`${this._vm.appConfig.app_url}/api/area/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("removeArea",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async editArea({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.put(`${this._vm.appConfig.app_url}/api/area/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("editArea",t),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}}},getters:{areas:e=>e.areas,cities:e=>e.cities,locations:e=>e.locations}}},1642:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return c}));var s=a("2b0e"),r=a("bc3a"),o=a.n(r),i=a("2ef0"),n=a.n(i);const d=10,c=20;t.c={state:{alerts:[]},mutations:{fetchAlerts(e,t){e.alerts=t},setAlerts(e,t){e.alerts=t},editAlert(e,t){const a=e.alerts.findIndex(e=>e.id===t.id);s.a.set(e.alerts,a,t)},addAlert(e,t){e.alerts.unshift(t)},allReadedAlerts(e){Object.keys(e.alerts).forEach(t=>{e.alerts[t].status=c})}},actions:{async fetchAlerts({commit:e,dispatch:t}){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.get(this._vm.appConfig.app_url+"/api/alert",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1),e("fetchAlerts",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",n.a.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async allReadedAlerts({commit:e,dispatch:t}){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.post(this._vm.appConfig.app_url+"/api/alert/all-readed",{},{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});if(!t.success)return void console.log(t);//!? exception
e("setLoading",!1),e("allReadedAlerts")}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",n.a.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async editAlert({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.put(`${this._vm.appConfig.app_url}/api/alert/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("editAlert",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",n.a.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{alerts:e=>e.alerts}}},"55c2":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return d})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return l}));var s=a("2b0e"),r=a("b775"),o=a("2ef0"),i=a.n(o);const n=10,d=20,c=10,p=20,u=10,l=20;t.g={state:{posts:[]},mutations:{fetchPosts(e,t){e.posts=t},setPosts(e,t){e.posts=t},addPostsToList(e,t){i.a.find(e.posts,e=>e.id==t.id)||e.posts.unshift(t)},editPost(e,t){const a=e.posts.findIndex(e=>e.id===t.id);s.a.set(e.posts,a,t)},deletePost(e,t){e.posts.map((a,s)=>{a.id==t.id&&e.posts.splice(s,1)})}},actions:{async fetchPosts({commit:e,dispatch:t}){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await r.a.get(this._vm.appConfig.app_url+"/api/newsFeed",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1),e("fetchPosts",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.a.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async createNewPost({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await r.a.post(this._vm.appConfig.app_url+"/api/newsFeed",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});return e("setLoading",!1),e("addPostsToList",t),t}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.a.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async editPost({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{a.append("_method","PATCH");//! put not working on FormData, -> use PATCH && post
let{data:t}=await r.a.post(`${this._vm.appConfig.app_url}/api/newsFeed/${a.get("id")}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("editPost",t),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.a.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}e("clearError"),e("setLoading",!0)},async deletePost({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await r.a.delete(`${this._vm.appConfig.app_url}/api/newsFeed/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("deletePost",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.a.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async changeStatus({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await r.a.post(`${this._vm.appConfig.app_url}/api/newsFeed/changeStatus/${a.id}`,{status:a.status},{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("editPost",t),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.a.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async changePinned({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await r.a.post(`${this._vm.appConfig.app_url}/api/newsFeed/changePinned/${a.id}`,{pinned:a.pinned},{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("editPost",t),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.a.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}}},getters:{posts:e=>e.posts}}},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),r=a("3dfd"),o=a("8c4f"),i=a("9722"),n=a("741c"),d=a("4278"),c=a("3392"),p=a("2d0b"),u=a("735b"),l=a("b27c"),m=a("6724"),h=a("edde"),g=a("1f4e"),f=a("94d4"),v=a("513f"),E=a("4750"),L=a("0aa9"),w=a("5046"),S=a("2660"),y=a("2f62"),R=a("2ef0"),b=a.n(R),O=a("b775"),q={state:{restaurants:[],promisesStatus:{}},mutations:{fetchRestaurants(e,t){e.restaurants.length>0?e.restaurants.push(...t):e.restaurants=R.orderBy(t,e=>e.name)},setRestaurants(e,t){e.restaurants=t},createNewRestaurant(e,t){e.restaurants.push(t)},deleteRestaurant(e,t){e.restaurants.map((a,s)=>{a.id==t.id&&e.restaurants.splice(s,1)})},editRestaurant(e,t){const a=e.restaurants.findIndex(e=>e.id===t.id);s.a.set(e.restaurants,a,t)},setPromiseStatus(e,{promiseName:t,status:a}){e.promisesStatus[t]=a}},actions:{async fetchRestaurants({commit:e,dispatch:t},a=10){let s="fetchRestaurants_"+a;if(!this.state.restaurants.promisesStatus[s]){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await O.a.get(this._vm.appConfig.app_url+"/api/restaurant",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token},params:{status:a}});e("setLoading",!1),e("fetchRestaurants",t,a),e("setPromiseStatus",{promiseName:s,status:!0})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},async createNewRestaurant({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await O.a.post(this._vm.appConfig.app_url+"/api/restaurant",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});return e("setLoading",!1),e("createNewRestaurant",t),e("addAreaRestaurant",t),t}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async deleteRestaurant({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await O.a.delete(`${this._vm.appConfig.app_url}/api/restaurant/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("deleteRestaurant",t),e("deleteAreaRestaurant",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async editRestaurant({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{a.append("_method","PATCH");//! put not working on FormData, -> use PATCH && post
let{data:t}=await O.a.post(`${this._vm.appConfig.app_url}/api/restaurant/${a.get("id")}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("editRestaurant",t),e("editAreaRestaurant",t),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async setRestaurantStatus({commit:e,dispatch:t},{restaurant_id:a,status:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await O.a.put(`${this._vm.appConfig.app_url}/api/restaurant/${a}`,{status:s},{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token},params:{inactive:"true"}});e("setLoading",!1),e("editRestaurant",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{restaurants:e=>e.restaurants,restaurantById:e=>t=>e.restaurants.find(e=>e.id===t)}},k=a("bc3a"),X=a.n(k),I={state:{restaurateurs:[]},mutations:{fetchRestaurateurs(e,t){e.restaurateurs=R.orderBy(t,e=>e.name)},setRestaurateurs(e,t){e.restaurateurs=t},createNewRestaurateur(e,t){e.restaurateurs.push(t)},deleteRestaurateur(e,t){e.restaurateurs.map((a,s)=>{a.id==t.id&&e.restaurateurs.splice(s,1)})},editRestaurateur(e,t){const a=e.restaurateurs.findIndex(e=>e.id===t.id);s.a.set(e.restaurateurs,a,t)}},actions:{async fetchRestaurateurs({commit:e,dispatch:t}){if(!this.state.drivers.promisesStatus.fetchCities){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(this._vm.appConfig.app_url+"/api/restaurateur",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1),e("fetchRestaurateurs",t),e("setPromiseStatus",{promiseName:"fetchRestaurateurs",status:!0})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},async createNewRestaurateur({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.post(this._vm.appConfig.app_url+"/api/restaurateur",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});return e("setLoading",!1),e("createNewRestaurateur",t),e("addAreaRestaurateur",t),t}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async deleteRestaurateur({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.delete(`${this._vm.appConfig.app_url}/api/restaurateur/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("deleteRestaurateur",t),e("deleteAreaRestaurateur",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async editRestaurateur({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.put(`${this._vm.appConfig.app_url}/api/restaurateur/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("editRestaurateur",t),e("editAreaRestaurateur",t),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}}},getters:{restaurateurs:e=>e.restaurateurs,restaurateurById:e=>t=>e.restaurateurs.find(e=>e.id===t)}};var A={state:{user:{},drivers:[],promisesStatus:{}},mutations:{fetchDrivers(e,t,a=10){for(let e=0;e<t.length;e++)t[e].full_name=t[e].first_name+" "+t[e].last_name;e.drivers.length>0?e.drivers.push(...t):e.drivers=R.orderBy(t,e=>e.full_name)},setUser(e,t){e.user=t},setDrivers(e,t){e.drivers=t,console.log(e.drivers)},addDriversToList(e,t){t.full_name=t.first_name+" "+t.last_name,R.find(e.drivers,e=>e.id==t.id)||e.drivers.push(t)},editDriver(e,t){t.full_name=t.first_name+" "+t.last_name;const a=e.drivers.findIndex(e=>e.id===t.id);s.a.set(e.drivers,a,t)},messageDriver(){},editWorkingTimes(e,t){t.full_name=t.first_name+" "+t.last_name;const a=e.drivers.findIndex(e=>e.id===t.id);s.a.set(e.drivers,a,t)},setPromiseStatus(e,{promiseName:t,status:a}){e.promisesStatus[t]=a}},actions:{async fetchDrivers({commit:e,dispatch:t},a=10){let s="fetchDrivers_"+a;if(!this.state.drivers.promisesStatus[s]){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(this._vm.appConfig.app_url+"/api/driver",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token},params:{status:a}});e("setLoading",!1),e("fetchDrivers",t,a),e("setPromiseStatus",{promiseName:s,status:!0})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},async registerUser({commit:e}){e("clearError"),e("setLoading",!0);try{e("setLoading",!1)}catch(t){throw e("setLoading",!1),e("setError",t.message),t}},async createNewDriver({commit:e,dispatch:t},{payload:a,params:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.post(this._vm.appConfig.app_url+"/api/driver",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token},params:s});return e("setLoading",!1),e("addDriversToList",t),t}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async loginUser({commit:e}){e("clearError"),e("setLoading",!0);try{e("setLoading",!1)}catch(t){throw e("setLoading",!1),e("setError",t.message),t}},async logOutUser({commit:e}){e("clearError"),e("setLoading",!0);try{e("setUser",null),e("setLoading",!1),localStorage.removeItem("user")}catch(t){throw e("setLoading",!1),e("setError",t.message),t}},async editDriver({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.put(`${this._vm.appConfig.app_url}/api/driver/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token},params:{inactive:"false"}});e("setLoading",!1),e("editDriver",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async messageDriver({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.post(this._vm.appConfig.app_url+"/api/driver-message",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("messageDriver",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}},async setDriverStatus({commit:e,dispatch:t},{driver_id:a,status:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.put(`${this._vm.appConfig.app_url}/api/driver/${a}`,{status:s},{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token},params:{inactive:"true"}});e("setLoading",!1),e("editDriver",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async setDriverProgressing({commit:e,dispatch:t},{driver_id:a,not_progressing:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.put(`${this._vm.appConfig.app_url}/api/driver/${a}`,{not_progressing:s},{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token},params:{progressing:"true"}});e("setLoading",!1),e("editDriver",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async editWorkingTimes({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.post(this._vm.appConfig.app_url+"/api/driver-update-working-times",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("editWorkingTimes",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}}},getters:{user:e=>e.user,drivers:e=>R.filter(e.drivers,e=>10==e.status),allDrivers:e=>e.drivers,isUserLoggedIn:e=>null!==e.user}},P=a("1642"),$=a("156f"),N={state:{loading:!1,error:null},mutations:{setLoading(e,t){e.loading=t},setError(e,t){e.error=t},clearError(e){e.error=null}},actions:{setLoading({commit:e},t){e("setLoading",t)},setError({commit:e},t){e("setError",t)},clearError({commit:e}){e("setError")}},getters:{loading:e=>e.loading,error:e=>e.error}},C=a("55c2"),U={state:{replies:[]},mutations:{fetchReplies(e,t){e.replies=t},addReplyToList(e,t){let a=this.state.posts.posts;Object.keys(a).forEach(e=>{if(a[e].id===t.new_id){if(R.find(a[e].replies,e=>e.id==t.id))return;a[e].replies||(a[e].replies=[]),a[e].replies.push(t)}})}},actions:{async fetchReplies({commit:e}){e("clearError"),e("setLoading",!0);try{e("fetchReplies",[]),e("setLoading",!1)}catch(t){throw e("setLoading",!1),e("setError",t.message),t}},async createNewReply({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.post(this._vm.appConfig.app_url+"/api/reply",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("addReplyToList",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{replies:e=>e.replies}},M=a("1168"),j=a("c64f");var H={state:{options:[]},mutations:{fetchOptions(e,t){e.options=t},setOptions(e,t){e.options=t},editOption(e,t){const a=e.options.findIndex(e=>e.okey===t.okey);s.a.set(e.options,a,t)},addOption(e,t){e.options.unshift(t)}},actions:{async fetchOptions({commit:e,dispatch:t}){e("clearError"),e("setLoading",!0);let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(this._vm.appConfig.app_url+"/api/option",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1),e("fetchOptions",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",b.a.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async editOption({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.put(`${this._vm.appConfig.app_url}/api/option/${a.okey}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("editOption",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",b.a.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{options:e=>e.options}},B=a("aeb1"),J=a.n(B),W={state:{invoices:[],period_date_from:void 0,period_date_to:void 0},mutations:{fetchInvoices(e,{payload:t,period_date_from:a,period_date_to:s}){e.invoices=t,e.period_date_from=a,e.period_date_to=s},createNewInvoice(e,t){R.find(e.invoices,e=>e.id==t.id)||e.period_date_from<=t.period_date&&e.period_date_to>=t.period_date&&e.invoices.push(t)},removeInvoice(e,t){for(let a=0;a<e.invoices.length;a++)if(t.id==e.invoices[a].id){e.invoices.splice(a,1);break}},setInvoices(e,t){e.invoices=t},editInvoice(e,t){const a=e.invoices.findIndex(e=>e.id===t.id);s.a.set(e.invoices,a,t)},approveInvoices(e,t){for(let a=0;a<t.length;a++){let r=e.invoices.findIndex(e=>+e.id==+t[a].id);-1===r?e.invoices.push(t[a]):s.a.set(e.invoices,r,t[a])}}},actions:{async fetchInvoices({commit:e,dispatch:t},{period_date_from:a,period_date_to:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(`${this._vm.appConfig.app_url}/api/invoice?period_date_from=${a}&period_date_to=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("fetchInvoices",{payload:t,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async removeInvoice({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.delete(`${this._vm.appConfig.app_url}/api/invoice/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("removeInvoice",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async requestInvoice({commit:e,dispatch:t},{invoice_number:a,comission:s,period_date_from:r,period_date_to:o,restaurant_id:i,driver_id:n,create_invoice:d}){e("clearError"),e("setLoading",!0);let c=JSON.parse(localStorage.getItem("user"));try{let t=`?comission=${s}&invoice_number=${a}&period_date_from=${r}&period_date_to=${o}`;i&&(t=t+"&restaurant_id="+i),n&&(t=t+"&driver_id="+n),d&&(t=t+"&create_invoice="+d);let p=await X.a.get(`${this._vm.appConfig.app_url}/api/invoice-generate${t}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+c.access_token},responseType:"blob"});J()(p.data,`DreamDrivers Invoice ${a}.pdf`,p.headers["content-type"]),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async previewInvoice({commit:e,dispatch:t},{invoice_number:a,comission:s,period_date_from:r,period_date_to:o,restaurant_id:i,driver_id:n}){e("clearError"),e("setLoading",!0);let d=JSON.parse(localStorage.getItem("user"));try{let t=`?comission=${s}&invoice_number=${a}&period_date_from=${r}&period_date_to=${o}`;i&&(t=t+"&restaurant_id="+i),n&&(t=t+"&driver_id="+n);let p=await X.a.get(`${this._vm.appConfig.app_url}/api/invoice-generate${t}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+d.access_token},responseType:"blob"});var c=URL.createObjectURL(p.data);window.open(c,"_blank"),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async downloadInvoice({commit:e,dispatch:t},{id:a,invoice_number:s,period_date_from:r,period_date_to:o}){e("clearError"),e("setLoading",!0);let i=JSON.parse(localStorage.getItem("user"));try{let t=await X.a.get(`${this._vm.appConfig.app_url}/api/invoice-download/${a}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+i.access_token},responseType:"blob"});J()(t.data,`${s}_${r}-${o}.pdf`,t.headers["content-type"]),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async viewInvocie({commit:e,dispatch:t},{id:a,invoice_number:s,period_date_from:r,period_date_to:o}){e("clearError"),e("setLoading",!0);let i=JSON.parse(localStorage.getItem("user"));try{let t=await X.a.get(`${this._vm.appConfig.app_url}/api/invoice-download/${a}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+i.access_token},responseType:"blob"});var n=URL.createObjectURL(t.data);window.open(n,"_blank"),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async requestXls({commit:e,dispatch:t},{period_date_from:a,period_date_to:s,restaurant_id:r}){e("clearError"),e("setLoading",!0);let o=JSON.parse(localStorage.getItem("user"));try{let t=`?period_date_from=${a}&period_date_to=${s}`;r&&(t=t+"&restaurant_id="+r);let i=await X.a.get(`${this._vm.appConfig.app_url}/api/xls${t}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+o.access_token},responseType:"blob"});J()(i.data,`payments_${a}-${s}.xlsx`,i.headers["content-type"]),e("setLoading",!1)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async fetchInvoiceCheck({commit:e,dispatch:t},{period_date_from:a,period_date_to:s,restaurant_id:r}){e("clearError"),e("setLoading",!0);let o=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(`${this._vm.appConfig.app_url}/api/invoice-check?period_date_from=${a}&period_date_to=${s}&restaurant_id=${r}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+o.access_token}});return e("setLoading",!1),e("fetchInvoiceCheck",t),t}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{invoices:e=>e.invoices,invoices_period_date_from:e=>e.period_date_from,invoices_period_date_to:e=>e.period_date_to}},z={namespaced:!0,state:{users:[]},mutations:{fetchUsers(e,t){for(let e=0;e<t.length;e++)t[e].full_name=(t[e].first_name+" "+t[e].last_name).trim();e.users=R.orderBy(t,e=>e.full_name)},setUsers(e,t){e.users=t},addUsersToList(e,t){R.find(e.users,e=>e.id==t.id)||(t.full_name=(t.first_name+" "+t.last_name).trim(),e.users.push(t))},editUser(e,t){t.full_name=(t.first_name+" "+t.last_name).trim();const a=e.users.findIndex(e=>e.id===t.id);s.a.set(e.users,a,t)},deleteUser(e,t){e.users.map((a,s)=>{a.id==t.id&&e.users.splice(s,1)})}},actions:{async fetchUsers({commit:e,dispatch:t}){e("clearError",null,{root:!0}),e("setLoading",!0,{root:!0});let a=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(this._vm.appConfig.app_url+"/api/user",{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+a.access_token}});e("setLoading",!1,{root:!0}),e("fetchUsers",t)}catch(a){if(e("setLoading",!1,{root:!0}),a.response){let e=a.response;if(401==e.status&&(t("logOutUser",null,{root:!0}),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0],{root:!0}),Promise.reject(e.data)}a.message?t("setError",a.message,{root:!0}):t("setError",a,{root:!0})}},async createNewUser({commit:e,dispatch:t},{payload:a}){e("clearError",null,{root:!0}),e("setLoading",!0,{root:!0});let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.post(this._vm.appConfig.app_url+"/api/user",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});return e("setLoading",!1,{root:!0}),e("addUsersToList",t),t}catch(a){if(e("setLoading",!1,{root:!0}),a.response){let e=a.response;if(401==e.status&&(t("logOutUser",null,{root:!0}),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0],{root:!0}),Promise.reject(e.data)}throw a.message?t("setError",a.message,{root:!0}):t("setError",a,{root:!0}),a}},async editUser({commit:e,dispatch:t},a){e("clearError",null,{root:!0}),e("setLoading",!0,{root:!0});let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.put(`${this._vm.appConfig.app_url}/api/user/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token},params:{inactive:"false"}});e("setLoading",!1,{root:!0}),e("editUser",t)}catch(a){if(e("setLoading",!1,{root:!0}),a.response){let e=a.response;if(401==e.status&&(t("logOutUser",null,{root:!0}),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0],{root:!0}),Promise.reject(e.data)}throw a.message?t("setError",a.message,{root:!0}):t("setError",a,{root:!0}),a}},async deleteUser({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.delete(`${this._vm.appConfig.app_url}/api/user/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("deleteUser",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",R.values(e.data)[0][0]),Promise.reject(e.data)}throw a.message?t("setError",a.message):t("setError",a),a}}},getters:{users:e=>e.users}},T=a("daa8"),x={state:{isConnected:!1,socketMessage:"",socketSubscriptions:[],connection:void 0},mutations:{socketConnect(e,t){e.isConnected=t},socketMessage(e,t){e.socketMessage=t},socketSubscribe(e,t){e.socketSubscriptions.push(t)},socketUnSubscribe(e,t){for(let a=0;a<e.socketSubscriptions.length;a++)if(e.socketSubscriptions[a].name==t.name&&e.socketSubscriptions[a].params.user_id==t.params.user_id&&e.socketSubscriptions[a].params.channel==t.params.channel){e.socketSubscriptions.splice(a,1);break}}},actions:{async setupSocketConnection({commit:e,dispatch:t,state:a}){return e("setLoading",!0),new Promise(s=>{a.connection=Object(T.a)(this._vm.appConfig.app_socket_url,{transports:["websocket"]}),a.connection.on("connect",(function(){e("setLoading",!1),e("socketConnect",!0);for(var r=0;r<a.socketSubscriptions.length;r++)a.connection.emit(a.socketSubscriptions[r].name+":subscribe",a.socketSubscriptions[r].params);s&&(s(),t("socketSubscribe",{name:"private:panelmessages",params:{user_id:1,channel:void 0}}))})),a.connection.on("exception",(function(e){console.log("event",e),t("setError",e)})),a.connection.on("disconnect",(function(){console.log("event","Disconnected!"),e("socketConnect",!1)})),a.connection.on("error",(function(e){console.log(e)})),a.connection.on("private:panelmessages",(function(t){if(t.success&&t.data&&t.data.channel&&t.data.items){switch(t.data.channel){case"timesheet_channel":"store"==t.data.event||"start"==t.data.event||"reject"==t.data.event?R.each(t.data.items,t=>{e("createNewTimesheet",t.data),e("editShiftTimeSheet",t.data)}):"update"==t.data.event||"finish"==t.data.event?R.each(t.data.items,t=>{e("editTimesheet",t.data),e("editShiftTimeSheet",t.data)}):"destroy"==t.data.event&&R.each(t.data.items,t=>{e("removeShiftTimeSheet",t.data)});break;case"shift_channel":"store"==t.data.event?R.each(t.data.items,t=>{e("createNewShift",t.data)}):"update"==t.data.event||"unpublish"==t.data.event||"publish"==t.data.event||"reject"==t.data.event||"request"==t.data.event?R.each(t.data.items,t=>{e("editShift",t.data)}):"destroy"==t.data.event&&R.each(t.data.items,t=>{e("removeShift",t.data)});break;case"news_feed_channel":"store"==t.data.event||"publish"==t.data.event?R.each(t.data.items,t=>{e("addPostsToList",t.data)}):"update"==t.data.event||"markReaded"==t.data.event||"changeStatus"==t.data.event?R.each(t.data.items,t=>{e("editPost",t.data)}):"destroy"==t.data.event&&R.each(t.data.items,t=>{e("deletePost",t.data)});break;case"reply_channel":"store"!=t.data.event&&"post"!=t.data.event||R.each(t.data.items,t=>{e("addReplyToList",t.data)});break;case"alert_channel":R.each(t.data.items,t=>{e("addAlert",t.data)});break;case"driver_channel":"store"==t.data.event?R.each(t.data.items,t=>{e("addDriversToList",t.data)}):"update"==t.data.event&&R.each(t.data.items,t=>{e("editDriver",t.data)});break;case"notification_channel":break;default:console.log("Unknown channel: "+t.data.channel,t)}e("socketMessage",t)}else console.log("Soket error: ",t)}))})},socketSubscribe({commit:e,state:t},a){t.isConnected&&(t.connection.emit(a.name+":subscribe",a.params),e("socketSubscribe",a))},socketUnSubscribe({commit:e,state:t},a){t.connection.emit(a.name+":unsubscribe",a.params),e("socketUnSubscribe",a)}},getters:{status:e=>e.isConnected,message:e=>e.socketMessage}},D={state:{user:{},shifts_cancelled:[],extra_request:[],shifts_charge_removed:[],shifts_inactive_fee:[],period_date_from:void 0,period_date_to:void 0,promisesStatus:{}},mutations:{fetchShiftCancelled(e,{payload:t,period_date_from:a,period_date_to:s}){e.shifts_cancelled=t,e.period_date_from=a,e.period_date_to=s},fetchShiftsExtraRequest(e,{payload:t,period_date_from:a,period_date_to:s}){e.extra_request=t,e.period_date_from=a,e.period_date_to=s},fetchShiftsChargeRemoved(e,{payload:t,period_date_from:a,period_date_to:s}){e.shifts_charge_removed=t,e.period_date_from=a,e.period_date_to=s},fetchShiftsInactiveFee(e,{payload:t,period_date_from:a,period_date_to:s}){e.shifts_inactive_fee=t,e.period_date_from=a,e.period_date_to=s},clearStates(e,t){(Array.isArray(t.params)?t.params:[t.params]).forEach(t=>{e[t.id]&&Array.isArray(e[t.id])?e[t.id]=[]:console.error(`State property ${t} is not an array or does not exist.`)})}},actions:{async fetchShiftCancelled({commit:e,dispatch:t},{period_date_from:a,period_date_to:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(`${this._vm.appConfig.app_url}/api/reporting/shiftsCancelled?period_date_from=${a}&period_date_to=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("fetchShiftCancelled",{payload:t,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",_.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async fetchShiftsExtraRequest({commit:e,dispatch:t},{period_date_from:a,period_date_to:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(`${this._vm.appConfig.app_url}/api/reporting/extraRequest?period_date_from=${a}&period_date_to=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("fetchShiftsExtraRequest",{payload:t,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",_.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async fetchShiftsChargeRemoved({commit:e,dispatch:t},{period_date_from:a,period_date_to:s,extra_request:r}){e("clearError"),e("setLoading",!0);let o=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(`${this._vm.appConfig.app_url}/api/reporting/chargeRemoved?period_date_from=${a}&period_date_to=${s}&extra_request=${r}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+o.access_token}});e("setLoading",!1),e("fetchShiftsChargeRemoved",{payload:t,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",_.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async fetchShiftsInactiveFee({commit:e,dispatch:t},{period_date_from:a,period_date_to:s}){e("clearError"),e("setLoading",!0);let r=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await X.a.get(`${this._vm.appConfig.app_url}/api/timesheet/inactiveFee?period_date_from=${a}&period_date_to=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+r.access_token}});e("setLoading",!1),e("fetchShiftsInactiveFee",{payload:t,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",_.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{extra_request:e=>e.extra_request,shifts_cancelled:e=>e.shifts_cancelled,shifts_charge_removed:e=>e.shifts_charge_removed,shifts_inactive_fee:e=>e.shifts_inactive_fee}};s.a.use(y.a);var F=new y.a.Store({modules:{restaurants:q,restaurateurs:I,drivers:A,alerts:P.c,areas:$.d,shared:N,posts:C.g,replies:U,shifts:M.l,timesheets:j.k,socketObserver:x,options:H,invoices:W,user:z,reporting:D}}),Y=function(e,t,a){let s=JSON.parse(window.localStorage.getItem("user"));s?(F.commit("setUser",s),a()):a("/login/?loginError=true")},G=a("438c");s.a.use(o.a);var V=new o.a({mode:"history",routes:[{path:"",beforeEnter:Y},{path:"/home",props:!0,name:"Home",component:m.a,beforeEnter:Y},{path:"/login",props:!0,name:"LogIn",component:l.a},{path:"/registration",props:!0,name:"Registration",component:u.a},{path:"/newsfeed",props:!0,name:"NewsFeed",component:p.a,beforeEnter:Y},{path:"/schedule",props:!0,name:"Schedule",component:g.a,beforeEnter:Y},{path:"/schedulerestaurant",props:!0,name:"ScheduleRestaurant",component:f.a,beforeEnter:Y},{path:"/timesheet",props:!0,name:"Timesheet",component:v.a,beforeEnter:Y},{path:"/timesheetrestaurant",props:!0,name:"TimesheetRestaurant",component:E.a,beforeEnter:Y},{path:"/restaurants",props:!0,name:"Restaurants",component:i.a,beforeEnter:Y},{path:"/drivers",props:!0,name:"People",component:n.a,beforeEnter:Y},{path:"/drivers/:id",props:!0,name:"People2",component:n.a,beforeEnter:Y},{path:"/drivers/:first_name",props:!0,name:"People3",component:d.a,beforeEnter:Y},{path:"/areas",props:!0,name:"Areas",component:h.a,beforeEnter:Y},{path:"/options",props:!0,name:"Options",component:c.a,beforeEnter:Y},{path:"/invoices",props:!0,name:"Invoices",component:L.a,beforeEnter:Y},{path:"/invoicesrestaurant",props:!0,name:"InvoicesRestaurant",component:w.a,beforeEnter:Y},{path:"/users",props:!0,name:"users",component:S.a,beforeEnter:Y},{path:"/reporting",props:!0,name:"reporting",component:G.a,beforeEnter:Y}],scrollBehavior:()=>({x:0,y:0})}),K=a("f309");s.a.use(K.a);var Q=new K.a({theme:{light:!0,themes:{light:{primary:"#1b92da",error:"#C25B51",secondary:"#b0bec5",accent:"#8c9eff",success:"#b71c1c",info:"#2196F3",warning:"#C25B51"}}},icons:{iconfont:"mdi"}}),Z=a("1dce"),ee=a.n(Z),te=a("c20b"),ae=a("3bf8"),se=a("cf6c"),re=a("6278"),oe=a("52ec"),ie=a("dda8"),ne=a("a14d"),de=a("e889"),ce=a("c681"),pe=a("5611"),ue=a("87e5"),le=a("60fa"),me=a("e445"),he=a("8cd4"),ge=a("1e34"),fe=a("e477"),_e=a("f465"),ve=a("249b"),Ee=a("869f"),Le=a("3362"),we=a("1cbf"),Se=a("4e29"),ye=a("d03e"),Re=a("136a"),be=a("f0f2"),Oe=a("a9c3"),qe=a("7628"),ke=a("8271"),Xe=a("755e"),Ie=a("3f38"),Ae=a("fcb3"),Pe=a.n(Ae),$e=a("dc21"),Ne=a("e594");a("5363");s.a.prototype.appConfig=Pe.a,$e.a({dsn:"https://65ed48751a80417fbe6ba076faf90188@o387656.ingest.sentry.io/5225156",integrations:[new Ne.a({Vue:s.a,attachProps:!0,logErrors:!0})]}),s.a.use(Xe,{load:{key:Pe.a.GOOGLE_MAP_API_KEY},installComponents:!0}),s.a.use(y.a,Q,ee.a),s.a.use(Ie.d,{vuetify:Q,iconsGroup:"mdi"}),s.a.config.productionTip=!1,s.a.component("restaurant-address-modal",te.a),s.a.component("new-restaurant-modal",ae.a),s.a.component("new-driver-modal",pe.a),s.a.component("new-driver-half-board-modal",ue.a),s.a.component("new-area-modal",se.a),s.a.component("edit-area-modal",re.a),s.a.component("edit-restaurant-modal",oe.a),s.a.component("edit-restaurant-profile-modal",ie.a),s.a.component("drivers-list-modal",ne.a),s.a.component("new-post-modal",de.a),s.a.component("edit-post-modal",ce.a),s.a.component("view-driver-modal",le.a),s.a.component("edit-driver-modal",me.a),s.a.component("new-reply-modal",he.a),s.a.component("new-shift-modal",ge.a),s.a.component("edit-shift-modal",fe.a),s.a.component("copy-shifts-modal",_e.a),s.a.component("new-shift-restaurant-modal",ve.a),s.a.component("edit-shift-restaurant-modal",Ee.a),s.a.component("copy-shifts-restaurant-modal",Le.a),s.a.component("new-timesheet-modal",we.a),s.a.component("new-timesheet-restaurant-modal",Se.a),s.a.component("request-invoice-modal",ye.a),s.a.component("request-invoice-restaurant-modal",Re.a),s.a.component("alerts-dropdown-menu",be.a),s.a.component("edit-option-modal",Oe.a),s.a.component("edit-option-map-modal",qe.a),s.a.component("cancel-shift-modal",ke.a),Object.defineProperty(s.a.prototype,"$bus",{get:function(){return this.$root.bus}}),new s.a({data:{bus:new s.a({})},icons:{iconfont:"mdiSvg"},render:e=>e(r.a),vuetify:Q,router:V,store:F,created(){}}).$mount("#app")},b775:function(e,t,a){"use strict";var s=a("bc3a");const r=a.n(s).a.create({});r.interceptors.request.use(e=>{if("post"==e.method&&e.data instanceof FormData)for(var t of e.data.keys())null!=e.data.get(t)&&"null"!=e.data.get(t)||e.data.delete(t);return e},e=>{Promise.reject(e)}),t.a=r},c64f:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return p})),a.d(t,"i",(function(){return u})),a.d(t,"g",(function(){return l})),a.d(t,"h",(function(){return m})),a.d(t,"j",(function(){return h})),a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return f}));var s=a("2b0e"),r=a("bc3a"),o=a.n(r),i=a("2ef0");const n=10,d=20,c=30,p=10,u=20,l=30,m=40,h=50,g=60,f=70;t.k={state:{timesheets:[],timesheetforReports:[],period_date_from:void 0,period_date_to:void 0,invoice_last_id:void 0,invoice_intersection:void 0},mutations:{fetchTimesheets(e,{payload:t,period_date_from:a,period_date_to:s}){e.timesheets=t,e.period_date_from=a,e.period_date_to=s},fetchTimesheetforReports(e,{payload:t,period_date_from:a,period_date_to:s}){e.timesheetforReports=t,e.period_date_from=a,e.period_date_to=s},fetchInvoiceCheck(e,t){e.invoice_last_id=t.last_id,e.invoice_intersection=t.invoices},createNewTimesheet(e,t){i.find(e.timesheets,e=>e.id==t.id)||e.period_date_from<=t.period_date&&e.period_date_to>=t.period_date&&e.timesheets.push(t)},removeTimesheet(e,t){for(let a=0;a<e.timesheets.length;a++)if(t.id==e.timesheets[a].id){e.timesheets.splice(a,1);break}},setTimesheets(e,t){e.timesheets=t},editTimesheet(e,t){const a=e.timesheets.findIndex(e=>e.id===t.id);s.a.set(e.timesheets,a,t)},approveTimesheets(e,t){for(let a=0;a<t.length;a++){let r=e.timesheets.findIndex(e=>+e.id==+t[a].id);-1===r?e.timesheets.push(t[a]):s.a.set(e.timesheets,r,t[a])}}},actions:{async fetchTimesheets({commit:e,dispatch:t},{period_date_from:a,period_date_to:s,for_reports:r}){e("clearError"),e("setLoading",!0);let n=JSON.parse(localStorage.getItem("user")),d="";"1"==r&&(d="&for_reports=1");try{let{data:t}=await o.a.get(`${this._vm.appConfig.app_url}/api/timesheet?period_date_from=${a}&period_date_to=${s}${d}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+n.access_token}});e("setLoading",!1);e("1"==r?"fetchTimesheetforReports":"fetchTimesheets",{payload:t,period_date_from:a,period_date_to:s})}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async createNewTimesheet({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.post(this._vm.appConfig.app_url+"/api/timesheet",a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});return e("setLoading",!1),e("createNewTimesheet",t),t}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async removeTimesheet({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.delete(`${this._vm.appConfig.app_url}/api/timesheet/${a.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("removeTimesheet",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async editTimesheet({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let{data:t}=await o.a.put(`${this._vm.appConfig.app_url}/api/timesheet/${a.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});e("setLoading",!1),e("editTimesheet",t)}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}},async approveTimesheets({commit:e,dispatch:t},a){e("clearError"),e("setLoading",!0);let s=JSON.parse(localStorage.getItem("user"));try{let t={timesheets:a},{data:r}=await o.a.post(this._vm.appConfig.app_url+"/api/timesheet/approve",t,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+s.access_token}});return e("setLoading",!1),e("approveTimesheets",r.result),r}catch(a){if(e("setLoading",!1),a.response){let e=a.response;if(401==e.status&&(t("logOutUser"),window.location.reload()),400==e.status)return t("setError",i.values(e.data)[0][0]),Promise.reject(e.data)}a.message?t("setError",a.message):t("setError",a)}}},getters:{timesheets:e=>e.timesheets,timesheets_period_date_from:e=>e.period_date_from,timesheets_period_date_to:e=>e.period_date_to,invoice_last_id:e=>e.invoice_last_id,invoice_intersection:e=>e.invoice_intersection}}},f6b6:function(e,t,a){"use strict";t.a={compressImage:function(e,t,a,s){var r="image/jpeg";void 0!==s&&"png"==s&&(r="image/png"),a=a||1e3;var o=e.naturalWidth,i=e.naturalHeight,n=i/o;o>a&&(o=a,i=n*a);var d=document.createElement("canvas");d.width=o,d.height=i,d.getContext("2d").drawImage(e,0,0,o,i);var c=d.toDataURL(r,t/100),p=new Image;return p.src=c,p}}}});