(window.webpackJsonp=window.webpackJsonp||[]).push([["app~e73b60ec"],{"272e":function(e,t,a){"use strict";a("3315")},"28c7":function(e,t,a){"use strict";var r=a("1dce"),i=a("2f62"),s=a("2ef0"),o=a("c1df"),n=a.n(o);var l={mixins:[r.validationMixin],name:"EditWorkingTimeModal",props:["thisDriverData"],validations:{},data:()=>({driverData:null,readOnly:!1,localLoading:!1,dialog:!1,tab_edit_working_time:void 0,default_working_times:[],working_period_errors_start_at:{},working_period_errors_stop_at:{},default_working_times_is_valid:!0,item_terator_uid:-1,override_working_time:[],current_day_override_working_periods:[],current_day_wp_errors_start_at:[],current_day_wp_errors_stop_at:[],events:[],calendar_value:"",override_working_times_is_valid:!0,IS_HOLIDAY:10,IS_REGULAR_DAY:20}),watch:{default_working_times:{deep:!0,handler(){this.default_working_times_is_valid=!0;for(let e=0;e<7;e++){this.working_period_errors_start_at[e]={},this.working_period_errors_stop_at[e]={};for(let t=0;t<this.default_working_times[e].working_periods.length;t++){this.working_period_errors_start_at[e][t]=[],this.working_period_errors_stop_at[e][t]=[],this.default_working_times[e].working_periods[t].start_at||(this.working_period_errors_start_at[e][t].push(this.getDayName(e)+" 'Start at' required"),this.default_working_times_is_valid=!1),this.default_working_times[e].working_periods[t].stop_at||(this.working_period_errors_stop_at[e][t].push(this.getDayName(e)+" 'Stop at' required"),this.default_working_times_is_valid=!1);for(let a=0;a<this.default_working_times[e].working_periods.length;a++)t!=a&&(this.default_working_times[e].working_periods[t].start_at>=this.default_working_times[e].working_periods[a].start_at&&this.default_working_times[e].working_periods[t].start_at<=this.default_working_times[e].working_periods[a].stop_at&&(this.working_period_errors_start_at[e][t].push(this.getDayName(e)+" 'Start at' has intersection with other period"),this.default_working_times_is_valid=!1),this.default_working_times[e].working_periods[t].stop_at>=this.default_working_times[e].working_periods[a].start_at&&this.default_working_times[e].working_periods[t].stop_at<=this.default_working_times[e].working_periods[a].stop_at&&(this.working_period_errors_stop_at[e][t].push(this.getDayName(e)+" 'Stop at' has intersection with other period"),this.default_working_times_is_valid=!1));this.default_working_times[e].working_periods[t].stop_at<=this.default_working_times[e].working_periods[t].start_at&&(this.working_period_errors_stop_at[e][t].push(this.getDayName(e)+" 'Start at' can't be greater then 'Stop at'"),this.default_working_times_is_valid=!1)}}}},current_day_override_working_periods:{deep:!0,handler(){this.override_working_times_is_valid=!0,this.current_day_wp_errors_start_at=[],this.current_day_wp_errors_stop_at=[];for(let e=0;e<this.current_day_override_working_periods.length;e++){this.current_day_wp_errors_start_at[e]=[],this.current_day_wp_errors_stop_at[e]=[],this.current_day_override_working_periods[e].start_at||(this.current_day_wp_errors_start_at[e].push(this.getDayNameByDate(this.calendar_value)+" 'Start at' required"),this.override_working_times_is_valid=!1),this.current_day_override_working_periods[e].stop_at||(this.current_day_wp_errors_stop_at[e].push(this.getDayNameByDate(this.calendar_value)+" 'Stop at' required"),this.override_working_times_is_valid=!1);for(let t=0;t<this.current_day_override_working_periods.length;t++)e!=t&&(this.current_day_override_working_periods[e].start_at>=this.current_day_override_working_periods[t].start_at&&this.current_day_override_working_periods[e].start_at<=this.current_day_override_working_periods[t].stop_at&&(this.current_day_wp_errors_start_at[e].push(this.getDayNameByDate(this.calendar_value)+" 'Start at' has intersection with other period"),this.override_working_times_is_valid=!1),this.current_day_override_working_periods[e].stop_at>=this.current_day_override_working_periods[t].start_at&&this.current_day_override_working_periods[e].stop_at<=this.current_day_override_working_periods[t].stop_at&&(this.current_day_wp_errors_stop_at[e].push(this.getDayNameByDate(this.calendar_value)+" 'Stop at' has intersection with other period"),this.override_working_times_is_valid=!1));this.current_day_override_working_periods[e].stop_at<=this.current_day_override_working_periods[e].start_at&&(this.current_day_wp_errors_stop_at[e].push(this.getDayNameByDate(this.calendar_value)+" 'Start at' can't be greater then 'Stop at'"),this.override_working_times_is_valid=!1)}}}},computed:{...Object(i.c)({timeList:"timeList"}),isDateExpired(){return this.calendar_value<n()().format("YYYY-MM-DD")},isCurrentDayOverrideHoliday(){return!!s.find(this.current_day_override_working_periods,e=>10==e.holiday)}},mounted(){this.driverData=this.thisDriverData,this.calendar_value=n()().format("YYYY-MM-DD");let e=[],t=s.map(this.thisDriverData.default_working_time,e=>{let t=s.clone(e);return t.start_at=n()(t.start_at,"HH:mm").format("HH:mm"),t.stop_at=n()(t.stop_at,"HH:mm").format("HH:mm"),t});for(let a=0;a<7;a++){let r=s.filter(t,e=>e.week_day==a);e.push({weekday_index:a,weekday_name:this.getDayName(a),working_periods:r})}this.default_working_times=e,this.override_working_time=s.map(this.thisDriverData.actual_override_working_time,e=>{let t=s.clone(e);return t.start_at=n()(t.start_at,"HH:mm").format("HH:mm"),t.stop_at=n()(t.stop_at,"HH:mm").format("HH:mm"),t}),this.getEvents()},methods:{cancel(){let e=[],t=s.map(this.thisDriverData.default_working_time,e=>{let t=s.clone(e);return t.start_at=n()(t.start_at,"HH:mm").format("HH:mm"),t.stop_at=n()(t.stop_at,"HH:mm").format("HH:mm"),t});for(let a=0;a<7;a++){let r=s.filter(t,e=>e.week_day==a);e.push({weekday_index:a,weekday_name:this.getDayName(a),working_periods:r})}this.default_working_times=e,this.override_working_time=s.map(this.thisDriverData.actual_override_working_time,e=>{let t=s.clone(e);return t.start_at=n()(t.start_at,"HH:mm").format("HH:mm"),t.stop_at=n()(t.stop_at,"HH:mm").format("HH:mm"),t}),this.getEvents(),this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid&&this.default_working_times_is_valid&&this.override_working_times_is_valid){let e=[],t=[];s.each(this.default_working_times,t=>{let a=s.map(t.working_periods,e=>({week_day:e.week_day,holiday:e.holiday,start_at:e.start_at,stop_at:e.stop_at}));e=s.concat(e,a)}),t=s.map(this.override_working_time,e=>({period_date:e.period_date,holiday:e.holiday,start_at:e.start_at,stop_at:e.stop_at}));let a={driver_id:this.driverData.id,default_working_times:e,override_working_time:t};this.$store.dispatch("editWorkingTimes",a).then(()=>{this.dialog=!1,this.password="",this.switch_change_password=!1,this.$emit("driverUpdated","")}).catch(e=>{this.email="";let t=e.response;this.$store.dispatch("setError",t[Object.keys(t)[0]][0])}).finally(()=>{this.localLoading=!1})}},onAddWorkingPeriod(e){this.default_working_times[e].working_periods.push({week_day:e,holiday:20,start_at:void 0,stop_at:void 0})},onRemoveWorkingPeriod(e,t){this.default_working_times[e].working_periods.splice(t,1)},onChangeHoliday(e,t){this.default_working_times[e].working_periods[t].start_at=s.first(this.timeList).value,this.default_working_times[e].working_periods[t].stop_at=s.last(this.timeList).value,this.default_working_times[e].working_periods=[this.default_working_times[e].working_periods[t]]},isCurrentDayHasHoliday(e){return!!s.find(this.default_working_times[e].working_periods,e=>10==e.holiday)},onAddOverrideWorkingTime(){this.current_day_wp_errors_start_at[this.calendar_value]=[],this.current_day_wp_errors_stop_at[this.calendar_value]=[];let e={id:--this.item_terator_uid,period_date:this.calendar_value,holiday:20,start_at:void 0,stop_at:void 0};this.override_working_time.push(e),this.getEvents()},onRemoveOverrideWorkingPeriod(e){let t=s.findIndex(this.override_working_time,t=>t.id==this.current_day_override_working_periods[e].id);this.override_working_time.splice(t,1),this.getEvents()},onChangeOverrideHoliday(e){let t=s.clone(this.current_day_override_working_periods[e]);t.start_at=s.first(this.timeList).value,t.stop_at=s.last(this.timeList).value;for(let e=0;e<this.current_day_override_working_periods.length;e++)this.override_working_time=s.filter(this.override_working_time,e=>e.period_date!=t.period_date);this.override_working_time.push(t),this.getEvents()},onClickDate(){this.calendar_value=n()().format("YYYY-MM-DD")},getEvents(){this.current_day_override_working_periods=s.filter(this.override_working_time,e=>e.period_date==this.calendar_value);let e=s.groupBy(this.override_working_time,e=>e.period_date);this.events=s.map(e,e=>{let t=s.first(e);return 10==t.holiday?{name:"Holiday",color:"green",start:t.period_date,end:t.period_date,timed:!1}:{name:"Custom schedulle",color:"blue",start:t.period_date,end:t.period_date,timed:!1}})},getEventColor:e=>e.color,getDayName:e=>n()().isoWeekday(e+1).format("dddd"),getDayNameByDate:e=>n()(e,"YYYY-MM-DD").format("dddd")},filters:{headerDate:function(e){return n()(e,"YYYY-MM-DD").format("DD/MM/YYYY")},weekdayDate:function(e){return n()(e,"YYYY-MM-DD").format("dddd")}}},c=a("2877"),d=a("6544"),_=a.n(d),h=a("c6a6"),m=a("e4e5"),u=a("8336"),v=a("a4f6"),p=a("b0af"),f=a("99d9"),g=a("62ad"),b=a("169a"),k=a("4bd4"),w=a("132d"),y=a("da13"),D=a("5d23"),x=a("0fd9"),C=a("8dd9"),$=a("b73d"),P=a("71a3"),S=a("c671"),Y=a("fe57"),R=a("aac8"),N=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-list-item",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[a("v-list-item-title",[e._v("Set Unavailability")])],1),a("v-dialog",{attrs:{width:"fit-content","max-width":"850px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Driver's Unavailability")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-form",{ref:"form"},[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:e.tab_edit_working_time,callback:function(t){e.tab_edit_working_time=t},expression:"tab_edit_working_time"}},[a("v-tab",[e._v("Unavailability")]),a("v-tab",[e._v("Leave")])],1),a("v-tabs-items",{model:{value:e.tab_edit_working_time,callback:function(t){e.tab_edit_working_time=t},expression:"tab_edit_working_time"}},[a("v-tab-item",[a("v-row",e._l(e.default_working_times,(function(t){return a("v-col",{key:t.weekday_index,attrs:{cols:"12",sm:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-btn",{attrs:{color:"primary",text:"",disabled:e.isCurrentDayHasHoliday(t.weekday_index)},on:{click:function(a){return e.onAddWorkingPeriod(t.weekday_index)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Unavailability\n                      ")],1)]},proxy:!0}],null,!0)},[e._v("\n                    "+e._s(t.weekday_name)+"\n                    ")]),e._l(t.working_periods,(function(r,i){return a("v-row",{key:r.id},[e.isCurrentDayHasHoliday(t.weekday_index)?e._e():a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 08:00",required:"",items:e.timeList,"item-text":"name","item-value":"value",disabled:e.isCurrentDayHasHoliday(t.weekday_index),"error-messages":e.working_period_errors_start_at[t.weekday_index][i],dense:""},model:{value:r.start_at,callback:function(t){e.$set(r,"start_at",t)},expression:"working_period.start_at"}})],1),e.isCurrentDayHasHoliday(t.weekday_index)?e._e():a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 20:00",required:"",items:e.timeList,"item-text":"name","item-value":"value",disabled:e.isCurrentDayHasHoliday(t.weekday_index),"error-messages":e.working_period_errors_stop_at[t.weekday_index][i],dense:""},model:{value:r.stop_at,callback:function(t){e.$set(r,"stop_at",t)},expression:"working_period.stop_at"}})],1),e.isCurrentDayHasHoliday(t.weekday_index)?a("v-col",{attrs:{cols:"12",md:"8"}},[e._v("\n                      Unavailable – All Day\n                    ")]):e._e(),a("v-col",{staticClass:"align-self-start",attrs:{cols:"12",md:"2"}},[a("v-switch",{staticClass:"mt-1",attrs:{"false-value":e.IS_REGULAR_DAY,"true-value":e.IS_HOLIDAY,label:"Holiday","hide-details":""},on:{change:function(a){return e.onChangeHoliday(t.weekday_index,i)}},model:{value:r.holiday,callback:function(t){e.$set(r,"holiday",t)},expression:"working_period.holiday"}})],1),a("v-col",{staticClass:"align-self-start pt-2",attrs:{cols:"12",md:"2"}},[a("v-btn",{staticClass:"float-right",attrs:{color:"error"},on:{click:function(a){return e.onRemoveWorkingPeriod(t.weekday_index,i)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove\n                      ")],1)],1)],1)})),t.working_periods.length?e._e():a("v-row",[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12",md:"12"}},[e._v("\n                      Available\n                    ")])],1)],2)})),1)],1),a("v-tab-item",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-sheet",{staticClass:"d-flex justify-space-between"},[a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(t){return e.$refs.calendar.prev()}}},[a("v-icon",[e._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ma-2",attrs:{text:""},on:{click:function(t){return e.onClickDate()}}},[e._v(e._s(e._f("headerDate")(e.calendar_value)))]),a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(t){return e.$refs.calendar.next()}}},[a("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-sheet",{attrs:{height:"350"}},[a("v-calendar",{ref:"calendar",attrs:{weekdays:[1,2,3,4,5,6,0],type:"month",events:e.events,"event-color":e.getEventColor},on:{change:e.getEvents,"click:date":e.getEvents},model:{value:e.calendar_value,callback:function(t){e.calendar_value=t},expression:"calendar_value"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-btn",{attrs:{color:"primary",disabled:e.isDateExpired||e.isCurrentDayOverrideHoliday,text:""},on:{click:function(t){return e.onAddOverrideWorkingTime()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Unavailability\n                      ")],1)]},proxy:!0}])},[e._v("\n                    "+e._s(e._f("weekdayDate")(e.calendar_value))+", "+e._s(e._f("headerDate")(e.calendar_value))+"\n                    ")]),e._l(e.current_day_override_working_periods,(function(t,r){return a("v-row",{key:r},[t.holiday!=e.IS_HOLIDAY?a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 08:00",required:"",items:e.timeList,"item-text":"name","item-value":"value",disabled:t.holiday==e.IS_HOLIDAY,"error-messages":e.current_day_wp_errors_start_at[r],dense:""},model:{value:t.start_at,callback:function(a){e.$set(t,"start_at",a)},expression:"working_period.start_at"}})],1):e._e(),t.holiday!=e.IS_HOLIDAY?a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 20:00",required:"",items:e.timeList,"item-text":"name","item-value":"value",disabled:t.holiday==e.IS_HOLIDAY,"error-messages":e.current_day_wp_errors_stop_at[r],dense:""},model:{value:t.stop_at,callback:function(a){e.$set(t,"stop_at",a)},expression:"working_period.stop_at"}})],1):e._e(),t.holiday==e.IS_HOLIDAY?a("v-col",{attrs:{cols:"12",md:"8"}},[e._v("\n                      Unavailable – All Day\n                    ")]):e._e(),a("v-col",{staticClass:"align-self-start",attrs:{cols:"12",md:"2"}},[a("v-switch",{staticClass:"mt-1",attrs:{"false-value":e.IS_REGULAR_DAY,"true-value":e.IS_HOLIDAY,label:"Holiday","hide-details":""},on:{change:function(t){return e.onChangeOverrideHoliday(r)}},model:{value:t.holiday,callback:function(a){e.$set(t,"holiday",a)},expression:"working_period.holiday"}})],1),a("v-col",{staticClass:"align-self-start pt-2",attrs:{cols:"12",md:"2"}},[a("v-btn",{staticClass:"float-right",attrs:{color:"error"},on:{click:function(t){return e.onRemoveOverrideWorkingPeriod(r)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove\n                      ")],1)],1)],1)})),e.current_day_override_working_periods.length?e._e():a("v-row",[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12",md:"12"}},[e._v("\n                      By Unavailability \n                    ")])],1)],2)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||e.localLoading,loading:e.localLoading},on:{click:e.submit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check-box-outline")]),e._v("\n                Accept Changes\n              ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:e.localLoading},on:{click:e.cancel}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                Cancel\n              ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"725a0a44",null);t.a=N.exports;_()(N,{VAutocomplete:h.a,VBanner:m.a,VBtn:u.a,VCalendar:v.a,VCard:p.a,VCardText:f.b,VCardTitle:f.c,VCol:g.a,VDialog:b.a,VForm:k.a,VIcon:w.a,VListItem:y.a,VListItemTitle:D.c,VRow:x.a,VSheet:C.a,VSwitch:$.a,VTab:P.a,VTabItem:S.a,VTabs:Y.a,VTabsItems:R.a})},3315:function(e,t,a){},4278:function(e,t,a){"use strict";var r=a("2f62"),i=a("2ef0"),s=a("c1df"),o=a.n(s),n=a("28c7");var l={name:"ListDriverName",components:{"edit-working-time-modal":n.a},data:()=>({green:"#0ab90a",orange:"#dc7319d1",indigo:"#3F51B5",DRIVER_STATUS_ACTIVE:10,DRIVER_STATUS_INACTIVE:20,DRIVER_STATUS_REGISTRED:30,ACTIVITY_STATUS_ONLINE:10,ACTIVITY_STATUS_DISCONNECTED:20,PROGRESSING_NOT_PROGRESSING:10,PROGRESSING_PROCESSING:20,localLoading:!1,REGISTRATION_STEP_FINISH:40,filter_search:void 0,filter_status:10,driver_status_list:[{id:30,type:"root",name:"All"},{id:120,type:"subgroup",name:"Completed"},{id:130,type:"subgroup",name:"Incomplete"},{id:140,type:"subgroup",name:"Not Progressing"},{id:150,type:"subgroup",name:"Progressing"},{id:10,type:"root",name:"Show only active"},{id:20,type:"root",name:"Show only inactive"}],page:1,per_page:15,per_page_list:[10,15,50,100,1e3]}),mounted(){Promise.all([this.$store.dispatch("fetchAreas"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchRestaurants")]).then(()=>{if("/drivers/:first_name"==i.get(this.$router.currentRoute,"matched[0].path")){let e=i.find(this.drivers,e=>e.id==i.get(this.$router.currentRoute,"params.first_name"));e&&(this.filter_search=e.email,this.filter_status=void 0,this.$nextTick(()=>{this.$refs.optionsMenu[0].$el.click(),this.$nextTick(()=>{this.$refs.editDriverItem[0].$el.click()})})),this.$router.replace("/drivers")}})},created(){},computed:{...Object(r.c)({drivers:"allDrivers",areas:"areas"}),driversSearched(){let e=this.drivers;switch(e=i.map(e,e=>(e.filledDataCount=this.getFilledDataCount(e),e.filledDataCount>=95?e.filledDataColor="green--text":e.filledDataCount>=80?e.filledDataColor="blue-grey--text":e.filledDataCount>=50?e.filledDataColor="blue--text":e.filledDataCount>=40?e.filledDataColor="deep-orange--text":e.filledDataCount>=30?e.filledDataColor="red--text darken-4":e.filledDataColor="pink--text darken-4",e)),this.filter_search&&(e=i.filter(e,e=>-1!==e.full_name.toLowerCase().indexOf(this.filter_search)||-1!==e.email.toLowerCase().indexOf(this.filter_search))),this.filter_status){case 30:case 10:case 20:e=i.filter(e,e=>e.status==this.filter_status);break;case 120:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>e.filledDataCount>=70);break;case 130:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>e.filledDataCount<70);break;case 140:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>10==e.not_progressing);break;case 150:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>20==e.not_progressing)}return e},driverList(){return this.drivers},driversSearchedPaged(){let e=this.per_page*(this.page-1),t=e+this.per_page;return this.driversSearched.slice(e,t)},total_pages(){return Math.ceil(this.driversSearched.length/this.per_page)}},methods:{inactiveItem(e,t){this.localLoading=!0,this.$store.dispatch("setDriverStatus",{status:e,driver_id:t}).then(()=>{}).finally(()=>{this.localLoading=!1})},notProgressingItem(e,t){this.localLoading=!0,this.$store.dispatch("setDriverProgressing",{not_progressing:e,driver_id:t}).then(()=>{}).finally(()=>{this.localLoading=!1})},editedDriver(){},getArealabelById(e){if(!e||0==e.length)return"-";let t=[];for(let a=0;a<e.length;a++){let r=i.find(this.areas,t=>+t.id==+e[a].area_id);r&&t.push(r.name)}return t.join(", ")},onChangePage(e){this.page=e},getFilledDataCount(e){let t=["first_name","last_name","email","address_1","address_2","postcode","city","phone","date_of_birth","emergency_contact_name","emergency_contact_phone","car_make","car_model","car_registration","car_insurance_renewal_date","car_insurer","bank_name_of_account_holder","bank_sort_code","bank_account_number","driver_license_front_photo","driver_license_back_photo","identity_photo","right_to_work_photos","area_ids"];return(i.reduce(t,(t,a)=>i.isEmpty(e[a])?t:t+1,0)/t.length*100).toFixed(0)},onCangePerPage(){this.page=1},onStatusfilter(){this.page=1}},filters:{activityTime:function(e){return e?o.a.utc(e,"YYYY-MM-DD HH:mm:ss").local().fromNow():"never"},registrationFinishTime:function(e){return e?o.a.utc(e,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"):"-"}}},c=(a("272e"),a("2877")),d=a("6544"),_=a.n(d),h=a("c6a6"),m=a("8336"),u=a("a609"),v=a("cc20"),p=a("62ad"),f=a("a523"),g=a("0e8f"),b=a("132d"),k=a("8860"),w=a("da13"),y=a("5d23"),D=a("e449"),x=a("891e"),C=a("0fd9"),$=a("b974"),P=a("1f4f"),S=a("2fa4"),Y=a("8654"),R=a("3a2f"),N=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Drivers")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[0!==e.areas.length?a("span",[a("v-btn",e._g({staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:""}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Driver\n                        ")],1)],1):a("span",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"primary",dark:"","aria-disabled":"true"}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Driver\n                                ")],1)]}}],null,!0)},[a("span",[e._v("At first please add area")])])],1)]}}])},[a("v-list",[a("new-driver-modal"),a("new-driver-half-board-modal")],1)],1)],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}}),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{items:e.driver_status_list,"item-text":"name","item-value":"id",label:"All statuses",solo:"",clearable:"","hide-details":""},on:{change:e.onStatusfilter},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("div",[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]}},{key:"item",fn:function(t){return["root"==t.item.type?[a("div",{staticClass:"select-drop-item-rootgroup"},[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]:[a("div",{staticClass:"select-drop-item-subgroup"},[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]]}}]),model:{value:e.filter_status,callback:function(t){e.filter_status=t},expression:"filter_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-text-field",{attrs:{solo:"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search Drivers",clearable:""},model:{value:e.filter_search,callback:function(t){e.filter_search=t},expression:"filter_search"}})],1)],1),0===e.driversSearchedPaged.length?a("span",{staticClass:"pl-2"},[e._v("No drivers found")]):e._e(),0!==e.driversSearchedPaged.length?a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Name")]),a("th",{staticClass:"text-left"},[e._v("Areas")]),a("th",{staticClass:"text-left"},[e._v("Data Full")]),a("th",{staticClass:"text-left"},[e._v("Status")]),a("th",{staticClass:"text-left"},[e._v("Activation Date")]),a("th",{staticClass:"text-left"},[e._v("Activity")]),a("th",{staticClass:"text-left"})])]),a("tbody",e._l(e.driversSearchedPaged,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"person-name-td"},[a("span",{staticClass:"person-name"},[e._v(e._s(t.first_name)+" "+e._s(t.last_name))])]),a("td",{staticClass:"person-area-td"},[a("span",{staticClass:"person-area"},[e._v(e._s(e.getArealabelById(t.area_ids)))])]),a("td",{staticClass:"person-area-td"},[a("span",{class:t.filledDataColor},[e._v(e._s(t.filledDataCount)+"%")])]),a("td",[t.status==e.DRIVER_STATUS_ACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:e.green}},r),[e._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[e._v("Activated, "+e._s(e._f("activityTime")(t.activated_at)))])])],1):e._e(),t.status==e.DRIVER_STATUS_INACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:e.orange}},r),[e._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[e._v("Inactive Driver")])])],1):e._e(),t.status==e.DRIVER_STATUS_REGISTRED?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:e.indigo}},r),[e._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[e._v("Applicant Driver")])])],1):e._e()]),a("td",[t.status==e.DRIVER_STATUS_ACTIVE?a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(r){var i=r.on;return[a("span",e._g({},i),[e._v("\n                                    "+e._s(e._f("registrationFinishTime")(t.activated_at))+"\n                                ")])]}}],null,!0)},[a("span",[e._v("Activated at")])]):e._e()],1),a("td",[t.activity_status==e.ACTIVITY_STATUS_ONLINE?a("span",[a("v-chip",{staticClass:"ma-2",attrs:{color:"green","text-color":"white","x-small":""}},[e._v("\n                                online\n                            ")])],1):e._e(),t.activity_status==e.ACTIVITY_STATUS_DISCONNECTED?a("span",[e._v("\n                            was online: "+e._s(e._f("activityTime")(t.activity_time))+"\n                        ")]):e._e(),t.push_token?a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:"blue"}},r),[e._v("mdi-cloud-lock-outline")])]}}],null,!0)},[a("span",[e._v("Firebase token obtained")])]):e._e()],1),a("td",[a("v-btn-toggle",{staticClass:"float-right primary"},[a("view-driver-modal",{attrs:{thisDriverData:t}}),[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({ref:"optionsMenu",refInFor:!0,staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:"",loading:e.localLoading}},r),[e._v("options"),a("v-icon",[e._v("mdi-menu-down")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",[t.status==e.DRIVER_STATUS_ACTIVE?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.inactiveItem(e.DRIVER_STATUS_INACTIVE,t.id)}}},[e._v("Mark as Inactive")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.inactiveItem(e.DRIVER_STATUS_ACTIVE,t.id)}}},[e._v("Mark as Active")])],1),a("v-list-item",[t.not_progressing==e.PROGRESSING_PROCESSING?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.notProgressingItem(e.PROGRESSING_NOT_PROGRESSING,t.id)}}},[e._v("Mark as Not Progressing")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.notProgressingItem(e.PROGRESSING_PROCESSING,t.id)}}},[e._v("Restore Progressing")])],1),a("edit-driver-modal",{attrs:{thisDriverData:t},on:{driverUpdated:e.editedDriver}},[a("v-list-item",{ref:"editDriverItem",refInFor:!0,staticClass:"pointer"},[a("v-list-item-title",[e._v("Edit Driver")])],1)],1),a("edit-working-time-modal",{attrs:{thisDriverData:t},on:{driverUpdated:e.editedDriver}})],1)],1)],1)]],2)],1)])})),0)]):e._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[a("v-flex",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-2",staticStyle:{"min-width":"75px"}},[e._v("\n                        Per page:\n                    ")]),a("v-select",{attrs:{items:e.per_page_list,label:"Solo field",solo:"",dense:"","hide-details":""},on:{change:e.onCangePerPage},model:{value:e.per_page,callback:function(t){e.per_page=t},expression:"per_page"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-pagination",{attrs:{value:e.page,length:e.total_pages,"total-visible":10},on:{input:e.onChangePage}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[e._v("\n                "+e._s((e.page-1)*e.per_page+1)+" - "+e._s(e.page*e.per_page<e.driversSearched.length?e.page*e.per_page:e.driversSearched.length)+" of "+e._s(e.driversSearched.length)+"\n            ")])],1)],1)])}),[],!1,null,"5dcbb42a",null);t.a=N.exports;_()(N,{VAutocomplete:h.a,VBtn:m.a,VBtnToggle:u.a,VChip:v.a,VCol:p.a,VContainer:f.a,VFlex:g.a,VIcon:b.a,VList:k.a,VListItem:w.a,VListItemTitle:y.c,VMenu:D.a,VPagination:x.a,VRow:C.a,VSelect:$.a,VSimpleTable:P.a,VSpacer:S.a,VTextField:Y.a,VTooltip:R.a})},4700:function(e,t,a){"use strict";a("54b7")},"54b7":function(e,t,a){},5611:function(e,t,a){"use strict";var r=a("1dce"),i=a("b5ae"),s=a("2f62"),o=a("2ef0"),n=a("c1df"),l=a.n(n),c=a("f6b6");const d=["image/png","image/jpeg"],_=/(.*?)\.(jpg|jpeg|png)$/;var h={mixins:[r.validationMixin],name:"NewLocationModal",props:["thisAreaData"],validations:{firstName:{required:i.required},email:{required:i.required,email:i.email},lastName:{},date_of_birth:{},car_insurance_renewal_date:{},area_ids:{},restaurant_ids:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[e=>!!e||"Please enter your password",e=>e&&e.length>=6||"Password should be at least six symbols long"],readOnly:!1,localLoading:!1,dialog:!1,firstName:"",lastName:"",email:"",date_of_birth:"",car_make:"",car_model:"",car_registration:"",car_insurance_renewal_date:"",car_insurer:"",have_experience:20,experience_description:"",address_1:"",address_2:"",emergency_contact_name:"",emergency_contact_phone:"",bank_name_of_account_holder:"",bank_sort_code:"",bank_account_number:"",phone:"",city:"",postcode:"",password:"",driver_license_front_photo:void 0,driver_license_back_photo:void 0,identity_photo:void 0,photo_src:void 0,new_right_to_work_photos_uid_iterator:-1,right_to_work_photos:[],area_ids:[],restaurant_ids:[],tab_edit_restaurant:void 0,date_of_birth_selected:void 0,date_of_birth_picker:!1,car_insurance_renewal_date_selected:void 0,car_insurance_renewal_date_picker:!1,EXPERIANCE_YES:10,EXPERIANCE_NO:20,driver_license_front_src_photo:void 0,driver_license_back_src_photo:void 0,identity_src_photo:void 0,image_data:void 0,driver_license_front_photo_file:void 0,driver_license_back_photo_file:void 0,identity_photo_file:void 0,photo_src_file:void 0,imgRules:[e=>!(e&&e.size>1e7)||"File size should be less than 10 MB!"],response_errors:[]}),created(){},updated(){this.thisAreaData&&(this.area_ids=[+this.thisAreaData.id],this.readOnly=!0)},watch:{date_of_birth:function(e,t){t!=e&&/\d\d\/\d\d\/\d\d\d\d/.test(e)&&(this.$data.date_of_birth_selected=l()(e,"DD/MM/YYYY").format("YYYY-MM-DD"))},car_insurance_renewal_date:function(e,t){t!=e&&/\d\d\/\d\d\/\d\d\d\d/.test(e)&&(this.$data.car_insurance_renewal_date_selected=l()(e,"DD/MM/YYYY").format("YYYY-MM-DD"))}},computed:{...Object(s.c)(["areas","restaurants"]),imagesBaseUrl(){return this.appConfig.app_url+"/images"},selectAreaErrors(){const e=[];return this.$v.area_ids.$dirty,e},selectRestaurantErrors(){const e=[];return this.$v.restaurant_ids.$dirty,e},firstNameErrors(){const e=[];return this.$v.firstName.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.firstName.required&&e.push("First name is required."),e):e},lastNameErrors(){const e=[];return this.$v.lastName.$dirty,e},emailErrors(){const e=[];if(!this.$v.email.$dirty)return e;!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required");let t=o.get(this.response_errors,"email",[]);return o.each(t,t=>e.push(t)),e},dateOfBirthErrors(){const e=[];return this.$v.date_of_birth.$dirty?(this.$data.date_of_birth&&!l()(this.$data.date_of_birth,"DD/MM/YYYY").isValid()&&e.push("Date invalid format."),e):e},carInsuranceRenewalDateErrors(){const e=[];return this.$v.car_insurance_renewal_date.$dirty?(this.$data.car_insurance_renewal_date&&!l()(this.$data.car_insurance_renewal_date,"DD/MM/YYYY").isValid()&&e.push("Date invalid format."),e):e},areasList(){return this.areas},restaurantsList(){return 0==this.area_ids.length?[]:o.filter(this.restaurants,e=>-1!==this.area_ids.indexOf(+e.area_id))}},methods:{onChangeArea(){let e=o.map(this.restaurantsList,e=>e.id);this.restaurant_ids=o.intersection(e,this.restaurant_ids)},onChangeRestaurant(){},onRemoveRightToWorkPhoto(e){this.right_to_work_photos.splice(e,1)},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const e={first_name:this.firstName,last_name:this.lastName,email:this.email,address_1:this.address_1,address_2:this.address_2,postcode:this.postcode,city:this.city,phone:this.phone,date_of_birth:this.date_of_birth?l()(this.date_of_birth,"DD/MM/YYYY").format("YYYY-MM-DD"):void 0,emergency_contact_name:this.emergency_contact_name,emergency_contact_phone:this.emergency_contact_phone,car_make:this.car_make,car_model:this.car_model,car_registration:this.car_registration,car_insurance_renewal_date:this.car_insurance_renewal_date?l()(this.car_insurance_renewal_date,"DD/MM/YYYY").format("YYYY-MM-DD"):void 0,car_insurer:this.car_insurer,have_experience:this.have_experience,experience_description:this.experience_description,bank_name_of_account_holder:this.bank_name_of_account_holder,bank_sort_code:this.bank_sort_code,bank_account_number:this.bank_account_number,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids,right_to_work_photos:[]};this.switch_change_password&&(e.password=this.password),this.driver_license_front_src_photo&&(e.driver_license_front_src_photo=this.driver_license_front_src_photo),this.driver_license_back_src_photo&&(e.driver_license_back_src_photo=this.driver_license_back_src_photo),this.identity_src_photo&&(e.identity_src_photo=this.identity_src_photo),this.image_data&&(e.image_data=this.image_data),o.each(this.right_to_work_photos,t=>{t.file_src&&e.right_to_work_photos.push({src_name:t.src_name,file_src:t.file_src})}),this.$store.dispatch("createNewDriver",{payload:e,params:{halfBoard:!1}}).then(e=>{this.dialog=!1,this.clear()}).catch(e=>{this.response_errors=e}).finally(()=>{this.localLoading=!1})}},clear(){this.$v.$reset(),this.firstName=void 0,this.lastName=void 0,this.email=void 0,this.date_of_birth=void 0,this.car_make=void 0,this.car_model=void 0,this.car_registration=void 0,this.car_insurance_renewal_date=void 0,this.car_insurer=void 0,this.have_experience=20,this.experience_description=void 0,this.address_1=void 0,this.address_2=void 0,this.emergency_contact_name=void 0,this.emergency_contact_phone=void 0,this.bank_name_of_account_holder=void 0,this.bank_sort_code=void 0,this.bank_account_number=void 0,this.phone=void 0,this.city=void 0,this.postcode=void 0,this.status=void 0,this.driver_license_front_photo=void 0,this.driver_license_back_photo=void 0,this.identity_photo=void 0,this.photo_src=void 0,this.right_to_work_photos=[],this.area_ids=[],this.restaurant_ids=[]},dateOfBirthSelect:function(){this.$data.date_of_birth=l()(this.$data.date_of_birth_selected,"YYYY-MM-DD").format("DD/MM/YYYY"),this.$data.date_of_birth_picker=!1},getDateOfBirthText:function(e){return l()(e,"YYYY-MM-DD").format("DD/MM/YYYY")},carInsuranceRenewalDateSelect:function(){this.$data.car_insurance_renewal_date=l()(this.$data.car_insurance_renewal_date_selected,"YYYY-MM-DD").format("DD/MM/YYYY"),this.$data.car_insurance_renewal_date_picker=!1},getCarInsuranceRenewalDateText:function(e){return l()(e,"YYYY-MM-DD").format("DD/MM/YYYY")},onAddDriverLicenseFrontPhoto(){this.$refs.driver_license_front_photo.click()},onRemoveDriverLicenseFrontPhoto(){this.driver_license_front_photo=void 0,this.driver_license_front_src_photo=void 0},onChangDriverLicenseFrontPhoto(){0!=this.$refs.driver_license_front_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.driver_license_front_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.driver_license_front_photo=t,this.driver_license_front_src_photo=t})}),this.$refs.driver_license_front_photo.value=null)},onAddDriverLicenseBackPhoto(){this.$refs.driver_license_back_photo.click()},onRemoveDriverLicenseBackPhoto(){this.driver_license_back_photo=void 0,this.driver_license_back_src_photo=void 0},onChangDriverLicenseBackPhoto(){0!=this.$refs.driver_license_back_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.driver_license_back_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.driver_license_back_photo=t,this.driver_license_back_src_photo=t})}),this.$refs.driver_license_back_photo.value=null)},onAddIdentityPhoto(){this.$refs.identity_photo.click()},onRemoveIdentityPhoto(){this.identity_photo=void 0,this.identity_src_photo=void 0},onChangIdentityPhoto(){0!=this.$refs.identity_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.identity_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.identity_photo=t,this.identity_src_photo=t})}),this.$refs.identity_photo.value=null)},onAddPhotoSrc(){this.$refs.photo_src.click()},onRemovePhotoSrc(){this.photo_src=void 0,this.image_data=void 0},onChangPhotoSrc(){0!=this.$refs.photo_src.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.photo_src.files,e=>{this.processFilePreview(e,(e,t)=>{this.photo_src=t,this.image_data=t})}),this.$refs.photo_src.value=null)},onAddRightToWorkPhotos(){this.$refs.right_to_work_photo.click()},onRemoveRightToWorkPhoto(e){this.right_to_work_photos.splice(e,1)},onChangRightToWorkPhoto(){0!=this.$refs.right_to_work_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.right_to_work_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.right_to_work_photos.push({id:this.new_right_to_work_photos_uid_iterator--,src_name:e,file_name:t,file_src:t})})}),this.$refs.right_to_work_photo.value=null)},processFilePreview(e,t){if(!e||"undefined"==typeof FileReader)return;if(!_.test(e.name.toLowerCase())||-1==d.indexOf(e.type))return void this.$store.dispatch("setError",{text:"Unsupported file type",type:"error",code:402});let a=new FileReader;a.onload=function(a){if(-1!==d.indexOf(e.type)||_.test(e.name.toLowerCase())){let r=new Image;r.src=a.target.result,r.onload=function(){r=c.a.compressImage(r,90,1920),t(e.name.toLowerCase(),r.src)}}else t(e.name.toLowerCase(),a.target.result)},a.readAsDataURL(e)},getPhotoPath:function(e){return e&&0===e.indexOf("data:image/")?e:this.imagesBaseUrl+"/"+e}}},m=a("2877"),u=a("6544"),v=a.n(u),p=a("e4e5"),f=a("8336"),g=a("b0af"),b=a("99d9"),k=a("62ad"),w=a("a523"),y=a("2e4b"),D=a("169a"),x=a("4bd4"),C=a("132d"),$=a("adda"),P=a("da13"),S=a("5d23"),Y=a("e449"),R=a("0fd9"),N=a("b974"),I=a("b73d"),E=a("71a3"),V=a("c671"),A=a("fe57"),T=a("aac8"),L=a("8654"),M=Object(m.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-list-item",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[a("v-list-item-title",[e._v("Add Drivers Manually")])],1),a("v-dialog",{attrs:{width:"fit-content"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Drivers Manual Register")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab",[e._v("Main")]),a("v-tab",[e._v("Identity")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"First Name*",hint:"enter first name",required:"","error-messages":e.firstNameErrors},on:{input:function(t){return e.$v.firstName.$touch()},blur:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Last Name",hint:"enter a last name","error-messages":e.lastNameErrors,required:""},on:{input:function(t){return e.$v.lastName.$touch()},blur:function(t){return e.$v.lastName.$touch()}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Driver Email*",required:"","error-messages":e.emailErrors},on:{input:function(t){return e.$v.email.$touch()},blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"max-width":"346px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{"clear-icon":"mdi-close","prepend-icon":"mdi-calendar",clearable:"",outlined:"",label:"Date of birth",hint:"22/11/1990","persistent-hint":"",required:"","error-messages":e.dateOfBirthErrors,autocomplete:"off"},on:{input:function(t){return e.$v.date_of_birth.$touch()},blur:function(t){return e.$v.date_of_birth.$touch()}},model:{value:e.date_of_birth,callback:function(t){e.date_of_birth=t},expression:"date_of_birth"}},r))]}}]),model:{value:e.date_of_birth_picker,callback:function(t){e.date_of_birth_picker=t},expression:"date_of_birth_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1","title-date-format":e.getDateOfBirthText},on:{"click:date":e.dateOfBirthSelect},model:{value:e.date_of_birth_selected,callback:function(t){e.date_of_birth_selected=t},expression:"date_of_birth_selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_1","persistent-hint":""},model:{value:e.address_1,callback:function(t){e.address_1=t},expression:"address_1"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_2","persistent-hint":""},model:{value:e.address_2,callback:function(t){e.address_2=t},expression:"address_2"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"City",hint:"Enter city"},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Postcode",hint:"Enter postcode"},model:{value:e.postcode,callback:function(t){e.postcode=t},expression:"postcode"}})],1),a("v-col",{attrs:{cols:"6",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"phone Number",type:"phone"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact name","persistent-hint":""},model:{value:e.emergency_contact_name,callback:function(t){e.emergency_contact_name=t},expression:"emergency_contact_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact phone","persistent-hint":""},model:{value:e.emergency_contact_phone,callback:function(t){e.emergency_contact_phone=t},expression:"emergency_contact_phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Make","persistent-hint":""},model:{value:e.car_make,callback:function(t){e.car_make=t},expression:"car_make"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Model","persistent-hint":""},model:{value:e.car_model,callback:function(t){e.car_model=t},expression:"car_model"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Registration","persistent-hint":""},model:{value:e.car_registration,callback:function(t){e.car_registration=t},expression:"car_registration"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Insurer","persistent-hint":""},model:{value:e.car_insurer,callback:function(t){e.car_insurer=t},expression:"car_insurer"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"max-width":"346px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{"clear-icon":"mdi-close","prepend-icon":"mdi-calendar",clearable:"",outlined:"",label:"Car Insurance Renewal Date",hint:"22/11/2019","persistent-hint":"",required:"","error-messages":e.carInsuranceRenewalDateErrors,autocomplete:"off"},on:{input:function(t){return e.$v.car_insurance_renewal_date.$touch()},blur:function(t){return e.$v.car_insurance_renewal_date.$touch()}},model:{value:e.car_insurance_renewal_date,callback:function(t){e.car_insurance_renewal_date=t},expression:"car_insurance_renewal_date"}},r))]}}]),model:{value:e.car_insurance_renewal_date_picker,callback:function(t){e.car_insurance_renewal_date_picker=t},expression:"car_insurance_renewal_date_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1","title-date-format":e.getCarInsuranceRenewalDateText},on:{"click:date":e.carInsuranceRenewalDateSelect},model:{value:e.car_insurance_renewal_date_selected,callback:function(t){e.car_insurance_renewal_date_selected=t},expression:"car_insurance_renewal_date_selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-switch",{attrs:{"false-value":e.EXPERIANCE_NO,"true-value":e.EXPERIANCE_YES,label:"Have experience"},model:{value:e.have_experience,callback:function(t){e.have_experience=t},expression:"have_experience"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Experience description","persistent-hint":""},model:{value:e.experience_description,callback:function(t){e.experience_description=t},expression:"experience_description"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank Name of Account Holder","persistent-hint":""},model:{value:e.bank_name_of_account_holder,callback:function(t){e.bank_name_of_account_holder=t},expression:"bank_name_of_account_holder"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank sort code","persistent-hint":""},model:{value:e.bank_sort_code,callback:function(t){e.bank_sort_code=t},expression:"bank_sort_code"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank account number","persistent-hint":""},model:{value:e.bank_account_number,callback:function(t){e.bank_account_number=t},expression:"bank_account_number"}})],1),a("v-col",{staticClass:"area-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas Assigned to*",multiple:"",chips:"","deletable-chips":"",hint:"leave blank not to assign driver to any areas","persistent-hint":"",items:e.areasList,"item-text":"name","item-value":"id","error-messages":e.selectAreaErrors},on:{change:e.onChangeArea,blur:function(t){return e.$v.area_ids.$touch()}},model:{value:e.area_ids,callback:function(t){e.area_ids=t},expression:"area_ids"}})],1),a("v-col",{staticClass:"drivers_resturants-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Area's Restaurants Assigned to",multiple:"",chips:"","deletable-chips":"",hint:"if leave blank driver to be assigned to all Area's restaurants","persistent-hint":"",items:e.restaurantsList,"item-text":"name","item-value":"id",disabled:0==e.area_ids.length,"error-messages":e.selectRestaurantErrors},on:{change:e.onChangeRestaurant,blur:function(t){return e.$v.restaurant_ids.$touch()}},model:{value:e.restaurant_ids,callback:function(t){e.restaurant_ids=t},expression:"restaurant_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-switch",{attrs:{label:"Change Password"},model:{value:e.switch_change_password,callback:function(t){e.switch_change_password=t},expression:"switch_change_password"}})],1),e.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:e.passwordRules,counter:12},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1)],1),a("v-tab-item",[a("v-row",{staticStyle:{"align-items":"start"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("License Front Photo")]),a("hr"),a("input",{ref:"driver_license_front_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"driver_license_front_photo",id:"driver_license_front_photo",accept:"image/*"},on:{change:e.onChangDriverLicenseFrontPhoto}}),a("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:e.onAddDriverLicenseFrontPhoto}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose License Front Photo\n                                ")],1),a("v-row",[e.driver_license_front_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.driver_license_front_photo),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.driver_license_front_photo)}})],1),e.driver_license_front_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveDriverLicenseFrontPhoto()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                        ")],1):e._e()],1):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("License Back Photo")]),a("hr"),a("input",{ref:"driver_license_back_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"driver_license_back_photo",id:"driver_license_back_photo",accept:"image/*"},on:{change:e.onChangDriverLicenseBackPhoto}}),a("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:e.onAddDriverLicenseBackPhoto}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose License Back Photo\n                                ")],1),a("v-row",[e.driver_license_back_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.driver_license_back_photo),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.driver_license_back_photo)}})],1),e.driver_license_back_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveDriverLicenseBackPhoto()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                        ")],1):e._e()],1):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("Identity Photo")]),a("hr"),a("input",{ref:"identity_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"identity_photo",id:"identity_photo",accept:"image/*"},on:{change:e.onChangIdentityPhoto}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:e.onAddIdentityPhoto}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose Identity Photo\n                                ")],1),a("v-row",[e.identity_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.identity_photo),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.identity_photo)}})],1),e.identity_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveIdentityPhoto()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                        ")],1):e._e()],1):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("Profile Photo")]),a("hr"),a("input",{ref:"photo_src",staticStyle:{display:"none"},attrs:{type:"file",name:"photo_src",id:"photo_src",accept:"image/*"},on:{change:e.onChangPhotoSrc}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:e.onAddPhotoSrc}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose Profile Photo\n                                ")],1),a("v-row",[e.photo_src?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.photo_src),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.photo_src)}})],1),e.photo_src?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemovePhotoSrc()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                        ")],1):e._e()],1):e._e()],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("input",{ref:"right_to_work_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"right_to_work_photo",id:"right_to_work_photo",accept:"image/*",multiple:""},on:{change:e.onChangRightToWorkPhoto}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:e.onAddRightToWorkPhotos}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Right To Work Photos\n                                        ")],1)]},proxy:!0}])},[a("b",[e._v("Right to work photos")])]),a("v-row",e._l(e.right_to_work_photos,(function(t,r){return a("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"3"}},[a("a",{attrs:{href:e.getPhotoPath(t.file_name),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(t.file_name)}})],1),t.file_name?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveRightToWorkPhoto(r)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                        ")],1):e._e()],1)})),1)],1)],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||e.localLoading,loading:e.localLoading},on:{click:e.submit}},[e._v("Add\n                            ")]),a("v-btn",{staticClass:"warning",attrs:{loading:e.localLoading,depressed:""},on:{click:e.clear}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                                Clear\n                            ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"b59832f0",null);t.a=M.exports;v()(M,{VBanner:p.a,VBtn:f.a,VCard:g.a,VCardText:b.b,VCardTitle:b.c,VCol:k.a,VContainer:w.a,VDatePicker:y.a,VDialog:D.a,VForm:x.a,VIcon:C.a,VImg:$.a,VListItem:P.a,VListItemTitle:S.c,VMenu:Y.a,VRow:R.a,VSelect:N.a,VSwitch:I.a,VTab:E.a,VTabItem:V.a,VTabs:A.a,VTabsItems:T.a,VTextField:L.a})},"60fa":function(e,t,a){"use strict";var r=a("1dce"),i=a("b5ae"),s=a("2f62"),o=a("2ef0"),n={mixins:[r.validationMixin],name:"NewLocationModal",props:["thisDriverData","btnLabel"],validations:{firstName:{required:i.required},email:{required:i.required,email:i.email},lastName:{required:i.required},area_ids:{},restaurant_ids:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[e=>!!e||"Please enter your password",e=>e&&e.length>=6||"Password should be at least six symbols long"],driverData:null,readOnly:!1,localLoading:!1,dialog:!1,firstName:"",email:"",address_1:"",address_2:"",emergency_contact_name:"",emergency_contact_phone:"",bank_sort_code:"",bank_account_number:"",lastName:"",telephone:"",city:"",postcode:"",password:"",area_ids:[],restaurant_ids:[]}),computed:{...Object(s.c)(["areas","restaurants"]),selectAreaErrors(){const e=[];return this.$v.area_ids.$dirty,e},selectRestaurantErrors(){const e=[];return this.$v.restaurant_ids.$dirty,e},firstNameErrors(){const e=[];return this.$v.firstName.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.firstName.required&&e.push("First name is required."),e):e},lastNameErrors(){const e=[];return this.$v.lastName.$dirty?(!this.$v.lastName.required&&e.push("Last Name is required."),e):e},emailErrors(){const e=[];return this.$v.email.$dirty?(!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required"),e):e},areasList(){return this.areas},restaurantsList(){return 0==this.area_ids.length?[]:o.filter(this.restaurants,e=>-1!==this.area_ids.indexOf(+e.area_id))}},created(){},mounted(){this.driverData=this.thisDriverData,this.id=this.thisDriverData.id,this.firstName=this.thisDriverData.first_name,this.lastName=this.thisDriverData.last_name,this.email=this.thisDriverData.email,this.address_1=this.thisDriverData.address_1,this.address_2=this.thisDriverData.address_2,this.emergency_contact_name=this.thisDriverData.emergency_contact_name,this.emergency_contact_phone=this.thisDriverData.emergency_contact_phone,this.bank_sort_code=this.thisDriverData.bank_sort_code,this.bank_account_number=this.thisDriverData.bank_account_number,this.telephone=this.thisDriverData.phone,this.city=this.thisDriverData.city,this.postcode=this.thisDriverData.postcode,this.status=this.thisDriverData.status,this.area_ids=o.map(this.thisDriverData.area_ids,e=>+e.area_id),this.restaurant_ids=o.map(this.thisDriverData.restaurant_ids,e=>+e.restaurant_id)},methods:{onChangeArea(){let e=o.map(this.restaurantsList,e=>e.id);this.restaurant_ids=o.intersection(e,this.restaurant_ids)},onChangeRestaurant(){},cancel(){this.id=this.thisDriverData.id,this.firstName=this.thisDriverData.first_name,this.lastName=this.thisDriverData.last_name,this.email=this.thisDriverData.email,this.address_1=this.thisDriverData.address_1,this.address_2=this.thisDriverData.address_2,this.emergency_contact_name=this.thisDriverData.emergency_contact_name,this.emergency_contact_phone=this.thisDriverData.emergency_contact_phone,this.bank_sort_code=this.thisDriverData.bank_sort_code,this.bank_account_number=this.thisDriverData.bank_account_number,this.telephone=this.thisDriverData.phone,this.city=this.thisDriverData.city,this.postcode=this.thisDriverData.postcode,this.status=this.thisDriverData.status,this.area_ids=o.map(this.thisDriverData.area_ids,e=>+e.area_id),this.restaurant_ids=o.map(this.thisDriverData.restaurant_ids,e=>+e.restaurant_id),this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const e={id:this.id,first_name:this.firstName,last_name:this.lastName,email:this.email,address_1:this.address_1,address_2:this.address_2,emergency_contact_name:this.emergency_contact_name,emergency_contact_phone:this.emergency_contact_phone,bank_sort_code:this.bank_sort_code,bank_account_number:this.bank_account_number,phone:this.telephone,city:this.city,postcode:this.postcode,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids};this.switch_change_password&&(e.password=this.password),this.$store.dispatch("editDriver",e).then(()=>{this.dialog=!1,this.password="",this.switch_change_password=!1,this.$emit("driverUpdated","")}).catch(e=>{this.email="";let t=e.response;this.$store.dispatch("setError",t[Object.keys(t)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},l=a("2877"),c=a("6544"),d=a.n(c),_=a("8336"),h=a("b0af"),m=a("99d9"),u=a("62ad"),v=a("a523"),p=a("169a"),f=a("4bd4"),g=a("132d"),b=a("0fd9"),k=a("b974"),w=a("8654"),y=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"float-right primary",attrs:{small:"",depressed:""}},r),[e._v("View\n        ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Driver")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"First Name*",hint:"enter first name",required:"",disabled:!0,"error-messages":e.firstNameErrors},on:{input:function(t){return e.$v.firstName.$touch()},blur:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Last Name*",hint:"enter a last name",disabled:!0,"error-messages":e.lastNameErrors,required:""},on:{input:function(t){return e.$v.lastName.$touch()},blur:function(t){return e.$v.lastName.$touch()}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Driver Email*",required:"",disabled:!0,"error-messages":e.emailErrors},on:{input:function(t){return e.$v.email.$touch()},blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_1",disabled:!0,"persistent-hint":""},model:{value:e.address_1,callback:function(t){e.address_1=t},expression:"address_1"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_2",disabled:!0,"persistent-hint":""},model:{value:e.address_2,callback:function(t){e.address_2=t},expression:"address_2"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"City",hint:"Enter city",disabled:!0},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Postcode",hint:"Enter postcode",disabled:!0},model:{value:e.postcode,callback:function(t){e.postcode=t},expression:"postcode"}})],1),a("v-col",{attrs:{cols:"6",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number",type:"Telephone",disabled:!0},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact name",disabled:!0,"persistent-hint":""},model:{value:e.emergency_contact_name,callback:function(t){e.emergency_contact_name=t},expression:"emergency_contact_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact phone",disabled:!0,"persistent-hint":""},model:{value:e.emergency_contact_phone,callback:function(t){e.emergency_contact_phone=t},expression:"emergency_contact_phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank sort code",disabled:!0,"persistent-hint":""},model:{value:e.bank_sort_code,callback:function(t){e.bank_sort_code=t},expression:"bank_sort_code"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank account number",disabled:!0,"persistent-hint":""},model:{value:e.bank_account_number,callback:function(t){e.bank_account_number=t},expression:"bank_account_number"}})],1),a("v-col",{staticClass:"area-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas Assigned to*",multiple:"",chips:"","deletable-chips":"",hint:"leave blank not to assign driver to any areas","persistent-hint":"",disabled:!0,items:e.areasList,"item-text":"name","item-value":"id","error-messages":e.selectAreaErrors},on:{change:e.onChangeArea,blur:function(t){return e.$v.area_ids.$touch()}},model:{value:e.area_ids,callback:function(t){e.area_ids=t},expression:"area_ids"}})],1),a("v-col",{staticClass:"drivers_resturants-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Area's Restaurants Assigned to",multiple:"",chips:"","deletable-chips":"",hint:"if leave blank driver to be assigned to all Area's restaurants","persistent-hint":"",disabled:!0,items:e.restaurantsList,"item-text":"name","item-value":"id","error-messages":e.selectRestaurantErrors},on:{change:e.onChangeRestaurant,blur:function(t){return e.$v.restaurant_ids.$touch()}},model:{value:e.restaurant_ids,callback:function(t){e.restaurant_ids=t},expression:"restaurant_ids"}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"7132f1d8",null);t.a=y.exports;d()(y,{VBtn:_.a,VCard:h.a,VCardText:m.b,VCardTitle:m.c,VCol:u.a,VContainer:v.a,VDialog:p.a,VForm:f.a,VIcon:g.a,VRow:b.a,VSelect:k.a,VTextField:w.a})},6724:function(e,t,a){"use strict";var r=a("2b0e"),i=a("2f62"),s=a("2ef0"),o={name:"Home",data:()=>({user_role:void 0,thisRestaurantData:void 0,restaurants_list:[],is_mobile_version:!1}),created(){let e=!1;var t;t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),this.is_mobile_version=e},computed:{...Object(i.c)(["user","isUserLoggedIn","loading"]),restaurantsSearched(){return this.restaurants_list}},mounted:function(){this.loadData()},methods:{loadData(){if(localStorage.getItem("user")){let e=JSON.parse(localStorage.getItem("user"));this.user_role=e.role;let t=[];s.each(e.restaurants,a=>{t.push({id:a.id,area_id:a.area_id,name:a.name,address:a.address,contactName:a.contact_name,telephone:a.telephone,map_latitude:a.map_latitude,map_longitude:a.map_longitude,meal:a.meal,uniform:a.uniform,cash_orders:a.cash_orders,waiting_location:a.waiting_location,other:a.other,bonus_target:a.bonus_target,logo_src:a.logo_src,email:e.email})}),this.restaurants_list=[],r.a.nextTick(()=>{this.restaurants_list=t})}}}},n=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),_=a("62ad"),h=a("a523"),m=a("0e8f"),u=a("0fd9"),v=a("1f4f"),p=a("2fa4"),f=Object(n.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Home")]),a("v-spacer",{staticClass:"line"}),a("hr")],1)],1),a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("First Name")]),a("th",{staticClass:"text-left"},[e._v("Last Name")]),a("th",{staticClass:"text-left"},[e._v("Email Address")])])]),a("tbody",[a("tr",[a("td",[e._v(e._s(e.user.firstName))]),a("td",[e._v(e._s(e.user.lastName))]),a("td",[e._v(e._s(e.user.email))])])])])],1),"restaurant"==e.user_role?a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Restaurants")]),a("v-spacer",{staticClass:"line"})],1)],1),0===e.restaurantsSearched.length?a("span",[e._v("No restaurants found")]):e._e(),e.is_mobile_version?e._e():a("div",{staticClass:"restaurants-table"},[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Restaurant Name")]),a("th",{staticClass:"text-left"},[e._v("Location Address")]),a("th",{staticClass:"text-right"},[e._v("Actions")])])]),a("tbody",e._l(e.restaurantsSearched,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.name))]),a("td",[a("restaurant-address-modal",{attrs:{thisRestaurantId:t.id}})],1),a("td",[a("edit-restaurant-profile-modal",{attrs:{thisRestaurantData:t},on:{updated:e.loadData}})],1)])})),0)])],1),e.is_mobile_version?a("div",e._l(e.restaurantsSearched,(function(t){return a("v-card",{key:t.id,staticClass:"time-sheet-table__line",staticStyle:{"margin-bottom":"2px"},attrs:{color:"elevation-1","no-gutters":"",tile:""}},[a("v-row",[a("v-col",[e._v(e._s(t.name))])],1),a("v-row",[a("v-col",[a("restaurant-address-modal",{attrs:{thisRestaurantId:t.id}})],1)],1),a("v-row",[a("v-col",[a("edit-restaurant-profile-modal",{attrs:{thisRestaurantData:t},on:{updated:e.loadData}})],1)],1)],1)})),1):e._e()],1):e._e()])}),[],!1,null,"a10e17d0",null);t.a=f.exports;c()(f,{VCard:d.a,VCol:_.a,VContainer:h.a,VFlex:m.a,VRow:u.a,VSimpleTable:v.a,VSpacer:p.a})},"735b":function(e,t,a){"use strict";var r=a("bc3a"),i=a.n(r),s={name:"Registration",data(){return{showPassword:!1,showConfirmPassword:!1,email:"",password:"",confirmPassword:"",firstName:"",lastName:"",valid:!1,localLoading:!1,nameRules:[e=>!!e||"Please enter your name"],lastNameRules:[e=>!!e||"Please enter your last name"],emailRules:[e=>!!e||"Please enter your e-mail",e=>/.+@.+/.test(e)||"Must be valid e-mail"],passwordRules:[e=>!!e||"Please enter password",e=>e&&e.length>=6||"Min 6 symbols"],confirmPasswordRules:[e=>!!e||"Please confirm your password",e=>e===this.password||"Passwords do not match"]}},created(){this.$route.query.loginError&&this.$store.dispatch("setError","Please log in to access this page"),localStorage.getItem("user")&&this.$router.push("/newsfeed")},methods:{onCancel(){this.email="",this.password="",this.confirmPassword="",this.firstName="",this.lastName=""},onSubmit(){if(this.$refs.form.validate()){this.localLoading=!0;const e={firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password};console.log(this.appConfig.app_url+"/api/register"),console.log(""+this.appConfig.app_url),i.a.post(this.appConfig.app_url+"/api/register",e).then(e=>{let t=e.data.user;return this.$store.dispatch("registerUser",t),{id:t.id,firstName:t.first_name,lastName:t.last_name,email:t.email,restaurantsWorksFor:[],access_token:e.data.access_token}}).then(e=>(this.$store.commit("setUser",e),localStorage.setItem("user",JSON.stringify(e)),"/newsfeed")).then(e=>{this.$router.push(e)}).catch(e=>{let t=e.response.data.error;this.$store.dispatch("setError",t[Object.keys(t)[0]][0]),this.password="",this.confirmPassword=""}).finally(()=>{this.localLoading=!1})}}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("8336"),d=a("b0af"),_=a("99d9"),h=a("a523"),m=a("0e8f"),u=a("4bd4"),v=a("132d"),p=a("a722"),f=a("0fd9"),g=a("2fa4"),b=a("8654"),k=Object(o.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Registration")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("span",{staticClass:"auth-type-question"},[e._v("Already registered?")]),a("v-btn",{attrs:{depressed:"",color:"primary",to:"/login"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-account")]),e._v("\n                Log In\n            ")],1)],1)],1),a("v-card",[a("v-container",[a("v-form",{ref:"form",attrs:{validation:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-text",[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"First Name",label:"First Name",type:"text",rules:e.nameRules},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"Last Name",label:"Last Name",type:"text",rules:e.lastNameRules},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"email",label:"Email",type:"email",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:e.passwordRules,counter:12},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{"append-icon":e.showConfirmPassword?"mdi-eye":"mdi-eye-off",type:e.showConfirmPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"confirm-password",label:"Confirm Password",rules:e.confirmPasswordRules,counter:12},on:{"click:append":function(t){e.showConfirmPassword=!e.showConfirmPassword}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{depressed:"",loading:e.localLoading,disabled:!e.valid||e.localLoading},on:{click:e.onSubmit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check")]),e._v("\n                                Register\n                            ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:e.localLoading,disabled:e.localLoading},on:{click:e.onCancel}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                                Cancel\n                            ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"547f2bae",null);t.a=k.exports;l()(k,{VBtn:c.a,VCard:d.a,VCardActions:_.a,VCardText:_.b,VContainer:h.a,VFlex:m.a,VForm:u.a,VIcon:v.a,VLayout:p.a,VRow:f.a,VSpacer:g.a,VTextField:b.a})},"741c":function(e,t,a){"use strict";var r=a("2f62"),i=a("2ef0"),s=a("c1df"),o=a.n(s),n=a("28c7");var l={name:"Drivers",components:{"edit-working-time-modal":n.a},data:()=>({green:"#0ab90a",orange:"#dc7319d1",indigo:"#3F51B5",DRIVER_STATUS_ACTIVE:10,DRIVER_STATUS_INACTIVE:20,DRIVER_STATUS_REGISTRED:30,ACTIVITY_STATUS_ONLINE:10,ACTIVITY_STATUS_DISCONNECTED:20,PROGRESSING_NOT_PROGRESSING:10,PROGRESSING_PROCESSING:20,localLoading:!1,REGISTRATION_STEP_FINISH:40,filter_search:void 0,filter_status:10,driver_status_list:[{id:30,type:"root",name:"All"},{id:120,type:"subgroup",name:"Completed"},{id:130,type:"subgroup",name:"Incomplete"},{id:140,type:"subgroup",name:"Not Progressing"},{id:150,type:"subgroup",name:"Progressing"},{id:10,type:"root",name:"Show only active"},{id:20,type:"root",name:"Show only inactive"}],filter_search:"",filter_area:null,page:1,per_page:15,per_page_list:[10,15,50,100,1e3],sortKey:"area_ids",sortOrder:1}),mounted(){Promise.all([this.$store.dispatch("fetchAreas"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchRestaurants")]).then(()=>{if("/drivers/:id"==i.get(this.$router.currentRoute,"matched[0].path")){let e=i.find(this.drivers,e=>e.id==i.get(this.$router.currentRoute,"params.id"));e&&(this.filter_search=e.email,this.filter_status=void 0,this.$nextTick(()=>{this.$refs.optionsMenu[0].$el.click(),this.$nextTick(()=>{this.$refs.editDriverItem[0].$el.click()})})),this.$router.replace("/drivers")}})},created(){},computed:{...Object(r.c)({drivers:"allDrivers",areas:"areas"}),driversSearched(){let e=this.drivers;e=i.map(e,e=>(e.filledDataCount=this.getFilledDataCount(e),e.filledDataCount>=95?e.filledDataColor="green--text":e.filledDataCount>=80?e.filledDataColor="blue-grey--text":e.filledDataCount>=50?e.filledDataColor="blue--text":e.filledDataCount>=40?e.filledDataColor="deep-orange--text":e.filledDataCount>=30?e.filledDataColor="red--text darken-4":e.filledDataColor="pink--text darken-4",e)),this.filter_search&&(e=i.filter(e,e=>-1!==e.full_name.toLowerCase().indexOf(this.filter_search)||-1!==e.email.toLowerCase().indexOf(this.filter_search)));const t=e=>this.filter_area?e.filter(e=>Array.isArray(e.area_ids)&&e.area_ids.some(e=>e.area_id===this.filter_area)):e;switch(this.filter_status){case 10:e=i.filter(e,e=>e.status==this.filter_status),e=t(e);break;case 30:case 20:if(e=i.filter(e,e=>e.status==this.filter_status),0===e.length){let e=this.filter_status;this.$store.dispatch("fetchDrivers",e)}e=t(e);break;case 120:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>e.filledDataCount>=70),e=t(e);break;case 130:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>e.filledDataCount<70),e=t(e);break;case 140:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>10==e.not_progressing),e=t(e);break;case 150:e=i.filter(e,e=>30==e.status),e=i.filter(e,e=>20==e.not_progressing),e=t(e);break;default:e=t(e)}return e},driverList(){return this.drivers},driversSearchedPaged(){let e=this.per_page*(this.page-1),t=e+this.per_page;return this.driversSearched.slice(e,t).sort((e,t)=>{let a=0,r="",i="";return e[this.sortKey]&&e[this.sortKey][0]&&e[this.sortKey][0].area_id&&(r=e[this.sortKey][0].area_id),t[this.sortKey]&&t[this.sortKey][0]&&t[this.sortKey][0].area_id&&(i=t[this.sortKey][0].area_id),r>r?a=1:i<r&&(a=-1),a*this.sortOrder})},total_pages(){return Math.ceil(this.driversSearched.length/this.per_page)},sortedDrivers(){return this.driversSearchedPaged.sort((e,t)=>{const a=e[this.sortKey]?e[this.sortKey].toString().toLowerCase():"",r=t[this.sortKey]?t[this.sortKey].toString().toLowerCase():"";return a<r?1===this.sortOrder?-1:1:a>r?1===this.sortOrder?1:-1:0})}},methods:{onAreaChange(){this.page=1},inactiveItem(e,t){this.localLoading=!0,this.$store.dispatch("setDriverStatus",{status:e,driver_id:t}).then(()=>{}).finally(()=>{this.localLoading=!1})},notProgressingItem(e,t){this.localLoading=!0,this.$store.dispatch("setDriverProgressing",{not_progressing:e,driver_id:t}).then(()=>{}).finally(()=>{this.localLoading=!1})},editedDriver(){},getArealabelById(e){if(!e||0==e.length)return"-";let t=[];for(let a=0;a<e.length;a++){let r=i.find(this.areas,t=>+t.id==+e[a].area_id);r&&t.push(r.name)}return t.join(", ")},onChangePage(e){this.page=e},getFilledDataCount(e){let t=["first_name","last_name","email","address_1","address_2","postcode","city","phone","date_of_birth","emergency_contact_name","emergency_contact_phone","car_make","car_model","car_registration","car_insurance_renewal_date","car_insurer","bank_name_of_account_holder","bank_sort_code","bank_account_number","driver_license_front_photo","driver_license_back_photo","identity_photo","right_to_work_photos","area_ids"];return(i.reduce(t,(t,a)=>i.isEmpty(e[a])?t:t+1,0)/t.length*100).toFixed(0)},onCangePerPage(){this.page=1},onStatusfilter(){this.page=1},sortBy(e){this.sortKey===e?this.sortOrder=-this.sortOrder:(this.sortKey=e,this.sortOrder=1)},sortByName(e){this.sortKey===e?this.sortOrder=1===this.sortOrder?-1:1:(this.sortKey=e,this.sortOrder=1)}},filters:{activityTime:function(e){return e?o.a.utc(e,"YYYY-MM-DD HH:mm:ss").local().fromNow():"never"},registrationFinishTime:function(e){return e?o.a.utc(e,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"):"-"}}},c=(a("4700"),a("2877")),d=a("6544"),_=a.n(d),h=a("c6a6"),m=a("8336"),u=a("a609"),v=a("cc20"),p=a("62ad"),f=a("a523"),g=a("0e8f"),b=a("132d"),k=a("8860"),w=a("da13"),y=a("5d23"),D=a("e449"),x=a("891e"),C=a("0fd9"),$=a("b974"),P=a("1f4f"),S=a("2fa4"),Y=a("8654"),R=a("3a2f"),N=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Drivers")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[0!==e.areas.length?a("span",[a("v-btn",e._g({staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:""}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Driver\n                          ")],1)],1):a("span",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"primary",dark:"","aria-disabled":"true"}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Driver\n                                  ")],1)]}}],null,!0)},[a("span",[e._v("At first please add area")])])],1)]}}])},[a("v-list",[a("new-driver-modal"),a("new-driver-half-board-modal")],1)],1)],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{items:e.areas,"item-text":"name","item-value":"id",label:"All Areas",solo:"",clearable:"","hide-details":""},on:{change:e.onAreaChange},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("div",[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]}},{key:"item",fn:function(t){return[a("div",{staticClass:"select-drop-item-rootgroup"},[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]}}]),model:{value:e.filter_area,callback:function(t){e.filter_area=t},expression:"filter_area"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{items:e.driver_status_list,"item-text":"name","item-value":"id",label:"All statuses",solo:"",clearable:"","hide-details":""},on:{change:e.onStatusfilter},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("div",[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]}},{key:"item",fn:function(t){return["root"==t.item.type?[a("div",{staticClass:"select-drop-item-rootgroup"},[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]:[a("div",{staticClass:"select-drop-item-subgroup"},[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]]}}]),model:{value:e.filter_status,callback:function(t){e.filter_status=t},expression:"filter_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-text-field",{attrs:{solo:"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search Drivers",clearable:""},model:{value:e.filter_search,callback:function(t){e.filter_search=t},expression:"filter_search"}})],1)],1),0===e.driversSearchedPaged.length?a("span",{staticClass:"pl-2"},[e._v("No drivers found")]):e._e(),0!==e.driversSearchedPaged.length?a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left",on:{click:function(t){return e.sortBy("first_name")}}},[e._v("\n                          Name\n                          "),"first_name"===e.sortKey?a("span",[e._v("\n                              "+e._s(1===e.sortOrder?"A-Z":"Z-A")+"\n                          ")]):e._e()]),a("th",{staticClass:"text-left",on:{click:function(t){return e.sortBy("area_ids")}}},[e._v("\n                      Areas\n                      "),"area_ids"===e.sortKey?a("span",[e._v(e._s(1===e.sortOrder?"▲":"▼"))]):e._e()]),a("th",{staticClass:"text-left"},[e._v("Data Full")]),a("th",{staticClass:"text-left"},[e._v("Status")]),a("th",{staticClass:"text-left"},[e._v("Activation Date")]),a("th",{staticClass:"text-left"},[e._v("Activity")]),a("th",{staticClass:"text-left"})])]),a("tbody",e._l(e.sortedDrivers,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"person-name-td"},[a("span",{staticClass:"person-name"},[e._v(e._s(t.first_name)+" "+e._s(t.last_name))])]),a("td",{staticClass:"person-area-td"},[a("span",{staticClass:"person-area"},[e._v(e._s(e.getArealabelById(t.area_ids)))])]),a("td",{staticClass:"person-area-td"},[a("span",{class:t.filledDataColor},[e._v(e._s(t.filledDataCount)+"%")])]),a("td",[t.status==e.DRIVER_STATUS_ACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:e.green}},r),[e._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[e._v("Activated, "+e._s(e._f("activityTime")(t.activated_at)))])])],1):e._e(),t.status==e.DRIVER_STATUS_INACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:e.orange}},r),[e._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[e._v("Inactive Driver")])])],1):e._e(),t.status==e.DRIVER_STATUS_REGISTRED?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:e.indigo}},r),[e._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[e._v("Applicant Driver")])])],1):e._e()]),a("td",[t.status==e.DRIVER_STATUS_ACTIVE?a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(r){var i=r.on;return[a("span",e._g({},i),[e._v("\n                                      "+e._s(e._f("registrationFinishTime")(t.activated_at))+"\n                                  ")])]}}],null,!0)},[a("span",[e._v("Activated at")])]):e._e()],1),a("td",[t.activity_status==e.ACTIVITY_STATUS_ONLINE?a("span",[a("v-chip",{staticClass:"ma-2",attrs:{color:"green","text-color":"white","x-small":""}},[e._v("\n                                  online\n                              ")])],1):e._e(),t.activity_status==e.ACTIVITY_STATUS_DISCONNECTED?a("span",[e._v("\n                              was online: "+e._s(e._f("activityTime")(t.activity_time))+"\n                          ")]):e._e(),t.push_token?a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:"blue"}},r),[e._v("mdi-cloud-lock-outline")])]}}],null,!0)},[a("span",[e._v("Firebase token obtained")])]):e._e()],1),a("td",[a("v-btn-toggle",{staticClass:"float-right primary"},[a("view-driver-modal",{attrs:{thisDriverData:t}}),[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({ref:"optionsMenu",refInFor:!0,staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:"",loading:e.localLoading}},r),[e._v("options"),a("v-icon",[e._v("mdi-menu-down")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",[t.status==e.DRIVER_STATUS_ACTIVE?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.inactiveItem(e.DRIVER_STATUS_INACTIVE,t.id)}}},[e._v("Mark as Inactive")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.inactiveItem(e.DRIVER_STATUS_ACTIVE,t.id)}}},[e._v("Mark as Active")])],1),a("v-list-item",[t.not_progressing==e.PROGRESSING_PROCESSING?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.notProgressingItem(e.PROGRESSING_NOT_PROGRESSING,t.id)}}},[e._v("Mark as Not Progressing")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.notProgressingItem(e.PROGRESSING_PROCESSING,t.id)}}},[e._v("Restore Progressing")])],1),a("edit-driver-modal",{attrs:{thisDriverData:t},on:{driverUpdated:e.editedDriver}},[a("v-list-item",{ref:"editDriverItem",refInFor:!0,staticClass:"pointer"},[a("v-list-item-title",[e._v("Edit Driver")])],1)],1),a("edit-working-time-modal",{attrs:{thisDriverData:t},on:{driverUpdated:e.editedDriver}})],1)],1)],1)]],2)],1)])})),0)]):e._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[a("v-flex",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-2",staticStyle:{"min-width":"75px"}},[e._v("\n                          Per page:\n                      ")]),a("v-select",{attrs:{items:e.per_page_list,label:"Solo field",solo:"",dense:"","hide-details":""},on:{change:e.onCangePerPage},model:{value:e.per_page,callback:function(t){e.per_page=t},expression:"per_page"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-pagination",{attrs:{value:e.page,length:e.total_pages,"total-visible":10},on:{input:e.onChangePage}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[e._v("\n                  "+e._s((e.page-1)*e.per_page+1)+" - "+e._s(e.page*e.per_page<e.driversSearched.length?e.page*e.per_page:e.driversSearched.length)+" of "+e._s(e.driversSearched.length)+"\n              ")])],1)],1)])}),[],!1,null,"5813efb6",null);t.a=N.exports;_()(N,{VAutocomplete:h.a,VBtn:m.a,VBtnToggle:u.a,VChip:v.a,VCol:p.a,VContainer:f.a,VFlex:g.a,VIcon:b.a,VList:k.a,VListItem:w.a,VListItemTitle:y.c,VMenu:D.a,VPagination:x.a,VRow:C.a,VSelect:$.a,VSimpleTable:P.a,VSpacer:S.a,VTextField:Y.a,VTooltip:R.a})},"87e5":function(e,t,a){"use strict";var r=a("2f62"),i=a("1dce"),s=a("b5ae"),o=(a("bc3a"),a("2ef0")),n={mixins:[i.validationMixin],name:"NewLocationModal",props:["thisAreaData"],validations:{firstName:{required:s.required},email:{required:s.required,email:s.email},lastName:{required:s.required},area_ids:{},restaurant_ids:{}},data:()=>({readOnly:!1,localLoading:!1,dialog:!1,firstName:"",email:"",lastName:"",area_ids:[],restaurant_ids:[],response_errors:[]}),created(){},updated(){this.thisAreaData&&(this.area_ids=[+this.thisAreaData.id],this.readOnly=!0)},computed:{...Object(r.c)(["areas","restaurants"]),selectAreaErrors(){const e=[];return this.$v.area_ids.$dirty,e},selectRestaurantErrors(){const e=[];return this.$v.restaurant_ids.$dirty,e},firstNameErrors(){const e=[];return this.$v.firstName.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.firstName.required&&e.push("First name is required."),e):e},lastNameErrors(){const e=[];return this.$v.lastName.$dirty?(!this.$v.lastName.required&&e.push("Last Name is required."),e):e},emailErrors(){const e=[];if(!this.$v.email.$dirty)return e;!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required");let t=o.get(this.response_errors,"email",[]);return o.each(t,t=>e.push(t)),e},areasList(){return this.areas},restaurantsList(){return 0==this.area_ids.length?[]:o.filter(this.restaurants,e=>-1!==this.area_ids.indexOf(+e.area_id))}},methods:{onChangeArea(){let e=o.map(this.restaurantsList,e=>e.id);this.restaurant_ids=o.intersection(e,this.restaurant_ids)},onChangeRestaurant(){},submit(){if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){const e={first_name:this.firstName,last_name:this.lastName,email:this.email,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids};this.$store.dispatch("createNewDriver",{payload:e,params:{halfBoard:!0}}).then(e=>{this.dialog=!1,this.clear()}).catch(e=>{this.response_errors=e}).finally(()=>{this.localLoading=!1})}},clear(){this.$v.$reset(),this.firstName="",this.email="",this.lastName="",this.restaurant_ids=[],this.area_ids=[]}}},l=a("2877"),c=a("6544"),d=a.n(c),_=a("8336"),h=a("b0af"),m=a("99d9"),u=a("62ad"),v=a("a523"),p=a("169a"),f=a("4bd4"),g=a("132d"),b=a("da13"),k=a("5d23"),w=a("0fd9"),y=a("b974"),D=a("8654"),x=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-list-item",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[a("v-list-item-title",[e._v("Add Drivers Half Board")])],1),a("v-dialog",{attrs:{width:"700px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Drivers Half Board Register")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"First Name*",hint:"enter first name",required:"","error-messages":e.firstNameErrors},on:{input:function(t){return e.$v.firstName.$touch()},blur:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Last Name*",hint:"enter a last name","error-messages":e.lastNameErrors,required:""},on:{input:function(t){return e.$v.lastName.$touch()},blur:function(t){return e.$v.lastName.$touch()}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Driver Email*",required:"","error-messages":e.emailErrors},on:{input:function(t){return e.$v.email.$touch()},blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{staticClass:"area-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas Assigned to*",multiple:"",chips:"","deletable-chips":"",hint:"leave blank not to assign driver to any areas","persistent-hint":"",items:e.areasList,"item-text":"name","item-value":"id","error-messages":e.selectAreaErrors},on:{change:e.onChangeArea,blur:function(t){return e.$v.area_ids.$touch()}},model:{value:e.area_ids,callback:function(t){e.area_ids=t},expression:"area_ids"}})],1),a("v-col",{staticClass:"drivers_resturants-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Area's Restaurants Assigned to",multiple:"",chips:"","deletable-chips":"",hint:"if leave blank driver to be assigned to all Area's estaurants","persistent-hint":"",items:e.restaurantsList,"item-text":"name","item-value":"id",disabled:0==e.area_ids.length,"error-messages":e.selectRestaurantErrors},on:{change:e.onChangeRestaurant,blur:function(t){return e.$v.restaurant_ids.$touch()}},model:{value:e.restaurant_ids,callback:function(t){e.restaurant_ids=t},expression:"restaurant_ids"}})],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||e.localLoading,loading:e.localLoading},on:{click:e.submit}},[e._v("Add\n                            ")]),a("v-btn",{staticClass:"warning",attrs:{loading:e.localLoading,depressed:""},on:{click:e.clear}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                                Clear\n                            ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"49efc822",null);t.a=x.exports;d()(x,{VBtn:_.a,VCard:h.a,VCardText:m.b,VCardTitle:m.c,VCol:u.a,VContainer:v.a,VDialog:p.a,VForm:f.a,VIcon:g.a,VListItem:b.a,VListItemTitle:k.c,VRow:w.a,VSelect:y.a,VTextField:D.a})},a14d:function(e,t,a){"use strict";var r=a("2f62"),i=a("2ef0"),s={name:"DriversListModal",props:["restaurantId"],data:()=>({dialog:!1,thisRestaurantId:null}),mounted(){},computed:{...Object(r.c)(["restaurants","drivers"]),driversListRestaurant(){if(i.isEmpty(this.restaurants))return[];if(i.isEmpty(this.drivers))return[];let e=i.find(this.restaurants,e=>e.id==this.restaurantId);return e?i.filter(this.drivers,t=>{if(0==t.area_ids.length)return!0;return-1!==i.map(t.area_ids,e=>e.area_id).indexOf(e.area_id)&&(0==t.restaurant_ids.length||!!i.find(t.restaurant_ids,t=>t.restaurant_id==e.id))}):[]}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("b0af"),d=a("a523"),_=a("169a"),h=a("0e8f"),m=a("132d"),u=a("da13"),v=a("5d23"),p=a("0fd9"),f=a("1f4f"),g=a("2fa4"),b=Object(o.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-list-item",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[a("v-list-item-title",[e._v("Drivers")])],1),a("v-dialog",{attrs:{width:"fit-content"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.dialog?a("v-card",[a("v-container",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Drivers Working Here")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1),a("v-spacer",{staticClass:"line"})],1)],1),a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Name")]),a("th",{staticClass:"text-left"},[e._v("Email")]),a("th",{staticClass:"text-left"},[e._v("Telephone")]),a("th",{staticClass:"text-left"},[e._v("Address")])])]),a("tbody",e._l(e.driversListRestaurant,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"person-name-td"},[a("span",{staticClass:"person-name"},[a("edit-driver-modal",{attrs:{thisDriverData:t}},[a("a",[e._v(e._s(t.first_name+" "+t.last_name))])])],1)]),a("td",[e._v(e._s(t.email))]),a("td",[e._v(e._s(t.phone))]),a("td",[e._v(e._s(t.address_1)+", "+e._s(t.address_2))])])})),0)])],1)],1):e._e()],1)],1)}),[],!1,null,"feac68c0",null);t.a=b.exports;l()(b,{VCard:c.a,VContainer:d.a,VDialog:_.a,VFlex:h.a,VIcon:m.a,VListItem:u.a,VListItemTitle:v.c,VRow:p.a,VSimpleTable:f.a,VSpacer:g.a})},b27c:function(e,t,a){"use strict";var r=a("bc3a"),i=a.n(r),s={name:"LogIn",mounted:function(){if(localStorage.getItem("user")){"restaurant"==JSON.parse(localStorage.getItem("user")).role?this.$router.push("/schedulerestaurant"):this.$router.push("/schedule")}},data:()=>({user:"",showPassword:!1,email:"",password:"",valid:!1,localLoading:!1,messages:{incorrect_login:"Incorrect logins - please try again!"},emailRules:[e=>!!e||"Please enter your e-mail",e=>/.+@.+/.test(e)||"Must be valid e-mail"],passwordRules:[e=>!!e||"Please enter your password",e=>e&&e.length>=6||"Password should be at least six symbols long"],tab_login_panel:0}),methods:{onCancel(){this.email="",this.password=""},onSubmit(){if(this.$refs.form.validate()){this.localLoading=!0;const e={email:this.email,password:this.password};switch(this.$data.tab_login_panel){case 0:i.a.post(this.appConfig.app_url+"/api/auth/login/restaurant",e).then(e=>{let t=e.data.restaurant;this.user={id:t.id,firstName:t.name,lastName:"",email:t.email,restaurantsWorksFor:[],access_token:e.data.access_token,role:"restaurant",restaurants:t.restaurants},localStorage.setItem("user",JSON.stringify(this.user))}).then(()=>{this.$router.go("/schedulerestaurant")}).catch(e=>{let t=e.response;e.response.status&&401===e.response.status&&(t=this.messages.incorrect_login),this.$store.dispatch("setError",t)}).finally(()=>{this.localLoading=!1});break;case 1:i.a.post(this.appConfig.app_url+"/api/auth/login",e).then(e=>{let t=e.data.user;this.user={id:t.id,firstName:t.first_name,lastName:t.last_name,email:t.email,restaurantsWorksFor:[],access_token:e.data.access_token,role:t.role,restaurants:[]},localStorage.setItem("user",JSON.stringify(this.user))}).then(()=>{this.$router.go("/schedule")}).catch(e=>{let t=e.response;e.response.status&&401===e.response.status&&(t=this.messages.incorrect_login),this.$store.dispatch("setError",t)}).finally(()=>{this.localLoading=!1});break;case 2:i.a.post(this.appConfig.app_url+"/api/auth/login/driver",e).then(e=>{let t=e.data.driver;this.user={id:t.id,firstName:t.first_name,lastName:t.last_name,email:t.email,restaurantsWorksFor:[],access_token:e.data.access_token,role:"driver",restaurants:[]},localStorage.setItem("user",JSON.stringify(this.user))}).then(()=>{this.$router.go("/newsfeed")}).catch(e=>{let t=e.response;e.response.status&&401===e.response.status&&(t=this.messages.incorrect_login),this.$store.dispatch("setError",t)}).finally(()=>{this.localLoading=!1})}}}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("8336"),d=a("b0af"),_=a("99d9"),h=a("a523"),m=a("0e8f"),u=a("4bd4"),v=a("132d"),p=a("a722"),f=a("0fd9"),g=a("2fa4"),b=a("71a3"),k=a("fe57"),w=a("8654"),y=Object(o.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Log In")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("v-tabs",{attrs:{right:""},model:{value:e.tab_login_panel,callback:function(t){e.tab_login_panel=t},expression:"tab_login_panel"}},[a("v-tab",[e._v("Business")]),a("v-tab",[e._v("Admin")])],1)],1)],1),a("v-card",[a("v-container",[a("v-form",{ref:"form",attrs:{validation:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-text",[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"email",label:"Email",type:"email",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:e.passwordRules,counter:12},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{depressed:"",loading:e.localLoading,disabled:!e.valid||e.localLoading},on:{click:e.onSubmit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check")]),e._v("\n                                    Log In\n                                ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:e.localLoading,disabled:e.localLoading},on:{click:e.onCancel}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                                    Cancel\n                                ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"46ff8377",null);t.a=y.exports;l()(y,{VBtn:c.a,VCard:d.a,VCardActions:_.a,VCardText:_.b,VContainer:h.a,VFlex:m.a,VForm:u.a,VIcon:v.a,VLayout:p.a,VRow:f.a,VSpacer:g.a,VTab:b.a,VTabs:k.a,VTextField:w.a})},e445:function(e,t,a){"use strict";var r=a("1dce"),i=a("b5ae"),s=a("2f62"),o=a("2ef0"),n=a("c1df"),l=a.n(n),c=a("f6b6"),d=a("156f");const _=["image/png","image/jpeg"],h=/(.*?)\.(jpg|jpeg|png)$/;var m={mixins:[r.validationMixin],name:"NewLocationModal",props:["thisDriverData"],validations:{firstName:{required:i.required},email:{required:i.required,email:i.email},lastName:{},date_of_birth:{},car_insurance_renewal_date:{},area_ids:{},restaurant_ids:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[e=>!!e||"Please enter your password",e=>e&&e.length>=6||"Password should be at least six symbols long"],driverData:null,readOnly:!1,localLoading:!1,dialog:!1,firstName:"",lastName:"",email:"",date_of_birth:"",car_make:"",car_model:"",car_registration:"",car_insurance_renewal_date:"",car_insurer:"",have_experience:"",experience_description:"",address_1:"",address_2:"",emergency_contact_name:"",emergency_contact_phone:"",bank_name_of_account_holder:"",bank_sort_code:"",bank_account_number:"",phone:"",city:"",postcode:"",password:"",driver_license_front_photo:void 0,driver_license_back_photo:void 0,identity_photo:void 0,photo_src:void 0,new_right_to_work_photos_uid_iterator:-1,right_to_work_photos:[],area_ids:[],restaurant_ids:[],tab_edit_restaurant:void 0,date_of_birth_selected:void 0,date_of_birth_picker:!1,car_insurance_renewal_date_selected:void 0,car_insurance_renewal_date_picker:!1,EXPERIANCE_YES:10,EXPERIANCE_NO:20,driver_license_front_src_photo:void 0,driver_license_back_src_photo:void 0,identity_src_photo:void 0,image_data:void 0,imgRules:[e=>!(e&&e.size>1e7)||"File size should be less than 10 MB!"],response_errors:[]}),watch:{date_of_birth:function(e,t){t!=e&&/\d\d\/\d\d\/\d\d\d\d/.test(e)&&(this.$data.date_of_birth_selected=l()(e,"DD/MM/YYYY").format("YYYY-MM-DD"))},car_insurance_renewal_date:function(e,t){t!=e&&/\d\d\/\d\d\/\d\d\d\d/.test(e)&&(this.$data.car_insurance_renewal_date_selected=l()(e,"DD/MM/YYYY").format("YYYY-MM-DD"))}},computed:{...Object(s.c)(["areas","restaurants"]),imagesBaseUrl(){return this.appConfig.app_url+"/images"},selectAreaErrors(){const e=[];return this.$v.area_ids.$dirty,e},selectRestaurantErrors(){const e=[];return this.$v.restaurant_ids.$dirty,e},firstNameErrors(){const e=[];return this.$v.firstName.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.firstName.required&&e.push("First name is required."),e):e},lastNameErrors(){const e=[];return this.$v.lastName.$dirty,e},emailErrors(){const e=[];if(!this.$v.email.$dirty)return e;!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required");let t=o.get(this.response_errors,"email",[]);return o.each(t,t=>e.push(t)),e},dateOfBirthErrors(){const e=[];return this.$v.date_of_birth.$dirty?(this.$data.date_of_birth&&!l()(this.$data.date_of_birth,"DD/MM/YYYY").isValid()&&e.push("Date invalid format."),e):e},carInsuranceRenewalDateErrors(){const e=[];return this.$v.car_insurance_renewal_date.$dirty?(this.$data.car_insurance_renewal_date&&!l()(this.$data.car_insurance_renewal_date,"DD/MM/YYYY").isValid()&&e.push("Date invalid format."),e):e},areasList(){return this.areas},restaurantsList(){return 0==this.area_ids.length?[]:o.filter(this.restaurants,e=>-1!==this.area_ids.indexOf(+e.area_id)&&e.status==d.a)}},created(){},mounted(){this.driverData=this.thisDriverData,this.id=this.thisDriverData.id,this.firstName=this.thisDriverData.first_name,this.lastName=this.thisDriverData.last_name,this.email=this.thisDriverData.email,l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").isValid()&&(this.date_of_birth=l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_make=this.thisDriverData.car_make,this.car_model=this.thisDriverData.car_model,this.car_registration=this.thisDriverData.car_registration,l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").isValid()&&(this.car_insurance_renewal_date=l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_insurer=this.thisDriverData.car_insurer,this.have_experience=this.thisDriverData.have_experience,this.experience_description=this.thisDriverData.experience_description,this.address_1=this.thisDriverData.address_1,this.address_2=this.thisDriverData.address_2,this.emergency_contact_name=this.thisDriverData.emergency_contact_name,this.emergency_contact_phone=this.thisDriverData.emergency_contact_phone,this.bank_name_of_account_holder=this.thisDriverData.bank_name_of_account_holder,this.bank_sort_code=this.thisDriverData.bank_sort_code,this.bank_account_number=this.thisDriverData.bank_account_number,this.phone=this.thisDriverData.phone,this.city=this.thisDriverData.city,this.postcode=this.thisDriverData.postcode,this.status=this.thisDriverData.status,this.area_ids=o.map(this.thisDriverData.area_ids,e=>+e.area_id),this.restaurant_ids=o.map(this.thisDriverData.restaurant_ids,e=>+e.restaurant_id),this.driver_license_front_photo=this.thisDriverData.driver_license_front_photo,this.driver_license_back_photo=this.thisDriverData.driver_license_back_photo,this.identity_photo=this.thisDriverData.identity_photo,this.photo_src=this.thisDriverData.photo_src,this.right_to_work_photos=this.thisDriverData.right_to_work_photos},methods:{onChangeArea(){let e=o.map(this.restaurantsList,e=>e.id);this.restaurant_ids=o.intersection(e,this.restaurant_ids)},onChangeRestaurant(){let e=o.map(this.restaurantsList,e=>e.id);this.restaurant_ids=o.intersection(e,this.restaurant_ids)},cancel(){this.id=this.thisDriverData.id,this.firstName=this.thisDriverData.first_name,this.lastName=this.thisDriverData.last_name,this.email=this.thisDriverData.email,l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").isValid()&&(this.date_of_birth=l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_make=this.thisDriverData.car_make,this.car_model=this.thisDriverData.car_model,this.car_registration=this.thisDriverData.car_registration,l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").isValid()&&(this.car_insurance_renewal_date=l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_insurer=this.thisDriverData.car_insurer,this.have_experience=this.thisDriverData.have_experience,this.experience_description=this.thisDriverData.experience_description,this.address_1=this.thisDriverData.address_1,this.address_2=this.thisDriverData.address_2,this.emergency_contact_name=this.thisDriverData.emergency_contact_name,this.emergency_contact_phone=this.thisDriverData.emergency_contact_phone,this.bank_name_of_account_holder=this.thisDriverData.bank_name_of_account_holder,this.bank_sort_code=this.thisDriverData.bank_sort_code,this.bank_account_number=this.thisDriverData.bank_account_number,this.phone=this.thisDriverData.phone,this.city=this.thisDriverData.city,this.postcode=this.thisDriverData.postcode,this.status=this.thisDriverData.status,this.driver_license_front_photo=this.thisDriverData.driver_license_front_photo,this.driver_license_back_photo=this.thisDriverData.driver_license_back_photo,this.identity_photo=this.thisDriverData.identity_photo,this.photo_src=this.thisDriverData.photo_src,this.right_to_work_photos=this.thisDriverData.right_to_work_photos,this.area_ids=o.map(this.thisDriverData.area_ids,e=>+e.area_id),this.restaurant_ids=o.map(this.thisDriverData.restaurant_ids,e=>+e.restaurant_id),this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const e={id:this.id,first_name:this.firstName,last_name:this.lastName,email:this.email,address_1:this.address_1,address_2:this.address_2,postcode:this.postcode,city:this.city,phone:this.phone,date_of_birth:this.date_of_birth?l()(this.date_of_birth,"DD/MM/YYYY").format("YYYY-MM-DD"):void 0,emergency_contact_name:this.emergency_contact_name,emergency_contact_phone:this.emergency_contact_phone,car_make:this.car_make,car_model:this.car_model,car_registration:this.car_registration,car_insurance_renewal_date:this.car_insurance_renewal_date?l()(this.car_insurance_renewal_date,"DD/MM/YYYY").format("YYYY-MM-DD"):void 0,car_insurer:this.car_insurer,have_experience:this.have_experience,experience_description:this.experience_description,bank_name_of_account_holder:this.bank_name_of_account_holder,bank_sort_code:this.bank_sort_code,bank_account_number:this.bank_account_number,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids,right_to_work_photos:[]};this.switch_change_password&&(e.password=this.password),this.driver_license_front_src_photo?e.driver_license_front_src_photo=this.driver_license_front_src_photo:e.driver_license_front_photo=this.driver_license_front_photo,this.driver_license_back_src_photo?e.driver_license_back_src_photo=this.driver_license_back_src_photo:e.driver_license_back_photo=this.driver_license_back_photo,this.identity_src_photo?e.identity_src_photo=this.identity_src_photo:e.identity_photo=this.identity_photo,this.image_data?e.image_data=this.image_data:e.photo_src=this.photo_src,o.each(this.right_to_work_photos,t=>{t.file_src?e.right_to_work_photos.push({src_name:t.src_name,file_src:t.file_src}):e.right_to_work_photos.push({id:t.id,src_name:t.src_name,file_name:t.file_name})}),this.$store.dispatch("editDriver",e).then(()=>{this.password="",this.switch_change_password=!1,this.cancel(),this.$emit("driverUpdated","")}).catch(e=>{this.response_errors=e}).finally(()=>{this.localLoading=!1})}},dateOfBirthSelect:function(){this.$data.date_of_birth=l()(this.$data.date_of_birth_selected,"YYYY-MM-DD").format("DD/MM/YYYY"),this.$data.date_of_birth_picker=!1},getDateOfBirthText:function(e){return l()(e,"YYYY-MM-DD").format("DD/MM/YYYY")},carInsuranceRenewalDateSelect:function(){this.$data.car_insurance_renewal_date=l()(this.$data.car_insurance_renewal_date_selected,"YYYY-MM-DD").format("DD/MM/YYYY"),this.$data.car_insurance_renewal_date_picker=!1},getCarInsuranceRenewalDateText:function(e){return l()(e,"YYYY-MM-DD").format("DD/MM/YYYY")},onAddDriverLicenseFrontPhoto(){this.$refs.driver_license_front_photo.click()},onRemoveDriverLicenseFrontPhoto(){this.driver_license_front_photo=void 0,this.driver_license_front_src_photo=void 0},onChangDriverLicenseFrontPhoto(){0!=this.$refs.driver_license_front_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.driver_license_front_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.driver_license_front_photo=t,this.driver_license_front_src_photo=t})}),this.$refs.driver_license_front_photo.value=null)},onAddDriverLicenseBackPhoto(){this.$refs.driver_license_back_photo.click()},onRemoveDriverLicenseBackPhoto(){this.driver_license_back_photo=void 0,this.driver_license_back_src_photo=void 0},onChangDriverLicenseBackPhoto(){0!=this.$refs.driver_license_back_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.driver_license_back_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.driver_license_back_photo=t,this.driver_license_back_src_photo=t})}),this.$refs.driver_license_back_photo.value=null)},onAddIdentityPhoto(){this.$refs.identity_photo.click()},onRemoveIdentityPhoto(){this.identity_photo=void 0,this.identity_src_photo=void 0},onChangIdentityPhoto(){0!=this.$refs.identity_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.identity_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.identity_photo=t,this.identity_src_photo=t})}),this.$refs.identity_photo.value=null)},onAddPhotoSrc(){this.$refs.photo_src.click()},onRemovePhotoSrc(){this.photo_src=void 0,this.image_data=void 0},onChangPhotoSrc(){0!=this.$refs.photo_src.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.photo_src.files,e=>{this.processFilePreview(e,(e,t)=>{this.photo_src=t,this.image_data=t})}),this.$refs.photo_src.value=null)},onAddRightToWorkPhotos(){this.$refs.right_to_work_photo.click()},onRemoveRightToWorkPhoto(e){this.right_to_work_photos.splice(e,1)},onChangRightToWorkPhoto(){0!=this.$refs.right_to_work_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.right_to_work_photo.files,e=>{this.processFilePreview(e,(e,t)=>{this.right_to_work_photos.push({id:this.new_right_to_work_photos_uid_iterator--,src_name:e,file_name:t,file_src:t})})}),this.$refs.right_to_work_photo.value=null)},processFilePreview(e,t){if(!e||"undefined"==typeof FileReader)return;if(!h.test(e.name.toLowerCase())||-1==_.indexOf(e.type))return void this.$store.dispatch("setError",{text:"Unsupported file type",type:"error",code:402});let a=new FileReader;a.onload=function(a){if(-1!==_.indexOf(e.type)||h.test(e.name.toLowerCase())){let r=new Image;r.src=a.target.result,r.onload=function(){r=c.a.compressImage(r,90,1920),t(e.name.toLowerCase(),r.src)}}else t(e.name.toLowerCase(),a.target.result)},a.readAsDataURL(e)},getPhotoPath:function(e){return e&&0===e.indexOf("data:image/")?e:this.imagesBaseUrl+"/"+e}}},u=a("2877"),v=a("6544"),p=a.n(v),f=a("e4e5"),g=a("8336"),b=a("b0af"),k=a("99d9"),w=a("62ad"),y=a("a523"),D=a("2e4b"),x=a("169a"),C=a("4bd4"),$=a("132d"),P=a("adda"),S=a("e449"),Y=a("0fd9"),R=a("b974"),N=a("b73d"),I=a("71a3"),E=a("c671"),V=a("fe57"),A=a("aac8"),T=a("8654"),L=Object(u.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("span",e._g({},r),[e._t("default")],2)]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Driver")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab",[e._v("Main")]),a("v-tab",[e._v("Identity")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"First Name*",hint:"enter first name",required:"","error-messages":e.firstNameErrors},on:{input:function(t){return e.$v.firstName.$touch()},blur:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Last Name",hint:"enter a last name","error-messages":e.lastNameErrors,required:""},on:{input:function(t){return e.$v.lastName.$touch()},blur:function(t){return e.$v.lastName.$touch()}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Driver Email*",required:"","error-messages":e.emailErrors},on:{input:function(t){return e.$v.email.$touch()},blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"max-width":"346px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{"clear-icon":"mdi-close","prepend-icon":"mdi-calendar",clearable:"",outlined:"",label:"Date of birth",hint:"22/11/1990","error-messages":e.dateOfBirthErrors,autocomplete:"off"},on:{input:function(t){return e.$v.date_of_birth.$touch()},blur:function(t){return e.$v.date_of_birth.$touch()}},model:{value:e.date_of_birth,callback:function(t){e.date_of_birth=t},expression:"date_of_birth"}},r))]}}]),model:{value:e.date_of_birth_picker,callback:function(t){e.date_of_birth_picker=t},expression:"date_of_birth_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1","title-date-format":e.getDateOfBirthText},on:{"click:date":e.dateOfBirthSelect},model:{value:e.date_of_birth_selected,callback:function(t){e.date_of_birth_selected=t},expression:"date_of_birth_selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_1","persistent-hint":""},model:{value:e.address_1,callback:function(t){e.address_1=t},expression:"address_1"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_2","persistent-hint":""},model:{value:e.address_2,callback:function(t){e.address_2=t},expression:"address_2"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"City",hint:"Enter city"},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Postcode",hint:"Enter postcode"},model:{value:e.postcode,callback:function(t){e.postcode=t},expression:"postcode"}})],1),a("v-col",{attrs:{cols:"6",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number",type:"Telephone"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact name","persistent-hint":""},model:{value:e.emergency_contact_name,callback:function(t){e.emergency_contact_name=t},expression:"emergency_contact_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact phone","persistent-hint":""},model:{value:e.emergency_contact_phone,callback:function(t){e.emergency_contact_phone=t},expression:"emergency_contact_phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Make","persistent-hint":""},model:{value:e.car_make,callback:function(t){e.car_make=t},expression:"car_make"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Model","persistent-hint":""},model:{value:e.car_model,callback:function(t){e.car_model=t},expression:"car_model"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Registration","persistent-hint":""},model:{value:e.car_registration,callback:function(t){e.car_registration=t},expression:"car_registration"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Insurer","persistent-hint":""},model:{value:e.car_insurer,callback:function(t){e.car_insurer=t},expression:"car_insurer"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"max-width":"346px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{"clear-icon":"mdi-close","prepend-icon":"mdi-calendar",clearable:"",outlined:"",label:"Car Insurance Renewal Date",hint:"22/11/2019","persistent-hint":"","error-messages":e.carInsuranceRenewalDateErrors,autocomplete:"off"},on:{input:function(t){return e.$v.car_insurance_renewal_date.$touch()},blur:function(t){return e.$v.car_insurance_renewal_date.$touch()}},model:{value:e.car_insurance_renewal_date,callback:function(t){e.car_insurance_renewal_date=t},expression:"car_insurance_renewal_date"}},r))]}}]),model:{value:e.car_insurance_renewal_date_picker,callback:function(t){e.car_insurance_renewal_date_picker=t},expression:"car_insurance_renewal_date_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1","title-date-format":e.getCarInsuranceRenewalDateText},on:{"click:date":e.carInsuranceRenewalDateSelect},model:{value:e.car_insurance_renewal_date_selected,callback:function(t){e.car_insurance_renewal_date_selected=t},expression:"car_insurance_renewal_date_selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-switch",{attrs:{"false-value":e.EXPERIANCE_NO,"true-value":e.EXPERIANCE_YES,label:"Have experience"},model:{value:e.have_experience,callback:function(t){e.have_experience=t},expression:"have_experience"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Experience description","persistent-hint":""},model:{value:e.experience_description,callback:function(t){e.experience_description=t},expression:"experience_description"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank Name of Account Holder","persistent-hint":""},model:{value:e.bank_name_of_account_holder,callback:function(t){e.bank_name_of_account_holder=t},expression:"bank_name_of_account_holder"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank sort code","persistent-hint":""},model:{value:e.bank_sort_code,callback:function(t){e.bank_sort_code=t},expression:"bank_sort_code"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank account number","persistent-hint":""},model:{value:e.bank_account_number,callback:function(t){e.bank_account_number=t},expression:"bank_account_number"}})],1),a("v-col",{staticClass:"area-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas Assigned to*",multiple:"",chips:"","deletable-chips":"",hint:"leave blank not to assign driver to any areas","persistent-hint":"",items:e.areasList,"item-text":"name","item-value":"id","error-messages":e.selectAreaErrors},on:{change:e.onChangeArea,blur:function(t){return e.$v.area_ids.$touch()}},model:{value:e.area_ids,callback:function(t){e.area_ids=t},expression:"area_ids"}})],1),a("v-col",{staticClass:"drivers_resturants-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Area's Restaurants Not Assigned to Driver",multiple:"",chips:"","deletable-chips":"",hint:"if leave blank driver to be assigned to all Area's restaurants","persistent-hint":"",items:e.restaurantsList,"item-text":"name","item-value":"id",disabled:0==e.area_ids.length,"error-messages":e.selectRestaurantErrors},on:{change:e.onChangeRestaurant,blur:function(t){return e.$v.restaurant_ids.$touch()}},model:{value:e.restaurant_ids,callback:function(t){e.restaurant_ids=t},expression:"restaurant_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-switch",{attrs:{label:"Change Password"},model:{value:e.switch_change_password,callback:function(t){e.switch_change_password=t},expression:"switch_change_password"}})],1),e.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:e.passwordRules,counter:12},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1)],1),a("v-tab-item",[a("v-row",{staticStyle:{"align-items":"start"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("License Front Photo")]),a("hr"),a("input",{ref:"driver_license_front_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"driver_license_front_photo",id:"driver_license_front_photo",accept:"image/*"},on:{change:e.onChangDriverLicenseFrontPhoto}}),a("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:e.onAddDriverLicenseFrontPhoto}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose License Front Photo\n                            ")],1),a("v-row",[e.driver_license_front_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.driver_license_front_photo),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.driver_license_front_photo)}})],1),e.driver_license_front_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveDriverLicenseFrontPhoto()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                    ")],1):e._e()],1):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("License Back Photo")]),a("hr"),a("input",{ref:"driver_license_back_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"driver_license_back_photo",id:"driver_license_back_photo",accept:"image/*"},on:{change:e.onChangDriverLicenseBackPhoto}}),a("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:e.onAddDriverLicenseBackPhoto}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose License Back Photo\n                            ")],1),a("v-row",[e.driver_license_back_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.driver_license_back_photo),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.driver_license_back_photo)}})],1),e.driver_license_back_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveDriverLicenseBackPhoto()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                    ")],1):e._e()],1):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("Identity Photo")]),a("hr"),a("input",{ref:"identity_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"identity_photo",id:"identity_photo",accept:"image/*"},on:{change:e.onChangIdentityPhoto}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:e.onAddIdentityPhoto}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose Identity Photo\n                            ")],1),a("v-row",[e.identity_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.identity_photo),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.identity_photo)}})],1),e.identity_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveIdentityPhoto()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                    ")],1):e._e()],1):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[e._v("Profile Photo")]),a("hr"),a("input",{ref:"photo_src",staticStyle:{display:"none"},attrs:{type:"file",name:"photo_src",id:"photo_src",accept:"image/*"},on:{change:e.onChangPhotoSrc}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:e.onAddPhotoSrc}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-attachment")]),e._v("Choose Profile Photo\n                            ")],1),a("v-row",[e.photo_src?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:e.getPhotoPath(e.photo_src),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(e.photo_src)}})],1),e.photo_src?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemovePhotoSrc()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                    ")],1):e._e()],1):e._e()],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("input",{ref:"right_to_work_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"right_to_work_photo",id:"right_to_work_photo",accept:"image/*",multiple:""},on:{change:e.onChangRightToWorkPhoto}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:e.onAddRightToWorkPhotos}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Right To Work Photos\n                                    ")],1)]},proxy:!0}])},[a("b",[e._v("Right to work photos")])]),a("v-row",e._l(e.right_to_work_photos,(function(t,r){return a("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"3"}},[a("a",{attrs:{href:e.getPhotoPath(t.file_name),target:"_blank"}},[a("v-img",{attrs:{src:e.getPhotoPath(t.file_name)}})],1),t.file_name?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveRightToWorkPhoto(r)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Photo\n                                    ")],1):e._e()],1)})),1)],1)],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||e.localLoading,loading:e.localLoading},on:{click:e.submit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check-box-outline")]),e._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:e.localLoading},on:{click:e.cancel}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"e1bb5c16",null);t.a=L.exports;p()(L,{VBanner:f.a,VBtn:g.a,VCard:b.a,VCardText:k.b,VCardTitle:k.c,VCol:w.a,VContainer:y.a,VDatePicker:D.a,VDialog:x.a,VForm:C.a,VIcon:$.a,VImg:P.a,VMenu:S.a,VRow:Y.a,VSelect:R.a,VSwitch:N.a,VTab:I.a,VTabItem:E.a,VTabs:V.a,VTabsItems:A.a,VTextField:T.a})}}]);