(window.webpackJsonp=window.webpackJsonp||[]).push([["app~82d9bdfe"],{3392:function(t,e,a){"use strict";var s=a("2f62"),i=a("1dce"),o=a("b5ae"),r=a("2ef0");var l={mixins:[i.validationMixin],name:"SendPushMessage",validations:{title:{required:o.required,maxLength:Object(o.maxLength)(55)},body:{required:o.required,maxLength:Object(o.maxLength)(255)}},data:()=>({dialog:!1,localLoading:!1,area_ids:[],restaurant_ids:[],driver_ids:[],notifyStatusList:[{id:10,name:"Active only"},{id:20,name:"Inactive only"}],notify_status:void 0,title:"",body:""}),computed:{...Object(s.c)({area_list:"areas",restaurant_list:"restaurants",driver_list:"drivers"}),titleErrors(){const t=[];return this.$v.title.$dirty?(!this.$v.title.maxLength&&t.push("Title must be at most 55 characters long"),!this.$v.title.required&&t.push("Title is required."),t):t},bodyErrors(){const t=[];return this.$v.body.$dirty?(!this.$v.body.maxLength&&t.push("Body must be at most 255 characters long"),!this.$v.body.required&&t.push("Body is required."),t):t},areasList(){return this.area_list},restaurantsListSearched(){return 0==this.area_ids.length?[]:r.filter(this.restaurant_list,t=>-1!==this.area_ids.indexOf(+t.area_id))},driverListSearched(){return r.filter(this.driver_list,t=>{if(0==t.area_ids.length)return!0;let e=r.map(t.area_ids,t=>t.area_id);if(this.area_ids.length>0&&0==r.intersection(e,this.area_ids).length)return!1;if(0==t.restaurant_ids.length)return!0;let a=r.map(t.restaurant_ids,t=>t.restaurant_id);return!(this.restaurant_ids.length>0&&0==r.intersection(a,this.restaurant_ids).length)&&(!this.notify_status||this.notify_status==t.status)})}},created(){},mounted(){Promise.all([this.$store.dispatch("fetchLocations"),this.$store.dispatch("fetchDrivers")]).then(()=>{})},methods:{onChangeArea(){let t=r.map(this.restaurantsListSearched,t=>t.id);this.restaurant_ids=r.intersection(t,this.restaurant_ids)},onChangeRestaurant(){},onChangeDriver(){},cancel(){this.dialog=!1},submit(){if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){const t={title:this.title,body:this.body,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids,notify_status:this.notify_status,driver_ids:this.driver_ids};this.$store.dispatch("messageDriver",t).then(()=>{this.dialog=!1}).catch(t=>{let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},n=a("2877"),d=a("6544"),c=a.n(d),h=a("c6a6"),u=a("8336"),m=a("b0af"),_=a("99d9"),v=a("62ad"),p=a("a523"),f=a("169a"),g=a("4bd4"),b=a("132d"),y=a("0fd9"),$=a("b974"),k=a("8654"),x=a("a844"),C=Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("span",t._g({staticClass:"pointer"},s),[t._t("default")],2)]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Push message")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Title*",hint:"enter title",required:"","error-messages":t.titleErrors},on:{input:function(e){return t.$v.title.$touch()},blur:function(e){return t.$v.title.$touch()}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",sm:"12"}},[a("v-textarea",{attrs:{outlined:"",label:"Body*","error-messages":t.bodyErrors},on:{input:function(e){return t.$v.body.$touch()},blur:function(e){return t.$v.body.$touch()}},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas to Message",multiple:"",chips:"","deletable-chips":"",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.areasList,"item-text":"name","item-value":"id"},on:{change:t.onChangeArea},model:{value:t.area_ids,callback:function(e){t.area_ids=e},expression:"area_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-autocomplete",{attrs:{outlined:"",label:"Restaurants to Message",multiple:"","clear-icon":"mdi-close",clearable:"",chips:"","deletable-chips":"",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.restaurantsListSearched,"item-text":"name","item-value":"id"},model:{value:t.restaurant_ids,callback:function(e){t.restaurant_ids=e},expression:"restaurant_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"","clear-icon":"mdi-close",clearable:"",label:"Notify Active/Inactive Drivers",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.notifyStatusList,"item-text":"name","item-value":"id"},model:{value:t.notify_status,callback:function(e){t.notify_status=e},expression:"notify_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-autocomplete",{attrs:{outlined:"",label:"Drivers to Message",multiple:"","clear-icon":"mdi-close",clearable:"",chips:"","deletable-chips":"",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.driverListSearched,"item-text":"full_name","item-value":"id"},model:{value:t.driver_ids,callback:function(e){t.driver_ids=e},expression:"driver_ids"}})],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cellphone-message")]),t._v("\n              Send Message(s)\n            ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n              Cancel\n            ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"f32fa384",null),D=C.exports;c()(C,{VAutocomplete:h.a,VBtn:u.a,VCard:m.a,VCardText:_.b,VCardTitle:_.c,VCol:v.a,VContainer:p.a,VDialog:f.a,VForm:g.a,VIcon:b.a,VRow:y.a,VSelect:$.a,VTextField:k.a,VTextarea:x.a});var V={name:"Options",components:{"send-push-message":D},data:()=>({localLoading:!1}),mounted(){this.$store.dispatch("fetchOptions")},created(){},computed:{...Object(s.c)(["options"]),optionsSearched(){return this.options}},methods:{}},w=a("0e8f"),L=a("1f4f"),S=a("2fa4"),M=Object(n.a)(V,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Options")]),a("v-spacer",{staticClass:"line"}),a("send-push-message",[a("v-btn",{attrs:{small:"",color:"primary",tile:"",depressed:""}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cellphone-message")]),t._v("\n                        Send Push Message\n                    ")],1)],1),a("hr")],1)],1),0!==t.optionsSearched.length?a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Key ")]),a("th",{staticClass:"text-left"},[t._v("Value")]),a("th",{staticClass:"text-left"},[t._v("Description")]),a("th",{staticClass:"text-left"})])]),a("tbody",t._l(t.optionsSearched,(function(e){return a("tr",{key:e.id},[a("td",[a("span",{staticClass:"option-name"},[t._v(t._s(e.okey))])]),a("td",[a("span",{staticClass:"option-name"},[t._v(t._s(e.ovalue))])]),a("td",[t._v("\n                        -\n                    ")]),a("td",["map_center_default"==e.okey?a("span",[a("edit-option-map-modal",{attrs:{thisOptionData:e}})],1):a("span",[a("edit-option-modal",{attrs:{thisOptionData:e}})],1)])])})),0)]):t._e()],1)])}),[],!1,null,"577dc65d",null);e.a=M.exports;c()(M,{VBtn:u.a,VContainer:p.a,VFlex:w.a,VIcon:b.a,VRow:y.a,VSimpleTable:L.a,VSpacer:S.a})},"438c":function(t,e,a){"use strict";var s=a("c1df"),i=a.n(s),o=a("2b0e"),r=a("2ef0"),l=a("2f62"),n=a("1168");var d={name:"Reporting",data:()=>({interval_list:[{id:n.b,name:"Day",$isDisabled:!0},{id:n.e,name:"Week"},{id:n.d,name:"2-Week"},{id:n.c,name:"Month"}],report_list:[{id:"shifts_cancelled",name:"Shift Cancelled/Bonus Added"},{id:"extra_request",name:"Extra Request"},{id:"shifts_charge_removed",name:"Charge Removed"},{id:"shifts_inactive_fee",name:"Drivers Inactive with Cancellation Fee"}],states:{extra_request:"shift_extra_request_list",shifts_cancelled:"shift_cancelled_list",shifts_charge_removed:"shift_charge_removed_list",shifts_inactive_fee:"shift_inactive_fee_list"},localLoading:!0,report_selected:null,date_range_selected:null,period_date_selected:null,menu_date_picker:!1,interval_selected_id:n.e}),computed:{...Object(l.c)({restaurant_list:"restaurants",driver_list:"drivers",shift_extra_request_list:"extra_request",shift_cancelled_list:"shifts_cancelled",shift_charge_removed_list:"shifts_charge_removed",shift_inactive_fee_list:"shifts_inactive_fee"}),...Object(l.c)("user",{users:"users"}),reportsSearched(){if(this.localLoading)return[];let t=[];if(void 0!==this.$data.report_selected&&(t=this.states[this.$data.report_selected]),t=r.orderBy(this[t],t=>t.period_date),["extra_request","shifts_charge_removed","shifts_inactive_fee"].includes(this.$data.report_selected))return t;let e=this.$store.state.timesheets.timesheetforReports||[],a=[],s=0,i=0,o=0,l=0;return t.forEach(t=>{const r=e.find(e=>e.modified_shift_id===t.shift_id);if(r){if(l===r.modified_shift_id)return;let e=parseFloat(t.cost)-parseFloat(r.cost_extra_bonus);s+=parseFloat(r.cost_extra_bonus),l=r.modified_shift_id,t.cost<0&&(e=-1*(r.cost_extra_bonus-Math.abs(t.cost))),o+=e,a.push({type:"shift",...r,amount_difference:e,amount_paid:parseFloat(r.cost_extra_bonus)})}let n=-1*parseFloat(t.cost),d="amount_paid";t.cost<0?(i+=-1*parseFloat(t.cost),d="cost_cover"):(s+=parseFloat(t.cost),n=parseFloat(t.cost)),o=i-s,a.push({type:"timesheet",...t,[d]:n})}),a.length>0&&(a=r.orderBy(a,t=>t.period_date),a.push({type:"total",cost_cover:i.toFixed(2),amount_difference:o.toFixed(2),amount_paid:s.toFixed(2),label:"Total",isTotalRow:!0,emptyLine:"-"})),a}},watch:{period_date:function(t){this.$data.period_date_selected!=t&&(this.$data.period_date_selected=t)},report_selected(t,e){t!==e&&0==this[this.states[this.$data.report_selected]].length&&this.fetchData()}},mounted(){Promise.all([this.$store.dispatch("user/fetchUsers"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchRestaurants")]);let t=i()();this.$data.date_range_selected=[t.startOf("isoWeek").format("YYYY-MM-DD"),null],this.$data.report_selected=this.report_list[0].id,this.dateRangeSelect(),this.fetchData()},methods:{dateRangeSelect:async function(){this.$data.date_range_selected=this.dayToRange(this.$data.date_range_selected[0],this.$data.interval_selected_id),this.fetchData()},fetchData:function(){switch(this.localLoading=!0,this.$data.report_selected){case"shifts_cancelled":0==this.shift_cancelled_list.length&&Promise.all([this.$store.dispatch("fetchShiftCancelled",{period_date_from:this.$data.date_range_selected[0],period_date_to:this.$data.date_range_selected[1]}),this.$store.dispatch("fetchTimesheets",{period_date_from:this.$data.date_range_selected[0],period_date_to:this.$data.date_range_selected[1],for_reports:1})]).then(()=>{this.localLoading=!1}).catch(t=>{console.error("Error fetching data:",t),this.isLoading=!1});break;case"extra_request":0==this.shift_extra_request_list.length&&Promise.all([this.$store.dispatch("fetchShiftsExtraRequest",{period_date_from:this.$data.date_range_selected[0],period_date_to:this.$data.date_range_selected[1],extra_request:"1"})]).then(()=>{this.localLoading=!1}).catch(t=>{console.error("Error fetching data:",t),this.isLoading=!1});break;case"shifts_charge_removed":0==this.shift_charge_removed_list.length&&Promise.all([this.$store.dispatch("fetchShiftsChargeRemoved",{period_date_from:this.$data.date_range_selected[0],period_date_to:this.$data.date_range_selected[1],extra_request:"1"})]).then(()=>{this.localLoading=!1}).catch(t=>{console.error("Error fetching data:",t),this.isLoading=!1});break;case"shifts_inactive_fee":0==this.shift_inactive_fee_list.length&&Promise.all([this.$store.dispatch("fetchShiftsInactiveFee",{period_date_from:this.$data.date_range_selected[0],period_date_to:this.$data.date_range_selected[1],extra_request:"1"})]).then(()=>{this.localLoading=!1}).catch(t=>{console.error("Error fetching data:",t),this.isLoading=!1})}},clearStates(t){this.$store.commit("clearStates",{params:t})},onSelectInterval:function(){if(this.$data.interval_selected_id==n.e||this.$data.interval_selected_id==n.d||this.$data.interval_selected_id==n.c){let t=i()(this.$data.date_range_selected[0],"YYYY-MM-DD");this.$data.date_range_selected=[t.startOf("isoWeek").format("YYYY-MM-DD"),null]}if(this.$data.interval_selected_id==n.b){let t=i()();this.$data.date_range_selected=[t.format("YYYY-MM-DD"),null]}this.clearStates(this.report_list),o.a.nextTick(()=>{this.dateRangeSelect()})},onPreviosRange:function(){let t=i()(this.$data.date_range_selected[0],"YYYY-MM-DD");switch(this.$data.interval_selected_id){case n.b:t.subtract(1,"day");break;case n.e:t.subtract(1,"weeks");break;case n.d:t.subtract(2,"weeks");break;case n.c:t.subtract(1,"months")}this.clearStates(this.report_list),this.$data.date_range_selected=[t.format("YYYY-MM-DD"),null],this.dateRangeSelect()},onNextRange:function(){let t=i()(this.$data.date_range_selected[0],"YYYY-MM-DD");switch(this.$data.interval_selected_id){case n.b:t.add(1,"days");break;case n.e:t.add(1,"weeks");break;case n.d:t.add(2,"weeks");break;case n.c:t.add(1,"months")}this.clearStates(this.report_list),this.$data.date_range_selected=[t.format("YYYY-MM-DD"),null],this.dateRangeSelect()},dayToRange:function(t,e){return n.a.dayToRange(t,e)},dateRangeText:function(t){return n.a.dateRangeText(t)},getPeriodDateText:function(t){return i()(t,"YYYY-MM-DD").format("DD/MM/YYYY")},getRestaurantNameByID:function(t){let e=r.find(this.restaurant_list,e=>+t==+e.id);return e?e.name:"-"},getDriverByID:function(t){let e=r.find(this.driver_list,e=>+t==+e.id);return e?e.first_name+" "+e.last_name:"-"},getShiftHours:function(t){if(!t||!t.start_time||!t.finish_time)return"-";const e=i()(t.start_time,"HH:mm:ss",!0),a=i()(t.finish_time,"HH:mm:ss",!0);return e.isValid()&&a.isValid()?e.format("HH:mm")+"-"+a.format("HH:mm"):"-"},getDateFormat:function(t,e){return i()(t,e).format("DD/MM/YY")},creator(t){let e=r.find(this.users,e=>e.id==t);return e?e.first_name+" "+e.last_name:"-"}}},c=(a("8c92"),a("2877")),h=a("6544"),u=a.n(h),m=a("40dc"),_=a("c6a6"),v=a("8336"),p=a("b0af"),f=a("62ad"),g=a("2e4b"),b=a("ce7e"),y=a("132d"),$=a("e449"),k=a("0fd9"),x=a("b974"),C=Object(c.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-card",{staticStyle:{"margin-bottom":"6px"},attrs:{color:"grey lighten-4",flat:"",tile:""}},[a("v-app-bar",{staticStyle:{"margin-top":"70px"},attrs:{dense:"",fixed:"",color:"elevation-1"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex pa-0"},[a("v-autocomplete",{staticStyle:{"max-width":"340px"},attrs:{label:"All Reports",items:t.report_list,"item-text":"name","item-value":"id",dense:"",solo:"",clearable:"","hide-details":""},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}}]),model:{value:t.report_selected,callback:function(e){t.report_selected=e},expression:"report_selected"}}),a("div",{staticStyle:{"margin-left":"16px"}},[a("v-btn",{on:{click:t.onPreviosRange}},[a("v-icon",[t._v("mdi-menu-left")])],1),a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({},s),[t._v("\n                    "+t._s(t.dateRangeText(t.date_range_selected))+"\n                  ")])]}}]),model:{value:t.menu_date_picker,callback:function(e){t.menu_date_picker=e},expression:"menu_date_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1",range:"","title-date-format":t.dateRangeText},model:{value:t.date_range_selected,callback:function(e){t.date_range_selected=e},expression:"date_range_selected"}}),a("v-divider")],1)],1),a("v-btn",{on:{click:t.onNextRange}},[a("v-icon",[t._v("mdi-menu-right")])],1)],1),a("v-select",{staticStyle:{"max-width":"150px","margin-left":"16px"},attrs:{items:t.interval_list,"item-text":"name","item-value":"id",dense:"",solo:"","hide-details":""},on:{change:t.onSelectInterval},model:{value:t.interval_selected_id,callback:function(e){t.interval_selected_id=e},expression:"interval_selected_id"}})],1)],1)],1)],1),a("div",{staticClass:"d-flex mb-auto",attrs:{flat:"",tile:""}},[a("v-card",{staticClass:"panel-invoices",attrs:{color:"elevation-0"}},[a("v-card",{staticClass:"time-sheet-table",staticStyle:{"margin-bottom":"3px"},attrs:{color:"elevation-1",width:"100%",tile:""}},[a("v-card",{staticClass:"time-sheet-table__header",staticStyle:{"margin-bottom":"10px","font-weight":"bold"},attrs:{color:"elevation-1",tile:""}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Date")]),a("v-col",{staticClass:"padding-decrease",attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Driver")]),a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Amount Charged")]),a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Amount Paid")]),a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Difference")]),a("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[t._v("Restaurant")]),a("v-col",{attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Shift Time")]),a("v-col",{attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Created Date")]),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t._v("Comment")]),a("v-col",{staticClass:"padding-decrease",attrs:{cols:"12",sm:"6",md:"1"}},[t._v("Creator")])],1)],1),t._l(t.reportsSearched,(function(e){return a("v-card",{key:e.id||e.label,staticClass:"time-sheet-table__line",class:{"negative-difference":e.amount_difference<0,"positive-difference":e.amount_difference>0,"zero-difference":0==e.amount_difference,"total-row":e.isTotalRow},staticStyle:{"margin-bottom":"1px"},attrs:{color:"elevation-1","no-gutters":"",tile:""}},[a("v-row",{attrs:{align:"stretch"}},[a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(e.label||t.getDateFormat(e.period_date,"YYYY-MM-DD HH:mm:ss")))]),a("v-col",{staticClass:"padding-decrease",attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(t.getDriverByID(e.driver_id)))]),a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(e.cost_cover))]),a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(e.amount_paid))]),a("v-col",{staticClass:"custom-width",attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(e.amount_difference))]),a("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[t._v(t._s(t.getRestaurantNameByID(e.restaurant_id)))]),a("v-col",{attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(e.emptyLine||t.getShiftHours(e.model?e.model:e)))]),a("v-col",{attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(e.emptyLine||t.getDateFormat(e.updated_at,"YYYY-MM-DD HH:mm:ss")))]),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t._v(t._s(e.emptyLine||e.comment_cancelled))]),a("v-col",{staticClass:"padding-decrease",attrs:{cols:"12",sm:"6",md:"1"}},[t._v(t._s(t.creator(e.moderator_id||e.model&&e.model.moderator_id||"")))])],1)],1)}))],2)],1)],1)],1)],1)}),[],!1,null,"20e24c9c",null);e.a=C.exports;u()(C,{VAppBar:m.a,VAutocomplete:_.a,VBtn:v.a,VCard:p.a,VCol:f.a,VDatePicker:g.a,VDivider:b.a,VIcon:y.a,VMenu:$.a,VRow:k.a,VSelect:x.a})},6196:function(t,e,a){},7628:function(t,e,a){"use strict";var s=a("1dce"),i=a("b5ae"),o=a("755e"),r=a("2ef0"),l=a("bc3a"),n=a.n(l);const d={lat:51.4,lng:0};var c={mixins:[s.validationMixin],name:"EditOptionModal",props:["thisOptionData"],validations:{okey:{required:i.required},ovalue:{required:i.required}},data:()=>({optionData:null,localLoading:!1,dialog:!1,okey:"",ovalue:"",address:"",map_latitude:void 0,map_longitude:void 0,is_initialized:!1,map_center:d,map_zoom:12,map_marker:void 0,gmap_results:[],gmap_loading:!1}),computed:{okeyErrors(){const t=[];return this.$v.okey.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.okey.required&&t.push("First name is required."),t):t},ovalueErrors(){const t=[];return this.$v.ovalue.$dirty?(!this.$v.ovalue.required&&t.push("Last Name is required."),t):t},google:o.gmapApi},updated(){if(this.is_initialized)return;let t=this,e=setInterval(()=>{t.google&&t.$refs.mapRef&&(clearInterval(e),t.$data.is_initialized=!0,t.onUpgradeMapMarker())},10)},mounted(){this.optionData=this.thisOptionData,this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue;let t=JSON.parse(this.ovalue);this.map_latitude=t.lat,this.map_longitude=t.lng,this.map_center={lat:this.map_latitude,lng:this.map_longitude},this.map_zoom=t.map_zoom},methods:{cancel(){this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue,this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const t={okey:this.okey,ovalue:this.ovalue};this.switch_change_password&&(t.password=this.password),this.$store.dispatch("editOption",t).then(()=>{this.dialog=!1,this.$emit("optionUpdated","")}).catch(t=>{this.email="";let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}},refreshValue(){this.ovalue=JSON.stringify({lat:this.map_latitude,lng:this.map_longitude,map_zoom:this.map_zoom})},onAddressChanged(){if(!this.$data.address)return;this.gmap_loading=!0;let t=encodeURI(this.$data.address.split(" ").join("+"));n.a.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${this.appConfig.GOOGLE_MAP_API_KEY}&language=en`).then(t=>{this.gmap_loading=!1,this.$data.gmap_results=t.data&&t.data.results})},onSelectAddress(t){this.address=t.formatted_address;let e=r.find(t.address_components,t=>-1!==t.types.indexOf("postal_code"));e&&(this.postcode=e.short_name),this.map_latitude=r.get(t,"geometry.location.lat",void 0),this.map_longitude=r.get(t,"geometry.location.lng",void 0),this.map_latitude&&this.map_longitude&&this.onUpgradeMapMarker()},onUpgradeMapMarker(){let t=this;t.$data.map_marker=void 0,t.map_latitude&&t.map_longitude&&(t.$refs.mapRef.$mapPromise.then(e=>{t.$data.map_marker=new t.google.maps.LatLng(t.map_latitude,t.map_longitude);var a=new t.google.maps.LatLngBounds;a.extend(t.$data.map_marker),e.setCenter(a.getCenter()),e.setZoom(this.map_zoom)}),this.refreshValue())},onChangeMarkerPosition(t){this.map_latitude||this.map_longitude?(this.map_latitude=void 0,this.map_longitude=void 0):(this.map_latitude=t.latLng.lat(),this.map_longitude=t.latLng.lng()),this.onUpgradeMapMarker()},onChangeZoom(t){this.map_zoom=t,this.refreshValue()}}},h=a("2877"),u=a("6544"),m=a.n(u),_=a("8336"),v=a("b0af"),p=a("99d9"),f=a("62ad"),g=a("a523"),b=a("169a"),y=a("4bd4"),$=a("132d"),k=a("da13"),x=a("5d23"),C=a("1baa"),D=a("34c3"),V=a("0fd9"),w=a("8654"),L=Object(h.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{"x-small":"",icon:"",color:"grey lighten-1"},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},s),[a("v-icon",{staticStyle:{"font-size":"20px"}},[t._v("mdi-pencil")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit option")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Key*",hint:"enter key",required:"",disabled:"","error-messages":t.okeyErrors},on:{input:function(e){return t.$v.okey.$touch()},blur:function(e){return t.$v.okey.$touch()}},model:{value:t.okey,callback:function(e){t.okey=e},expression:"okey"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Value*",hint:"enter value","error-messages":t.ovalueErrors,required:"",disabled:""},on:{input:function(e){return t.$v.ovalue.$touch()},blur:function(e){return t.$v.ovalue.$touch()}},model:{value:t.ovalue,callback:function(e){t.ovalue=e},expression:"ovalue"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify","clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address",hint:"type something to search","persistent-hint":""},on:{change:function(e){return t.onAddressChanged()}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[0!=t.gmap_results.length?a("h2",[t._v("Seach results:")]):t._e(),t.gmap_loading?a("h3",[t._v("Seaching address...")]):t._e(),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.gmap_results,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.onSelectAddress(e)}}},[a("v-list-item-icon",{staticClass:"driver-profile_icon"},[a("v-icon",[t._v("mdi-map-marker")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.formatted_address)}})],1)],1)})),1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"220px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:t.map_center,zoom:t.map_zoom,"map-type-id":"terrain"},on:{click:t.onChangeMarkerPosition,zoom_changed:t.onChangeZoom}},[t.map_marker?a("GmapMarker",{attrs:{position:t.map_marker}}):t._e()],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"519f88b5",null);e.a=L.exports;m()(L,{VBtn:_.a,VCard:v.a,VCardText:p.b,VCardTitle:p.c,VCol:f.a,VContainer:g.a,VDialog:b.a,VForm:y.a,VIcon:$.a,VListItem:k.a,VListItemContent:x.a,VListItemGroup:C.a,VListItemIcon:D.a,VListItemTitle:x.c,VRow:V.a,VTextField:w.a})},"8c92":function(t,e,a){"use strict";a("6196")},a9c3:function(t,e,a){"use strict";var s=a("1dce"),i=a("b5ae"),o={mixins:[s.validationMixin],name:"EditOptionModal",props:["thisOptionData"],validations:{okey:{required:i.required},ovalue:{required:i.required}},data:()=>({optionData:null,localLoading:!1,dialog:!1,okey:"",ovalue:""}),computed:{okeyErrors(){const t=[];return this.$v.okey.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.okey.required&&t.push("First name is required."),t):t},ovalueErrors(){const t=[];return this.$v.ovalue.$dirty?(!this.$v.ovalue.required&&t.push("Last Name is required."),t):t}},created(){},mounted(){this.optionData=this.thisOptionData,this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue},methods:{cancel(){this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue,this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const t={okey:this.okey,ovalue:this.ovalue};this.switch_change_password&&(t.password=this.password),this.$store.dispatch("editOption",t).then(()=>{this.dialog=!1,this.$emit("optionUpdated","")}).catch(t=>{this.email="";let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},r=a("2877"),l=a("6544"),n=a.n(l),d=a("8336"),c=a("b0af"),h=a("99d9"),u=a("62ad"),m=a("a523"),_=a("169a"),v=a("4bd4"),p=a("132d"),f=a("0fd9"),g=a("8654"),b=Object(r.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{"x-small":"",icon:"",color:"grey lighten-1"},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},s),[a("v-icon",{staticStyle:{"font-size":"20px"}},[t._v("mdi-pencil")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit option")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Key*",hint:"enter key",required:"",disabled:"","error-messages":t.okeyErrors},on:{input:function(e){return t.$v.okey.$touch()},blur:function(e){return t.$v.okey.$touch()}},model:{value:t.okey,callback:function(e){t.okey=e},expression:"okey"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Value*",hint:"enter value","error-messages":t.ovalueErrors,required:""},on:{input:function(e){return t.$v.ovalue.$touch()},blur:function(e){return t.$v.ovalue.$touch()}},model:{value:t.ovalue,callback:function(e){t.ovalue=e},expression:"ovalue"}})],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"34c4136f",null);e.a=b.exports;n()(b,{VBtn:d.a,VCard:c.a,VCardText:h.b,VCardTitle:h.c,VCol:u.a,VContainer:m.a,VDialog:_.a,VForm:v.a,VIcon:p.a,VRow:f.a,VTextField:g.a})}}]);