(window.webpackJsonp=window.webpackJsonp||[]).push([["app~e73b60ec"],{"272e":function(t,e,a){"use strict";a("3315")},"28c7":function(t,e,a){"use strict";var r=a("1dce"),i=a("2f62"),s=a("2ef0"),o=a("c1df"),n=a.n(o);var l={mixins:[r.validationMixin],name:"EditWorkingTimeModal",props:["thisDriverData"],validations:{},data:()=>({driverData:null,readOnly:!1,localLoading:!1,dialog:!1,tab_edit_working_time:void 0,default_working_times:[],working_period_errors_start_at:{},working_period_errors_stop_at:{},default_working_times_is_valid:!0,item_terator_uid:-1,override_working_time:[],current_day_override_working_periods:[],current_day_wp_errors_start_at:[],current_day_wp_errors_stop_at:[],events:[],calendar_value:"",override_working_times_is_valid:!0,IS_HOLIDAY:10,IS_REGULAR_DAY:20}),watch:{default_working_times:{deep:!0,handler(){this.default_working_times_is_valid=!0;for(let t=0;t<7;t++){this.working_period_errors_start_at[t]={},this.working_period_errors_stop_at[t]={};for(let e=0;e<this.default_working_times[t].working_periods.length;e++){this.working_period_errors_start_at[t][e]=[],this.working_period_errors_stop_at[t][e]=[],this.default_working_times[t].working_periods[e].start_at||(this.working_period_errors_start_at[t][e].push(this.getDayName(t)+" 'Start at' required"),this.default_working_times_is_valid=!1),this.default_working_times[t].working_periods[e].stop_at||(this.working_period_errors_stop_at[t][e].push(this.getDayName(t)+" 'Stop at' required"),this.default_working_times_is_valid=!1);for(let a=0;a<this.default_working_times[t].working_periods.length;a++)e!=a&&(this.default_working_times[t].working_periods[e].start_at>=this.default_working_times[t].working_periods[a].start_at&&this.default_working_times[t].working_periods[e].start_at<=this.default_working_times[t].working_periods[a].stop_at&&(this.working_period_errors_start_at[t][e].push(this.getDayName(t)+" 'Start at' has intersection with other period"),this.default_working_times_is_valid=!1),this.default_working_times[t].working_periods[e].stop_at>=this.default_working_times[t].working_periods[a].start_at&&this.default_working_times[t].working_periods[e].stop_at<=this.default_working_times[t].working_periods[a].stop_at&&(this.working_period_errors_stop_at[t][e].push(this.getDayName(t)+" 'Stop at' has intersection with other period"),this.default_working_times_is_valid=!1));this.default_working_times[t].working_periods[e].stop_at<=this.default_working_times[t].working_periods[e].start_at&&(this.working_period_errors_stop_at[t][e].push(this.getDayName(t)+" 'Start at' can't be greater then 'Stop at'"),this.default_working_times_is_valid=!1)}}}},current_day_override_working_periods:{deep:!0,handler(){this.override_working_times_is_valid=!0,this.current_day_wp_errors_start_at=[],this.current_day_wp_errors_stop_at=[];for(let t=0;t<this.current_day_override_working_periods.length;t++){this.current_day_wp_errors_start_at[t]=[],this.current_day_wp_errors_stop_at[t]=[],this.current_day_override_working_periods[t].start_at||(this.current_day_wp_errors_start_at[t].push(this.getDayNameByDate(this.calendar_value)+" 'Start at' required"),this.override_working_times_is_valid=!1),this.current_day_override_working_periods[t].stop_at||(this.current_day_wp_errors_stop_at[t].push(this.getDayNameByDate(this.calendar_value)+" 'Stop at' required"),this.override_working_times_is_valid=!1);for(let e=0;e<this.current_day_override_working_periods.length;e++)t!=e&&(this.current_day_override_working_periods[t].start_at>=this.current_day_override_working_periods[e].start_at&&this.current_day_override_working_periods[t].start_at<=this.current_day_override_working_periods[e].stop_at&&(this.current_day_wp_errors_start_at[t].push(this.getDayNameByDate(this.calendar_value)+" 'Start at' has intersection with other period"),this.override_working_times_is_valid=!1),this.current_day_override_working_periods[t].stop_at>=this.current_day_override_working_periods[e].start_at&&this.current_day_override_working_periods[t].stop_at<=this.current_day_override_working_periods[e].stop_at&&(this.current_day_wp_errors_stop_at[t].push(this.getDayNameByDate(this.calendar_value)+" 'Stop at' has intersection with other period"),this.override_working_times_is_valid=!1));this.current_day_override_working_periods[t].stop_at<=this.current_day_override_working_periods[t].start_at&&(this.current_day_wp_errors_stop_at[t].push(this.getDayNameByDate(this.calendar_value)+" 'Start at' can't be greater then 'Stop at'"),this.override_working_times_is_valid=!1)}}}},computed:{...Object(i.c)({timeList:"timeList"}),isDateExpired(){return this.calendar_value<n()().format("YYYY-MM-DD")},isCurrentDayOverrideHoliday(){return!!s.find(this.current_day_override_working_periods,t=>10==t.holiday)}},mounted(){this.driverData=this.thisDriverData,this.calendar_value=n()().format("YYYY-MM-DD");let t=[],e=s.map(this.thisDriverData.default_working_time,t=>{let e=s.clone(t);return e.start_at=n()(e.start_at,"HH:mm").format("HH:mm"),e.stop_at=n()(e.stop_at,"HH:mm").format("HH:mm"),e});for(let a=0;a<7;a++){let r=s.filter(e,t=>t.week_day==a);t.push({weekday_index:a,weekday_name:this.getDayName(a),working_periods:r})}this.default_working_times=t,this.override_working_time=s.map(this.thisDriverData.actual_override_working_time,t=>{let e=s.clone(t);return e.start_at=n()(e.start_at,"HH:mm").format("HH:mm"),e.stop_at=n()(e.stop_at,"HH:mm").format("HH:mm"),e}),this.getEvents()},methods:{cancel(){let t=[],e=s.map(this.thisDriverData.default_working_time,t=>{let e=s.clone(t);return e.start_at=n()(e.start_at,"HH:mm").format("HH:mm"),e.stop_at=n()(e.stop_at,"HH:mm").format("HH:mm"),e});for(let a=0;a<7;a++){let r=s.filter(e,t=>t.week_day==a);t.push({weekday_index:a,weekday_name:this.getDayName(a),working_periods:r})}this.default_working_times=t,this.override_working_time=s.map(this.thisDriverData.actual_override_working_time,t=>{let e=s.clone(t);return e.start_at=n()(e.start_at,"HH:mm").format("HH:mm"),e.stop_at=n()(e.stop_at,"HH:mm").format("HH:mm"),e}),this.getEvents(),this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid&&this.default_working_times_is_valid&&this.override_working_times_is_valid){let t=[],e=[];s.each(this.default_working_times,e=>{let a=s.map(e.working_periods,t=>({week_day:t.week_day,holiday:t.holiday,start_at:t.start_at,stop_at:t.stop_at}));t=s.concat(t,a)}),e=s.map(this.override_working_time,t=>({period_date:t.period_date,holiday:t.holiday,start_at:t.start_at,stop_at:t.stop_at}));let a={driver_id:this.driverData.id,default_working_times:t,override_working_time:e};this.$store.dispatch("editWorkingTimes",a).then(()=>{this.dialog=!1,this.password="",this.switch_change_password=!1,this.$emit("driverUpdated","")}).catch(t=>{this.email="";let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}},onAddWorkingPeriod(t){this.default_working_times[t].working_periods.push({week_day:t,holiday:20,start_at:void 0,stop_at:void 0})},onRemoveWorkingPeriod(t,e){this.default_working_times[t].working_periods.splice(e,1)},onChangeHoliday(t,e){this.default_working_times[t].working_periods[e].start_at=s.first(this.timeList).value,this.default_working_times[t].working_periods[e].stop_at=s.last(this.timeList).value,this.default_working_times[t].working_periods=[this.default_working_times[t].working_periods[e]]},isCurrentDayHasHoliday(t){return!!s.find(this.default_working_times[t].working_periods,t=>10==t.holiday)},onAddOverrideWorkingTime(){this.current_day_wp_errors_start_at[this.calendar_value]=[],this.current_day_wp_errors_stop_at[this.calendar_value]=[];let t={id:--this.item_terator_uid,period_date:this.calendar_value,holiday:20,start_at:void 0,stop_at:void 0};this.override_working_time.push(t),this.getEvents()},onRemoveOverrideWorkingPeriod(t){let e=s.findIndex(this.override_working_time,e=>e.id==this.current_day_override_working_periods[t].id);this.override_working_time.splice(e,1),this.getEvents()},onChangeOverrideHoliday(t){let e=s.clone(this.current_day_override_working_periods[t]);e.start_at=s.first(this.timeList).value,e.stop_at=s.last(this.timeList).value;for(let t=0;t<this.current_day_override_working_periods.length;t++)this.override_working_time=s.filter(this.override_working_time,t=>t.period_date!=e.period_date);this.override_working_time.push(e),this.getEvents()},onClickDate(){this.calendar_value=n()().format("YYYY-MM-DD")},getEvents(){this.current_day_override_working_periods=s.filter(this.override_working_time,t=>t.period_date==this.calendar_value);let t=s.groupBy(this.override_working_time,t=>t.period_date);this.events=s.map(t,t=>{let e=s.first(t);return 10==e.holiday?{name:"Holiday",color:"green",start:e.period_date,end:e.period_date,timed:!1}:{name:"Custom schedulle",color:"blue",start:e.period_date,end:e.period_date,timed:!1}})},getEventColor:t=>t.color,getDayName:t=>n()().isoWeekday(t+1).format("dddd"),getDayNameByDate:t=>n()(t,"YYYY-MM-DD").format("dddd")},filters:{headerDate:function(t){return n()(t,"YYYY-MM-DD").format("DD/MM/YYYY")},weekdayDate:function(t){return n()(t,"YYYY-MM-DD").format("dddd")}}},c=a("2877"),d=a("6544"),_=a.n(d),h=a("c6a6"),v=a("e4e5"),m=a("8336"),u=a("a4f6"),p=a("b0af"),f=a("99d9"),g=a("62ad"),k=a("169a"),b=a("4bd4"),w=a("132d"),y=a("da13"),D=a("5d23"),x=a("0fd9"),C=a("8dd9"),S=a("b73d"),I=a("71a3"),P=a("c671"),Y=a("fe57"),R=a("aac8"),T=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-list-item",{on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-list-item-title",[t._v("Set Unavailability")])],1),a("v-dialog",{attrs:{width:"fit-content","max-width":"850px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Driver's Unavailability")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-form",{ref:"form"},[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:t.tab_edit_working_time,callback:function(e){t.tab_edit_working_time=e},expression:"tab_edit_working_time"}},[a("v-tab",[t._v("Unavailability")]),a("v-tab",[t._v("Leave")])],1),a("v-tabs-items",{model:{value:t.tab_edit_working_time,callback:function(e){t.tab_edit_working_time=e},expression:"tab_edit_working_time"}},[a("v-tab-item",[a("v-row",t._l(t.default_working_times,(function(e){return a("v-col",{key:e.weekday_index,attrs:{cols:"12",sm:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("v-btn",{attrs:{color:"primary",text:"",disabled:t.isCurrentDayHasHoliday(e.weekday_index)},on:{click:function(a){return t.onAddWorkingPeriod(e.weekday_index)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Unavailability\n                      ")],1)]},proxy:!0}],null,!0)},[t._v("\n                    "+t._s(e.weekday_name)+"\n                    ")]),t._l(e.working_periods,(function(r,i){return a("v-row",{key:r.id},[t.isCurrentDayHasHoliday(e.weekday_index)?t._e():a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 08:00",required:"",items:t.timeList,"item-text":"name","item-value":"value",disabled:t.isCurrentDayHasHoliday(e.weekday_index),"error-messages":t.working_period_errors_start_at[e.weekday_index][i],dense:""},model:{value:r.start_at,callback:function(e){t.$set(r,"start_at",e)},expression:"working_period.start_at"}})],1),t.isCurrentDayHasHoliday(e.weekday_index)?t._e():a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 20:00",required:"",items:t.timeList,"item-text":"name","item-value":"value",disabled:t.isCurrentDayHasHoliday(e.weekday_index),"error-messages":t.working_period_errors_stop_at[e.weekday_index][i],dense:""},model:{value:r.stop_at,callback:function(e){t.$set(r,"stop_at",e)},expression:"working_period.stop_at"}})],1),t.isCurrentDayHasHoliday(e.weekday_index)?a("v-col",{attrs:{cols:"12",md:"8"}},[t._v("\n                      Unavailable – All Day\n                    ")]):t._e(),a("v-col",{staticClass:"align-self-start",attrs:{cols:"12",md:"2"}},[a("v-switch",{staticClass:"mt-1",attrs:{"false-value":t.IS_REGULAR_DAY,"true-value":t.IS_HOLIDAY,label:"Holiday","hide-details":""},on:{change:function(a){return t.onChangeHoliday(e.weekday_index,i)}},model:{value:r.holiday,callback:function(e){t.$set(r,"holiday",e)},expression:"working_period.holiday"}})],1),a("v-col",{staticClass:"align-self-start pt-2",attrs:{cols:"12",md:"2"}},[a("v-btn",{staticClass:"float-right",attrs:{color:"error"},on:{click:function(a){return t.onRemoveWorkingPeriod(e.weekday_index,i)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove\n                      ")],1)],1)],1)})),e.working_periods.length?t._e():a("v-row",[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12",md:"12"}},[t._v("\n                      Available\n                    ")])],1)],2)})),1)],1),a("v-tab-item",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-sheet",{staticClass:"d-flex justify-space-between"},[a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.$refs.calendar.prev()}}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ma-2",attrs:{text:""},on:{click:function(e){return t.onClickDate()}}},[t._v(t._s(t._f("headerDate")(t.calendar_value)))]),a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.$refs.calendar.next()}}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-sheet",{attrs:{height:"350"}},[a("v-calendar",{ref:"calendar",attrs:{weekdays:[1,2,3,4,5,6,0],type:"month",events:t.events,"event-color":t.getEventColor},on:{change:t.getEvents,"click:date":t.getEvents},model:{value:t.calendar_value,callback:function(e){t.calendar_value=e},expression:"calendar_value"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("v-btn",{attrs:{color:"primary",disabled:t.isDateExpired||t.isCurrentDayOverrideHoliday,text:""},on:{click:function(e){return t.onAddOverrideWorkingTime()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Unavailability\n                      ")],1)]},proxy:!0}])},[t._v("\n                    "+t._s(t._f("weekdayDate")(t.calendar_value))+", "+t._s(t._f("headerDate")(t.calendar_value))+"\n                    ")]),t._l(t.current_day_override_working_periods,(function(e,r){return a("v-row",{key:r},[e.holiday!=t.IS_HOLIDAY?a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 08:00",required:"",items:t.timeList,"item-text":"name","item-value":"value",disabled:e.holiday==t.IS_HOLIDAY,"error-messages":t.current_day_wp_errors_start_at[r],dense:""},model:{value:e.start_at,callback:function(a){t.$set(e,"start_at",a)},expression:"working_period.start_at"}})],1):t._e(),e.holiday!=t.IS_HOLIDAY?a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",hint:"Example: 20:00",required:"",items:t.timeList,"item-text":"name","item-value":"value",disabled:e.holiday==t.IS_HOLIDAY,"error-messages":t.current_day_wp_errors_stop_at[r],dense:""},model:{value:e.stop_at,callback:function(a){t.$set(e,"stop_at",a)},expression:"working_period.stop_at"}})],1):t._e(),e.holiday==t.IS_HOLIDAY?a("v-col",{attrs:{cols:"12",md:"8"}},[t._v("\n                      Unavailable – All Day\n                    ")]):t._e(),a("v-col",{staticClass:"align-self-start",attrs:{cols:"12",md:"2"}},[a("v-switch",{staticClass:"mt-1",attrs:{"false-value":t.IS_REGULAR_DAY,"true-value":t.IS_HOLIDAY,label:"Holiday","hide-details":""},on:{change:function(e){return t.onChangeOverrideHoliday(r)}},model:{value:e.holiday,callback:function(a){t.$set(e,"holiday",a)},expression:"working_period.holiday"}})],1),a("v-col",{staticClass:"align-self-start pt-2",attrs:{cols:"12",md:"2"}},[a("v-btn",{staticClass:"float-right",attrs:{color:"error"},on:{click:function(e){return t.onRemoveOverrideWorkingPeriod(r)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove\n                      ")],1)],1)],1)})),t.current_day_override_working_periods.length?t._e():a("v-row",[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12",md:"12"}},[t._v("\n                      By Unavailability \n                    ")])],1)],2)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                Accept Changes\n              ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                Cancel\n              ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"725a0a44",null);e.a=T.exports;_()(T,{VAutocomplete:h.a,VBanner:v.a,VBtn:m.a,VCalendar:u.a,VCard:p.a,VCardText:f.b,VCardTitle:f.c,VCol:g.a,VDialog:k.a,VForm:b.a,VIcon:w.a,VListItem:y.a,VListItemTitle:D.c,VRow:x.a,VSheet:C.a,VSwitch:S.a,VTab:I.a,VTabItem:P.a,VTabs:Y.a,VTabsItems:R.a})},3315:function(t,e,a){},4278:function(t,e,a){"use strict";var r=a("2f62"),i=a("2ef0"),s=a("c1df"),o=a.n(s),n=a("28c7");var l={name:"ListDriverName",components:{"edit-working-time-modal":n.a},data:()=>({green:"#0ab90a",orange:"#dc7319d1",indigo:"#3F51B5",DRIVER_STATUS_ACTIVE:10,DRIVER_STATUS_INACTIVE:20,DRIVER_STATUS_REGISTRED:30,ACTIVITY_STATUS_ONLINE:10,ACTIVITY_STATUS_DISCONNECTED:20,PROGRESSING_NOT_PROGRESSING:10,PROGRESSING_PROCESSING:20,localLoading:!1,REGISTRATION_STEP_FINISH:40,filter_search:void 0,filter_status:10,driver_status_list:[{id:30,type:"root",name:"All"},{id:120,type:"subgroup",name:"Completed"},{id:130,type:"subgroup",name:"Incomplete"},{id:140,type:"subgroup",name:"Not Progressing"},{id:150,type:"subgroup",name:"Progressing"},{id:10,type:"root",name:"Show only active"},{id:20,type:"root",name:"Show only inactive"}],page:1,per_page:15,per_page_list:[10,15,50,100,1e3]}),mounted(){Promise.all([this.$store.dispatch("fetchAreas"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchRestaurants")]).then(()=>{if("/drivers/:first_name"==i.get(this.$router.currentRoute,"matched[0].path")){let t=i.find(this.drivers,t=>t.id==i.get(this.$router.currentRoute,"params.first_name"));t&&(this.filter_search=t.email,this.filter_status=void 0,this.$nextTick(()=>{this.$refs.optionsMenu[0].$el.click(),this.$nextTick(()=>{this.$refs.editDriverItem[0].$el.click()})})),this.$router.replace("/drivers")}})},created(){},computed:{...Object(r.c)({drivers:"allDrivers",areas:"areas"}),driversSearched(){let t=this.drivers;switch(t=i.map(t,t=>(t.filledDataCount=this.getFilledDataCount(t),t.filledDataCount>=95?t.filledDataColor="green--text":t.filledDataCount>=80?t.filledDataColor="blue-grey--text":t.filledDataCount>=50?t.filledDataColor="blue--text":t.filledDataCount>=40?t.filledDataColor="deep-orange--text":t.filledDataCount>=30?t.filledDataColor="red--text darken-4":t.filledDataColor="pink--text darken-4",t)),this.filter_search&&(t=i.filter(t,t=>-1!==t.full_name.toLowerCase().indexOf(this.filter_search)||-1!==t.email.toLowerCase().indexOf(this.filter_search))),this.filter_status){case 30:case 10:case 20:t=i.filter(t,t=>t.status==this.filter_status);break;case 120:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>t.filledDataCount>=70);break;case 130:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>t.filledDataCount<70);break;case 140:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>10==t.not_progressing);break;case 150:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>20==t.not_progressing)}return t},driverList(){return this.drivers},driversSearchedPaged(){let t=this.per_page*(this.page-1),e=t+this.per_page;return this.driversSearched.slice(t,e)},total_pages(){return Math.ceil(this.driversSearched.length/this.per_page)}},methods:{inactiveItem(t,e){this.localLoading=!0,this.$store.dispatch("setDriverStatus",{status:t,driver_id:e}).then(()=>{}).finally(()=>{this.localLoading=!1})},notProgressingItem(t,e){this.localLoading=!0,this.$store.dispatch("setDriverProgressing",{not_progressing:t,driver_id:e}).then(()=>{}).finally(()=>{this.localLoading=!1})},editedDriver(){},getArealabelById(t){if(!t||0==t.length)return"-";let e=[];for(let a=0;a<t.length;a++){let r=i.find(this.areas,e=>+e.id==+t[a].area_id);r&&e.push(r.name)}return e.join(", ")},onChangePage(t){this.page=t},getFilledDataCount(t){let e=["first_name","last_name","email","address_1","address_2","postcode","city","phone","date_of_birth","emergency_contact_name","emergency_contact_phone","car_make","car_model","car_registration","car_insurance_renewal_date","car_insurer","bank_name_of_account_holder","bank_sort_code","bank_account_number","driver_license_front_photo","driver_license_back_photo","identity_photo","right_to_work_photos","area_ids"];return(i.reduce(e,(e,a)=>i.isEmpty(t[a])?e:e+1,0)/e.length*100).toFixed(0)},onCangePerPage(){this.page=1},onStatusfilter(){this.page=1}},filters:{activityTime:function(t){return t?o.a.utc(t,"YYYY-MM-DD HH:mm:ss").local().fromNow():"never"},registrationFinishTime:function(t){return t?o.a.utc(t,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"):"-"}}},c=(a("272e"),a("2877")),d=a("6544"),_=a.n(d),h=a("c6a6"),v=a("8336"),m=a("a609"),u=a("cc20"),p=a("62ad"),f=a("a523"),g=a("0e8f"),k=a("132d"),b=a("8860"),w=a("da13"),y=a("5d23"),D=a("e449"),x=a("891e"),C=a("0fd9"),S=a("b974"),I=a("1f4f"),P=a("2fa4"),Y=a("8654"),R=a("3a2f"),T=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Drivers")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[0!==t.areas.length?a("span",[a("v-btn",t._g({staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:""}},r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Driver\n                        ")],1)],1):a("span",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:"","aria-disabled":"true"}},r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Driver\n                                ")],1)]}}],null,!0)},[a("span",[t._v("At first please add area")])])],1)]}}])},[a("v-list",[a("new-driver-modal"),a("new-driver-half-board-modal")],1)],1)],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}}),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{items:t.driver_status_list,"item-text":"name","item-value":"id",label:"All statuses",solo:"",clearable:"","hide-details":""},on:{change:t.onStatusfilter},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}},{key:"item",fn:function(e){return["root"==e.item.type?[a("div",{staticClass:"select-drop-item-rootgroup"},[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]:[a("div",{staticClass:"select-drop-item-subgroup"},[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]]}}]),model:{value:t.filter_status,callback:function(e){t.filter_status=e},expression:"filter_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-text-field",{attrs:{solo:"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search Drivers",clearable:""},model:{value:t.filter_search,callback:function(e){t.filter_search=e},expression:"filter_search"}})],1)],1),0===t.driversSearchedPaged.length?a("span",{staticClass:"pl-2"},[t._v("No drivers found")]):t._e(),0!==t.driversSearchedPaged.length?a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-left"},[t._v("Areas")]),a("th",{staticClass:"text-left"},[t._v("Data Full")]),a("th",{staticClass:"text-left"},[t._v("Status")]),a("th",{staticClass:"text-left"},[t._v("Activation Date")]),a("th",{staticClass:"text-left"},[t._v("Activity")]),a("th",{staticClass:"text-left"})])]),a("tbody",t._l(t.driversSearchedPaged,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"person-name-td"},[a("span",{staticClass:"person-name"},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])]),a("td",{staticClass:"person-area-td"},[a("span",{staticClass:"person-area"},[t._v(t._s(t.getArealabelById(e.area_ids)))])]),a("td",{staticClass:"person-area-td"},[a("span",{class:e.filledDataColor},[t._v(t._s(e.filledDataCount)+"%")])]),a("td",[e.status==t.DRIVER_STATUS_ACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:t.green}},r),[t._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[t._v("Activated, "+t._s(t._f("activityTime")(e.activated_at)))])])],1):t._e(),e.status==t.DRIVER_STATUS_INACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:t.orange}},r),[t._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[t._v("Inactive Driver")])])],1):t._e(),e.status==t.DRIVER_STATUS_REGISTRED?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:t.indigo}},r),[t._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[t._v("Applicant Driver")])])],1):t._e()]),a("td",[e.status==t.DRIVER_STATUS_ACTIVE?a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on;return[a("span",t._g({},i),[t._v("\n                                    "+t._s(t._f("registrationFinishTime")(e.activated_at))+"\n                                ")])]}}],null,!0)},[a("span",[t._v("Activated at")])]):t._e()],1),a("td",[e.activity_status==t.ACTIVITY_STATUS_ONLINE?a("span",[a("v-chip",{staticClass:"ma-2",attrs:{color:"green","text-color":"white","x-small":""}},[t._v("\n                                online\n                            ")])],1):t._e(),e.activity_status==t.ACTIVITY_STATUS_DISCONNECTED?a("span",[t._v("\n                            was online: "+t._s(t._f("activityTime")(e.activity_time))+"\n                        ")]):t._e(),e.push_token?a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:"blue"}},r),[t._v("mdi-cloud-lock-outline")])]}}],null,!0)},[a("span",[t._v("Firebase token obtained")])]):t._e()],1),a("td",[a("v-btn-toggle",{staticClass:"float-right primary"},[a("view-driver-modal",{attrs:{thisDriverData:e}}),[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({ref:"optionsMenu",refInFor:!0,staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:"",loading:t.localLoading}},r),[t._v("options"),a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",[e.status==t.DRIVER_STATUS_ACTIVE?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.inactiveItem(t.DRIVER_STATUS_INACTIVE,e.id)}}},[t._v("Mark as Inactive")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.inactiveItem(t.DRIVER_STATUS_ACTIVE,e.id)}}},[t._v("Mark as Active")])],1),a("v-list-item",[e.not_progressing==t.PROGRESSING_PROCESSING?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.notProgressingItem(t.PROGRESSING_NOT_PROGRESSING,e.id)}}},[t._v("Mark as Not Progressing")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.notProgressingItem(t.PROGRESSING_PROCESSING,e.id)}}},[t._v("Restore Progressing")])],1),a("edit-driver-modal",{attrs:{thisDriverData:e},on:{driverUpdated:t.editedDriver}},[a("v-list-item",{ref:"editDriverItem",refInFor:!0,staticClass:"pointer"},[a("v-list-item-title",[t._v("Edit Driver")])],1)],1),a("edit-working-time-modal",{attrs:{thisDriverData:e},on:{driverUpdated:t.editedDriver}})],1)],1)],1)]],2)],1)])})),0)]):t._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[a("v-flex",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-2",staticStyle:{"min-width":"75px"}},[t._v("\n                        Per page:\n                    ")]),a("v-select",{attrs:{items:t.per_page_list,label:"Solo field",solo:"",dense:"","hide-details":""},on:{change:t.onCangePerPage},model:{value:t.per_page,callback:function(e){t.per_page=e},expression:"per_page"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-pagination",{attrs:{value:t.page,length:t.total_pages,"total-visible":10},on:{input:t.onChangePage}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[t._v("\n                "+t._s((t.page-1)*t.per_page+1)+" - "+t._s(t.page*t.per_page<t.driversSearched.length?t.page*t.per_page:t.driversSearched.length)+" of "+t._s(t.driversSearched.length)+"\n            ")])],1)],1)])}),[],!1,null,"5dcbb42a",null);e.a=T.exports;_()(T,{VAutocomplete:h.a,VBtn:v.a,VBtnToggle:m.a,VChip:u.a,VCol:p.a,VContainer:f.a,VFlex:g.a,VIcon:k.a,VList:b.a,VListItem:w.a,VListItemTitle:y.c,VMenu:D.a,VPagination:x.a,VRow:C.a,VSelect:S.a,VSimpleTable:I.a,VSpacer:P.a,VTextField:Y.a,VTooltip:R.a})},4700:function(t,e,a){"use strict";a("54b7")},"54b7":function(t,e,a){},6724:function(t,e,a){"use strict";var r=a("2b0e"),i=a("2f62"),s=a("2ef0"),o={name:"Home",data:()=>({user_role:void 0,thisRestaurantData:void 0,restaurants_list:[],is_mobile_version:!1}),created(){let t=!1;var e;e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),this.is_mobile_version=t},computed:{...Object(i.c)(["user","isUserLoggedIn","loading"]),restaurantsSearched(){return this.restaurants_list}},mounted:function(){this.loadData()},methods:{loadData(){if(localStorage.getItem("user")){let t=JSON.parse(localStorage.getItem("user"));this.user_role=t.role;let e=[];s.each(t.restaurants,a=>{e.push({id:a.id,area_id:a.area_id,name:a.name,address:a.address,contactName:a.contact_name,telephone:a.telephone,map_latitude:a.map_latitude,map_longitude:a.map_longitude,meal:a.meal,uniform:a.uniform,cash_orders:a.cash_orders,waiting_location:a.waiting_location,other:a.other,bonus_target:a.bonus_target,logo_src:a.logo_src,email:t.email})}),this.restaurants_list=[],r.a.nextTick(()=>{this.restaurants_list=e})}}}},n=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),_=a("62ad"),h=a("a523"),v=a("0e8f"),m=a("0fd9"),u=a("1f4f"),p=a("2fa4"),f=Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Home")]),a("v-spacer",{staticClass:"line"}),a("hr")],1)],1),a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("First Name")]),a("th",{staticClass:"text-left"},[t._v("Last Name")]),a("th",{staticClass:"text-left"},[t._v("Email Address")])])]),a("tbody",[a("tr",[a("td",[t._v(t._s(t.user.firstName))]),a("td",[t._v(t._s(t.user.lastName))]),a("td",[t._v(t._s(t.user.email))])])])])],1),"restaurant"==t.user_role?a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Restaurants")]),a("v-spacer",{staticClass:"line"})],1)],1),0===t.restaurantsSearched.length?a("span",[t._v("No restaurants found")]):t._e(),t.is_mobile_version?t._e():a("div",{staticClass:"restaurants-table"},[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Restaurant Name")]),a("th",{staticClass:"text-left"},[t._v("Location Address")]),a("th",{staticClass:"text-right"},[t._v("Actions")])])]),a("tbody",t._l(t.restaurantsSearched,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[a("restaurant-address-modal",{attrs:{thisRestaurantId:e.id}})],1),a("td",[a("edit-restaurant-profile-modal",{attrs:{thisRestaurantData:e},on:{updated:t.loadData}})],1)])})),0)])],1),t.is_mobile_version?a("div",t._l(t.restaurantsSearched,(function(e){return a("v-card",{key:e.id,staticClass:"time-sheet-table__line",staticStyle:{"margin-bottom":"2px"},attrs:{color:"elevation-1","no-gutters":"",tile:""}},[a("v-row",[a("v-col",[t._v(t._s(e.name))])],1),a("v-row",[a("v-col",[a("restaurant-address-modal",{attrs:{thisRestaurantId:e.id}})],1)],1),a("v-row",[a("v-col",[a("edit-restaurant-profile-modal",{attrs:{thisRestaurantData:e},on:{updated:t.loadData}})],1)],1)],1)})),1):t._e()],1):t._e()])}),[],!1,null,"a10e17d0",null);e.a=f.exports;c()(f,{VCard:d.a,VCol:_.a,VContainer:h.a,VFlex:v.a,VRow:m.a,VSimpleTable:u.a,VSpacer:p.a})},"735b":function(t,e,a){"use strict";var r=a("bc3a"),i=a.n(r),s={name:"Registration",data(){return{showPassword:!1,showConfirmPassword:!1,email:"",password:"",confirmPassword:"",firstName:"",lastName:"",valid:!1,localLoading:!1,nameRules:[t=>!!t||"Please enter your name"],lastNameRules:[t=>!!t||"Please enter your last name"],emailRules:[t=>!!t||"Please enter your e-mail",t=>/.+@.+/.test(t)||"Must be valid e-mail"],passwordRules:[t=>!!t||"Please enter password",t=>t&&t.length>=6||"Min 6 symbols"],confirmPasswordRules:[t=>!!t||"Please confirm your password",t=>t===this.password||"Passwords do not match"]}},created(){this.$route.query.loginError&&this.$store.dispatch("setError","Please log in to access this page"),localStorage.getItem("user")&&this.$router.push("/newsfeed")},methods:{onCancel(){this.email="",this.password="",this.confirmPassword="",this.firstName="",this.lastName=""},onSubmit(){if(this.$refs.form.validate()){this.localLoading=!0;const t={firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password};console.log(this.appConfig.app_url+"/api/register"),console.log(""+this.appConfig.app_url),i.a.post(this.appConfig.app_url+"/api/register",t).then(t=>{let e=t.data.user;return this.$store.dispatch("registerUser",e),{id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,restaurantsWorksFor:[],access_token:t.data.access_token}}).then(t=>(this.$store.commit("setUser",t),localStorage.setItem("user",JSON.stringify(t)),"/newsfeed")).then(t=>{this.$router.push(t)}).catch(t=>{let e=t.response.data.error;this.$store.dispatch("setError",e[Object.keys(e)[0]][0]),this.password="",this.confirmPassword=""}).finally(()=>{this.localLoading=!1})}}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("8336"),d=a("b0af"),_=a("99d9"),h=a("a523"),v=a("0e8f"),m=a("4bd4"),u=a("132d"),p=a("a722"),f=a("0fd9"),g=a("2fa4"),k=a("8654"),b=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Registration")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("span",{staticClass:"auth-type-question"},[t._v("Already registered?")]),a("v-btn",{attrs:{depressed:"",color:"primary",to:"/login"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-account")]),t._v("\n                Log In\n            ")],1)],1)],1),a("v-card",[a("v-container",[a("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-text",[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"First Name",label:"First Name",type:"text",rules:t.nameRules},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"Last Name",label:"Last Name",type:"text",rules:t.lastNameRules},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"email",label:"Email",type:"email",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:t.passwordRules,counter:12},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{"append-icon":t.showConfirmPassword?"mdi-eye":"mdi-eye-off",type:t.showConfirmPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"confirm-password",label:"Confirm Password",rules:t.confirmPasswordRules,counter:12},on:{"click:append":function(e){t.showConfirmPassword=!t.showConfirmPassword}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{depressed:"",loading:t.localLoading,disabled:!t.valid||t.localLoading},on:{click:t.onSubmit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check")]),t._v("\n                                Register\n                            ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading,disabled:t.localLoading},on:{click:t.onCancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                                Cancel\n                            ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"547f2bae",null);e.a=b.exports;l()(b,{VBtn:c.a,VCard:d.a,VCardActions:_.a,VCardText:_.b,VContainer:h.a,VFlex:v.a,VForm:m.a,VIcon:u.a,VLayout:p.a,VRow:f.a,VSpacer:g.a,VTextField:k.a})},"741c":function(t,e,a){"use strict";var r=a("2f62"),i=a("2ef0"),s=a("c1df"),o=a.n(s),n=a("28c7");var l={name:"Drivers",components:{"edit-working-time-modal":n.a},data:()=>({green:"#0ab90a",orange:"#dc7319d1",indigo:"#3F51B5",DRIVER_STATUS_ACTIVE:10,DRIVER_STATUS_INACTIVE:20,DRIVER_STATUS_REGISTRED:30,ACTIVITY_STATUS_ONLINE:10,ACTIVITY_STATUS_DISCONNECTED:20,PROGRESSING_NOT_PROGRESSING:10,PROGRESSING_PROCESSING:20,localLoading:!1,REGISTRATION_STEP_FINISH:40,filter_search:void 0,filter_status:10,driver_status_list:[{id:30,type:"root",name:"All"},{id:120,type:"subgroup",name:"Completed"},{id:130,type:"subgroup",name:"Incomplete"},{id:140,type:"subgroup",name:"Not Progressing"},{id:150,type:"subgroup",name:"Progressing"},{id:10,type:"root",name:"Show only active"},{id:20,type:"root",name:"Show only inactive"}],filter_search:"",filter_area:null,page:1,per_page:15,per_page_list:[10,15,50,100,1e3],sortKey:"area_ids",sortOrder:1}),mounted(){Promise.all([this.$store.dispatch("fetchAreas"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchRestaurants")]).then(()=>{if("/drivers/:id"==i.get(this.$router.currentRoute,"matched[0].path")){let t=i.find(this.drivers,t=>t.id==i.get(this.$router.currentRoute,"params.id"));t&&(this.filter_search=t.email,this.filter_status=void 0,this.$nextTick(()=>{this.$refs.optionsMenu[0].$el.click(),this.$nextTick(()=>{this.$refs.editDriverItem[0].$el.click()})})),this.$router.replace("/drivers")}})},created(){},computed:{...Object(r.c)({drivers:"allDrivers",areas:"areas"}),driversSearched(){let t=this.drivers;t=i.map(t,t=>(t.filledDataCount=this.getFilledDataCount(t),t.filledDataCount>=95?t.filledDataColor="green--text":t.filledDataCount>=80?t.filledDataColor="blue-grey--text":t.filledDataCount>=50?t.filledDataColor="blue--text":t.filledDataCount>=40?t.filledDataColor="deep-orange--text":t.filledDataCount>=30?t.filledDataColor="red--text darken-4":t.filledDataColor="pink--text darken-4",t)),this.filter_search&&(t=i.filter(t,t=>-1!==t.full_name.toLowerCase().indexOf(this.filter_search)||-1!==t.email.toLowerCase().indexOf(this.filter_search)));const e=t=>this.filter_area?t.filter(t=>Array.isArray(t.area_ids)&&t.area_ids.some(t=>t.area_id===this.filter_area)):t;switch(this.filter_status){case 10:t=i.filter(t,t=>t.status==this.filter_status),t=e(t);break;case 30:case 20:if(t=i.filter(t,t=>t.status==this.filter_status),0===t.length){let t=this.filter_status;this.$store.dispatch("fetchDrivers",t)}t=e(t);break;case 120:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>t.filledDataCount>=70),t=e(t);break;case 130:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>t.filledDataCount<70),t=e(t);break;case 140:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>10==t.not_progressing),t=e(t);break;case 150:t=i.filter(t,t=>30==t.status),t=i.filter(t,t=>20==t.not_progressing),t=e(t);break;default:t=e(t)}return t},driverList(){return this.drivers},driversSearchedPaged(){let t=this.per_page*(this.page-1),e=t+this.per_page;return this.driversSearched.slice(t,e).sort((t,e)=>{let a=0,r="",i="";return t[this.sortKey]&&t[this.sortKey][0]&&t[this.sortKey][0].area_id&&(r=t[this.sortKey][0].area_id),e[this.sortKey]&&e[this.sortKey][0]&&e[this.sortKey][0].area_id&&(i=e[this.sortKey][0].area_id),r>r?a=1:i<r&&(a=-1),a*this.sortOrder})},total_pages(){return Math.ceil(this.driversSearched.length/this.per_page)},sortedDrivers(){return this.driversSearchedPaged.sort((t,e)=>{const a=t[this.sortKey]?t[this.sortKey].toString().toLowerCase():"",r=e[this.sortKey]?e[this.sortKey].toString().toLowerCase():"";return a<r?1===this.sortOrder?-1:1:a>r?1===this.sortOrder?1:-1:0})}},methods:{onAreaChange(){this.page=1},inactiveItem(t,e){this.localLoading=!0,this.$store.dispatch("setDriverStatus",{status:t,driver_id:e}).then(()=>{}).finally(()=>{this.localLoading=!1})},notProgressingItem(t,e){this.localLoading=!0,this.$store.dispatch("setDriverProgressing",{not_progressing:t,driver_id:e}).then(()=>{}).finally(()=>{this.localLoading=!1})},editedDriver(){},getArealabelById(t){if(!t||0==t.length)return"-";let e=[];for(let a=0;a<t.length;a++){let r=i.find(this.areas,e=>+e.id==+t[a].area_id);r&&e.push(r.name)}return e.join(", ")},onChangePage(t){this.page=t},getFilledDataCount(t){let e=["first_name","last_name","email","address_1","address_2","postcode","city","phone","date_of_birth","emergency_contact_name","emergency_contact_phone","car_make","car_model","car_registration","car_insurance_renewal_date","car_insurer","bank_name_of_account_holder","bank_sort_code","bank_account_number","driver_license_front_photo","driver_license_back_photo","identity_photo","right_to_work_photos","area_ids"];return(i.reduce(e,(e,a)=>i.isEmpty(t[a])?e:e+1,0)/e.length*100).toFixed(0)},onCangePerPage(){this.page=1},onStatusfilter(){this.page=1},sortBy(t){this.sortKey===t?this.sortOrder=-this.sortOrder:(this.sortKey=t,this.sortOrder=1)},sortByName(t){this.sortKey===t?this.sortOrder=1===this.sortOrder?-1:1:(this.sortKey=t,this.sortOrder=1)}},filters:{activityTime:function(t){return t?o.a.utc(t,"YYYY-MM-DD HH:mm:ss").local().fromNow():"never"},registrationFinishTime:function(t){return t?o.a.utc(t,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"):"-"}}},c=(a("4700"),a("2877")),d=a("6544"),_=a.n(d),h=a("c6a6"),v=a("8336"),m=a("a609"),u=a("cc20"),p=a("62ad"),f=a("a523"),g=a("0e8f"),k=a("132d"),b=a("8860"),w=a("da13"),y=a("5d23"),D=a("e449"),x=a("891e"),C=a("0fd9"),S=a("b974"),I=a("1f4f"),P=a("2fa4"),Y=a("8654"),R=a("3a2f"),T=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Drivers")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[0!==t.areas.length?a("span",[a("v-btn",t._g({staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:""}},r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Driver\n                          ")],1)],1):a("span",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:"","aria-disabled":"true"}},r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Driver\n                                  ")],1)]}}],null,!0)},[a("span",[t._v("At first please add area")])])],1)]}}])},[a("v-list",[a("new-driver-modal"),a("new-driver-half-board-modal")],1)],1)],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{items:t.areas,"item-text":"name","item-value":"id",label:"All Areas",solo:"",clearable:"","hide-details":""},on:{change:t.onAreaChange},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}},{key:"item",fn:function(e){return[a("div",{staticClass:"select-drop-item-rootgroup"},[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}}]),model:{value:t.filter_area,callback:function(e){t.filter_area=e},expression:"filter_area"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{items:t.driver_status_list,"item-text":"name","item-value":"id",label:"All statuses",solo:"",clearable:"","hide-details":""},on:{change:t.onStatusfilter},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}},{key:"item",fn:function(e){return["root"==e.item.type?[a("div",{staticClass:"select-drop-item-rootgroup"},[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]:[a("div",{staticClass:"select-drop-item-subgroup"},[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]]}}]),model:{value:t.filter_status,callback:function(e){t.filter_status=e},expression:"filter_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-text-field",{attrs:{solo:"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search Drivers",clearable:""},model:{value:t.filter_search,callback:function(e){t.filter_search=e},expression:"filter_search"}})],1)],1),0===t.driversSearchedPaged.length?a("span",{staticClass:"pl-2"},[t._v("No drivers found")]):t._e(),0!==t.driversSearchedPaged.length?a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left",on:{click:function(e){return t.sortBy("first_name")}}},[t._v("\n                          Name\n                          "),"first_name"===t.sortKey?a("span",[t._v("\n                              "+t._s(1===t.sortOrder?"A-Z":"Z-A")+"\n                          ")]):t._e()]),a("th",{staticClass:"text-left",on:{click:function(e){return t.sortBy("area_ids")}}},[t._v("\n                      Areas\n                      "),"area_ids"===t.sortKey?a("span",[t._v(t._s(1===t.sortOrder?"▲":"▼"))]):t._e()]),a("th",{staticClass:"text-left"},[t._v("Data Full")]),a("th",{staticClass:"text-left"},[t._v("Status")]),a("th",{staticClass:"text-left"},[t._v("Activation Date")]),a("th",{staticClass:"text-left"},[t._v("Activity")]),a("th",{staticClass:"text-left"})])]),a("tbody",t._l(t.sortedDrivers,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"person-name-td"},[a("span",{staticClass:"person-name"},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])]),a("td",{staticClass:"person-area-td"},[a("span",{staticClass:"person-area"},[t._v(t._s(t.getArealabelById(e.area_ids)))])]),a("td",{staticClass:"person-area-td"},[a("span",{class:e.filledDataColor},[t._v(t._s(e.filledDataCount)+"%")])]),a("td",[e.status==t.DRIVER_STATUS_ACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:t.green}},r),[t._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[t._v("Activated, "+t._s(t._f("activityTime")(e.activated_at)))])])],1):t._e(),e.status==t.DRIVER_STATUS_INACTIVE?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:t.orange}},r),[t._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[t._v("Inactive Driver")])])],1):t._e(),e.status==t.DRIVER_STATUS_REGISTRED?a("span",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:t.indigo}},r),[t._v("mdi-checkbox-blank-circle")])]}}],null,!0)},[a("span",[t._v("Applicant Driver")])])],1):t._e()]),a("td",[e.status==t.DRIVER_STATUS_ACTIVE?a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on;return[a("span",t._g({},i),[t._v("\n                                      "+t._s(t._f("registrationFinishTime")(e.activated_at))+"\n                                  ")])]}}],null,!0)},[a("span",[t._v("Activated at")])]):t._e()],1),a("td",[e.activity_status==t.ACTIVITY_STATUS_ONLINE?a("span",[a("v-chip",{staticClass:"ma-2",attrs:{color:"green","text-color":"white","x-small":""}},[t._v("\n                                  online\n                              ")])],1):t._e(),e.activity_status==t.ACTIVITY_STATUS_DISCONNECTED?a("span",[t._v("\n                              was online: "+t._s(t._f("activityTime")(e.activity_time))+"\n                          ")]):t._e(),e.push_token?a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({attrs:{color:"blue"}},r),[t._v("mdi-cloud-lock-outline")])]}}],null,!0)},[a("span",[t._v("Firebase token obtained")])]):t._e()],1),a("td",[a("v-btn-toggle",{staticClass:"float-right primary"},[a("view-driver-modal",{attrs:{thisDriverData:e}}),[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({ref:"optionsMenu",refInFor:!0,staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:"",loading:t.localLoading}},r),[t._v("options"),a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",[e.status==t.DRIVER_STATUS_ACTIVE?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.inactiveItem(t.DRIVER_STATUS_INACTIVE,e.id)}}},[t._v("Mark as Inactive")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.inactiveItem(t.DRIVER_STATUS_ACTIVE,e.id)}}},[t._v("Mark as Active")])],1),a("v-list-item",[e.not_progressing==t.PROGRESSING_PROCESSING?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.notProgressingItem(t.PROGRESSING_NOT_PROGRESSING,e.id)}}},[t._v("Mark as Not Progressing")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.notProgressingItem(t.PROGRESSING_PROCESSING,e.id)}}},[t._v("Restore Progressing")])],1),a("edit-driver-modal",{attrs:{thisDriverData:e},on:{driverUpdated:t.editedDriver}},[a("v-list-item",{ref:"editDriverItem",refInFor:!0,staticClass:"pointer"},[a("v-list-item-title",[t._v("Edit Driver")])],1)],1),a("edit-working-time-modal",{attrs:{thisDriverData:e},on:{driverUpdated:t.editedDriver}})],1)],1)],1)]],2)],1)])})),0)]):t._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[a("v-flex",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-2",staticStyle:{"min-width":"75px"}},[t._v("\n                          Per page:\n                      ")]),a("v-select",{attrs:{items:t.per_page_list,label:"Solo field",solo:"",dense:"","hide-details":""},on:{change:t.onCangePerPage},model:{value:t.per_page,callback:function(e){t.per_page=e},expression:"per_page"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-pagination",{attrs:{value:t.page,length:t.total_pages,"total-visible":10},on:{input:t.onChangePage}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[t._v("\n                  "+t._s((t.page-1)*t.per_page+1)+" - "+t._s(t.page*t.per_page<t.driversSearched.length?t.page*t.per_page:t.driversSearched.length)+" of "+t._s(t.driversSearched.length)+"\n              ")])],1)],1)])}),[],!1,null,"5813efb6",null);e.a=T.exports;_()(T,{VAutocomplete:h.a,VBtn:v.a,VBtnToggle:m.a,VChip:u.a,VCol:p.a,VContainer:f.a,VFlex:g.a,VIcon:k.a,VList:b.a,VListItem:w.a,VListItemTitle:y.c,VMenu:D.a,VPagination:x.a,VRow:C.a,VSelect:S.a,VSimpleTable:I.a,VSpacer:P.a,VTextField:Y.a,VTooltip:R.a})},a14d:function(t,e,a){"use strict";var r=a("2f62"),i=a("2ef0"),s={name:"DriversListModal",props:["restaurantId"],data:()=>({dialog:!1,thisRestaurantId:null}),mounted(){},computed:{...Object(r.c)(["restaurants","drivers"]),driversListRestaurant(){if(i.isEmpty(this.restaurants))return[];if(i.isEmpty(this.drivers))return[];let t=i.find(this.restaurants,t=>t.id==this.restaurantId);return t?i.filter(this.drivers,e=>{if(0==e.area_ids.length)return!0;return-1!==i.map(e.area_ids,t=>t.area_id).indexOf(t.area_id)&&(0==e.restaurant_ids.length||!!i.find(e.restaurant_ids,e=>e.restaurant_id==t.id))}):[]}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("b0af"),d=a("a523"),_=a("169a"),h=a("0e8f"),v=a("132d"),m=a("da13"),u=a("5d23"),p=a("0fd9"),f=a("1f4f"),g=a("2fa4"),k=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-list-item",{on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-list-item-title",[t._v("Drivers")])],1),a("v-dialog",{attrs:{width:"fit-content"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?a("v-card",[a("v-container",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Drivers Working Here")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1),a("v-spacer",{staticClass:"line"})],1)],1),a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-left"},[t._v("Email")]),a("th",{staticClass:"text-left"},[t._v("Telephone")]),a("th",{staticClass:"text-left"},[t._v("Address")])])]),a("tbody",t._l(t.driversListRestaurant,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"person-name-td"},[a("span",{staticClass:"person-name"},[a("edit-driver-modal",{attrs:{thisDriverData:e}},[a("a",[t._v(t._s(e.first_name+" "+e.last_name))])])],1)]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.phone))]),a("td",[t._v(t._s(e.address_1)+", "+t._s(e.address_2))])])})),0)])],1)],1):t._e()],1)],1)}),[],!1,null,"feac68c0",null);e.a=k.exports;l()(k,{VCard:c.a,VContainer:d.a,VDialog:_.a,VFlex:h.a,VIcon:v.a,VListItem:m.a,VListItemTitle:u.c,VRow:p.a,VSimpleTable:f.a,VSpacer:g.a})},b27c:function(t,e,a){"use strict";var r=a("bc3a"),i=a.n(r),s={name:"LogIn",mounted:function(){if(localStorage.getItem("user")){"restaurant"==JSON.parse(localStorage.getItem("user")).role?this.$router.push("/schedulerestaurant"):this.$router.push("/schedule")}},data:()=>({user:"",showPassword:!1,email:"",password:"",valid:!1,localLoading:!1,messages:{incorrect_login:"Incorrect logins - please try again!"},emailRules:[t=>!!t||"Please enter your e-mail",t=>/.+@.+/.test(t)||"Must be valid e-mail"],passwordRules:[t=>!!t||"Please enter your password",t=>t&&t.length>=6||"Password should be at least six symbols long"],tab_login_panel:0}),methods:{onCancel(){this.email="",this.password=""},onSubmit(){if(this.$refs.form.validate()){this.localLoading=!0;const t={email:this.email,password:this.password};switch(this.$data.tab_login_panel){case 0:i.a.post(this.appConfig.app_url+"/api/auth/login/restaurant",t).then(t=>{let e=t.data.restaurant;this.user={id:e.id,firstName:e.name,lastName:"",email:e.email,restaurantsWorksFor:[],access_token:t.data.access_token,role:"restaurant",restaurants:e.restaurants},localStorage.setItem("user",JSON.stringify(this.user))}).then(()=>{this.$router.go("/schedulerestaurant")}).catch(t=>{let e=t.response;t.response.status&&401===t.response.status&&(e=this.messages.incorrect_login),this.$store.dispatch("setError",e)}).finally(()=>{this.localLoading=!1});break;case 1:i.a.post(this.appConfig.app_url+"/api/auth/login",t).then(t=>{let e=t.data.user;this.user={id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,restaurantsWorksFor:[],access_token:t.data.access_token,role:e.role,restaurants:[]},localStorage.setItem("user",JSON.stringify(this.user))}).then(()=>{this.$router.go("/schedule")}).catch(t=>{let e=t.response;t.response.status&&401===t.response.status&&(e=this.messages.incorrect_login),this.$store.dispatch("setError",e)}).finally(()=>{this.localLoading=!1});break;case 2:i.a.post(this.appConfig.app_url+"/api/auth/login/driver",t).then(t=>{let e=t.data.driver;this.user={id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,restaurantsWorksFor:[],access_token:t.data.access_token,role:"driver",restaurants:[]},localStorage.setItem("user",JSON.stringify(this.user))}).then(()=>{this.$router.go("/newsfeed")}).catch(t=>{let e=t.response;t.response.status&&401===t.response.status&&(e=this.messages.incorrect_login),this.$store.dispatch("setError",e)}).finally(()=>{this.localLoading=!1})}}}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("8336"),d=a("b0af"),_=a("99d9"),h=a("a523"),v=a("0e8f"),m=a("4bd4"),u=a("132d"),p=a("a722"),f=a("0fd9"),g=a("2fa4"),k=a("71a3"),b=a("fe57"),w=a("8654"),y=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Log In")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("v-tabs",{attrs:{right:""},model:{value:t.tab_login_panel,callback:function(e){t.tab_login_panel=e},expression:"tab_login_panel"}},[a("v-tab",[t._v("Business")]),a("v-tab",[t._v("Admin")])],1)],1)],1),a("v-card",[a("v-container",[a("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-text",[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",name:"email",label:"Email",type:"email",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:t.passwordRules,counter:12},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{depressed:"",loading:t.localLoading,disabled:!t.valid||t.localLoading},on:{click:t.onSubmit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check")]),t._v("\n                                    Log In\n                                ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading,disabled:t.localLoading},on:{click:t.onCancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                                    Cancel\n                                ")],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"46ff8377",null);e.a=y.exports;l()(y,{VBtn:c.a,VCard:d.a,VCardActions:_.a,VCardText:_.b,VContainer:h.a,VFlex:v.a,VForm:m.a,VIcon:u.a,VLayout:p.a,VRow:f.a,VSpacer:g.a,VTab:k.a,VTabs:b.a,VTextField:w.a})},e445:function(t,e,a){"use strict";var r=a("1dce"),i=a("b5ae"),s=a("2f62"),o=a("2ef0"),n=a("c1df"),l=a.n(n),c=a("f6b6"),d=a("156f");const _=["image/png","image/jpeg"],h=/(.*?)\.(jpg|jpeg|png)$/;var v={mixins:[r.validationMixin],name:"NewLocationModal",props:["thisDriverData"],validations:{firstName:{required:i.required},email:{required:i.required,email:i.email},lastName:{},date_of_birth:{},car_insurance_renewal_date:{},area_ids:{},restaurant_ids:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[t=>!!t||"Please enter your password",t=>t&&t.length>=6||"Password should be at least six symbols long"],driverData:null,readOnly:!1,localLoading:!1,dialog:!1,firstName:"",lastName:"",email:"",date_of_birth:"",car_make:"",car_model:"",car_registration:"",car_insurance_renewal_date:"",car_insurer:"",have_experience:"",experience_description:"",address_1:"",address_2:"",emergency_contact_name:"",emergency_contact_phone:"",bank_name_of_account_holder:"",bank_sort_code:"",bank_account_number:"",phone:"",city:"",postcode:"",password:"",driver_license_front_photo:void 0,driver_license_back_photo:void 0,identity_photo:void 0,photo_src:void 0,new_right_to_work_photos_uid_iterator:-1,right_to_work_photos:[],area_ids:[],restaurant_ids:[],tab_edit_restaurant:void 0,date_of_birth_selected:void 0,date_of_birth_picker:!1,car_insurance_renewal_date_selected:void 0,car_insurance_renewal_date_picker:!1,EXPERIANCE_YES:10,EXPERIANCE_NO:20,driver_license_front_src_photo:void 0,driver_license_back_src_photo:void 0,identity_src_photo:void 0,image_data:void 0,imgRules:[t=>!(t&&t.size>1e7)||"File size should be less than 10 MB!"],response_errors:[]}),watch:{date_of_birth:function(t,e){e!=t&&/\d\d\/\d\d\/\d\d\d\d/.test(t)&&(this.$data.date_of_birth_selected=l()(t,"DD/MM/YYYY").format("YYYY-MM-DD"))},car_insurance_renewal_date:function(t,e){e!=t&&/\d\d\/\d\d\/\d\d\d\d/.test(t)&&(this.$data.car_insurance_renewal_date_selected=l()(t,"DD/MM/YYYY").format("YYYY-MM-DD"))}},computed:{...Object(s.c)(["areas","restaurants"]),imagesBaseUrl(){return this.appConfig.app_url+"/images"},selectAreaErrors(){const t=[];return this.$v.area_ids.$dirty,t},selectRestaurantErrors(){const t=[];return this.$v.restaurant_ids.$dirty,t},firstNameErrors(){const t=[];return this.$v.firstName.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.firstName.required&&t.push("First name is required."),t):t},lastNameErrors(){const t=[];return this.$v.lastName.$dirty,t},emailErrors(){const t=[];if(!this.$v.email.$dirty)return t;!this.$v.email.email&&t.push("Must be valid e-mail"),!this.$v.email.required&&t.push("E-mail is required");let e=o.get(this.response_errors,"email",[]);return o.each(e,e=>t.push(e)),t},dateOfBirthErrors(){const t=[];return this.$v.date_of_birth.$dirty?(this.$data.date_of_birth&&!l()(this.$data.date_of_birth,"DD/MM/YYYY").isValid()&&t.push("Date invalid format."),t):t},carInsuranceRenewalDateErrors(){const t=[];return this.$v.car_insurance_renewal_date.$dirty?(this.$data.car_insurance_renewal_date&&!l()(this.$data.car_insurance_renewal_date,"DD/MM/YYYY").isValid()&&t.push("Date invalid format."),t):t},areasList(){return this.areas},restaurantsList(){return 0==this.area_ids.length?[]:o.filter(this.restaurants,t=>-1!==this.area_ids.indexOf(+t.area_id)&&t.status==d.a)}},created(){},mounted(){this.driverData=this.thisDriverData,this.id=this.thisDriverData.id,this.firstName=this.thisDriverData.first_name,this.lastName=this.thisDriverData.last_name,this.email=this.thisDriverData.email,l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").isValid()&&(this.date_of_birth=l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_make=this.thisDriverData.car_make,this.car_model=this.thisDriverData.car_model,this.car_registration=this.thisDriverData.car_registration,l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").isValid()&&(this.car_insurance_renewal_date=l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_insurer=this.thisDriverData.car_insurer,this.have_experience=this.thisDriverData.have_experience,this.experience_description=this.thisDriverData.experience_description,this.address_1=this.thisDriverData.address_1,this.address_2=this.thisDriverData.address_2,this.emergency_contact_name=this.thisDriverData.emergency_contact_name,this.emergency_contact_phone=this.thisDriverData.emergency_contact_phone,this.bank_name_of_account_holder=this.thisDriverData.bank_name_of_account_holder,this.bank_sort_code=this.thisDriverData.bank_sort_code,this.bank_account_number=this.thisDriverData.bank_account_number,this.phone=this.thisDriverData.phone,this.city=this.thisDriverData.city,this.postcode=this.thisDriverData.postcode,this.status=this.thisDriverData.status,this.area_ids=o.map(this.thisDriverData.area_ids,t=>+t.area_id),this.restaurant_ids=o.map(this.thisDriverData.restaurant_ids,t=>+t.restaurant_id),this.driver_license_front_photo=this.thisDriverData.driver_license_front_photo,this.driver_license_back_photo=this.thisDriverData.driver_license_back_photo,this.identity_photo=this.thisDriverData.identity_photo,this.photo_src=this.thisDriverData.photo_src,this.right_to_work_photos=this.thisDriverData.right_to_work_photos},methods:{onChangeArea(){let t=o.map(this.restaurantsList,t=>t.id);this.restaurant_ids=o.intersection(t,this.restaurant_ids)},onChangeRestaurant(){let t=o.map(this.restaurantsList,t=>t.id);this.restaurant_ids=o.intersection(t,this.restaurant_ids)},cancel(){this.id=this.thisDriverData.id,this.firstName=this.thisDriverData.first_name,this.lastName=this.thisDriverData.last_name,this.email=this.thisDriverData.email,l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").isValid()&&(this.date_of_birth=l()(this.thisDriverData.date_of_birth,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_make=this.thisDriverData.car_make,this.car_model=this.thisDriverData.car_model,this.car_registration=this.thisDriverData.car_registration,l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").isValid()&&(this.car_insurance_renewal_date=l()(this.thisDriverData.car_insurance_renewal_date,"YYYY-MM-DD").format("DD/MM/YYYY")),this.car_insurer=this.thisDriverData.car_insurer,this.have_experience=this.thisDriverData.have_experience,this.experience_description=this.thisDriverData.experience_description,this.address_1=this.thisDriverData.address_1,this.address_2=this.thisDriverData.address_2,this.emergency_contact_name=this.thisDriverData.emergency_contact_name,this.emergency_contact_phone=this.thisDriverData.emergency_contact_phone,this.bank_name_of_account_holder=this.thisDriverData.bank_name_of_account_holder,this.bank_sort_code=this.thisDriverData.bank_sort_code,this.bank_account_number=this.thisDriverData.bank_account_number,this.phone=this.thisDriverData.phone,this.city=this.thisDriverData.city,this.postcode=this.thisDriverData.postcode,this.status=this.thisDriverData.status,this.driver_license_front_photo=this.thisDriverData.driver_license_front_photo,this.driver_license_back_photo=this.thisDriverData.driver_license_back_photo,this.identity_photo=this.thisDriverData.identity_photo,this.photo_src=this.thisDriverData.photo_src,this.right_to_work_photos=this.thisDriverData.right_to_work_photos,this.area_ids=o.map(this.thisDriverData.area_ids,t=>+t.area_id),this.restaurant_ids=o.map(this.thisDriverData.restaurant_ids,t=>+t.restaurant_id),this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const t={id:this.id,first_name:this.firstName,last_name:this.lastName,email:this.email,address_1:this.address_1,address_2:this.address_2,postcode:this.postcode,city:this.city,phone:this.phone,date_of_birth:this.date_of_birth?l()(this.date_of_birth,"DD/MM/YYYY").format("YYYY-MM-DD"):void 0,emergency_contact_name:this.emergency_contact_name,emergency_contact_phone:this.emergency_contact_phone,car_make:this.car_make,car_model:this.car_model,car_registration:this.car_registration,car_insurance_renewal_date:this.car_insurance_renewal_date?l()(this.car_insurance_renewal_date,"DD/MM/YYYY").format("YYYY-MM-DD"):void 0,car_insurer:this.car_insurer,have_experience:this.have_experience,experience_description:this.experience_description,bank_name_of_account_holder:this.bank_name_of_account_holder,bank_sort_code:this.bank_sort_code,bank_account_number:this.bank_account_number,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids,right_to_work_photos:[]};this.switch_change_password&&(t.password=this.password),this.driver_license_front_src_photo?t.driver_license_front_src_photo=this.driver_license_front_src_photo:t.driver_license_front_photo=this.driver_license_front_photo,this.driver_license_back_src_photo?t.driver_license_back_src_photo=this.driver_license_back_src_photo:t.driver_license_back_photo=this.driver_license_back_photo,this.identity_src_photo?t.identity_src_photo=this.identity_src_photo:t.identity_photo=this.identity_photo,this.image_data?t.image_data=this.image_data:t.photo_src=this.photo_src,o.each(this.right_to_work_photos,e=>{e.file_src?t.right_to_work_photos.push({src_name:e.src_name,file_src:e.file_src}):t.right_to_work_photos.push({id:e.id,src_name:e.src_name,file_name:e.file_name})}),this.$store.dispatch("editDriver",t).then(()=>{this.password="",this.switch_change_password=!1,this.cancel(),this.$emit("driverUpdated","")}).catch(t=>{this.response_errors=t}).finally(()=>{this.localLoading=!1})}},dateOfBirthSelect:function(){this.$data.date_of_birth=l()(this.$data.date_of_birth_selected,"YYYY-MM-DD").format("DD/MM/YYYY"),this.$data.date_of_birth_picker=!1},getDateOfBirthText:function(t){return l()(t,"YYYY-MM-DD").format("DD/MM/YYYY")},carInsuranceRenewalDateSelect:function(){this.$data.car_insurance_renewal_date=l()(this.$data.car_insurance_renewal_date_selected,"YYYY-MM-DD").format("DD/MM/YYYY"),this.$data.car_insurance_renewal_date_picker=!1},getCarInsuranceRenewalDateText:function(t){return l()(t,"YYYY-MM-DD").format("DD/MM/YYYY")},onAddDriverLicenseFrontPhoto(){this.$refs.driver_license_front_photo.click()},onRemoveDriverLicenseFrontPhoto(){this.driver_license_front_photo=void 0,this.driver_license_front_src_photo=void 0},onChangDriverLicenseFrontPhoto(){0!=this.$refs.driver_license_front_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.driver_license_front_photo.files,t=>{this.processFilePreview(t,(t,e)=>{this.driver_license_front_photo=e,this.driver_license_front_src_photo=e})}),this.$refs.driver_license_front_photo.value=null)},onAddDriverLicenseBackPhoto(){this.$refs.driver_license_back_photo.click()},onRemoveDriverLicenseBackPhoto(){this.driver_license_back_photo=void 0,this.driver_license_back_src_photo=void 0},onChangDriverLicenseBackPhoto(){0!=this.$refs.driver_license_back_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.driver_license_back_photo.files,t=>{this.processFilePreview(t,(t,e)=>{this.driver_license_back_photo=e,this.driver_license_back_src_photo=e})}),this.$refs.driver_license_back_photo.value=null)},onAddIdentityPhoto(){this.$refs.identity_photo.click()},onRemoveIdentityPhoto(){this.identity_photo=void 0,this.identity_src_photo=void 0},onChangIdentityPhoto(){0!=this.$refs.identity_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.identity_photo.files,t=>{this.processFilePreview(t,(t,e)=>{this.identity_photo=e,this.identity_src_photo=e})}),this.$refs.identity_photo.value=null)},onAddPhotoSrc(){this.$refs.photo_src.click()},onRemovePhotoSrc(){this.photo_src=void 0,this.image_data=void 0},onChangPhotoSrc(){0!=this.$refs.photo_src.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.photo_src.files,t=>{this.processFilePreview(t,(t,e)=>{this.photo_src=e,this.image_data=e})}),this.$refs.photo_src.value=null)},onAddRightToWorkPhotos(){this.$refs.right_to_work_photo.click()},onRemoveRightToWorkPhoto(t){this.right_to_work_photos.splice(t,1)},onChangRightToWorkPhoto(){0!=this.$refs.right_to_work_photo.files.length&&"undefined"!=typeof FileReader&&(o.each(this.$refs.right_to_work_photo.files,t=>{this.processFilePreview(t,(t,e)=>{this.right_to_work_photos.push({id:this.new_right_to_work_photos_uid_iterator--,src_name:t,file_name:e,file_src:e})})}),this.$refs.right_to_work_photo.value=null)},processFilePreview(t,e){if(!t||"undefined"==typeof FileReader)return;if(!h.test(t.name.toLowerCase())||-1==_.indexOf(t.type))return void this.$store.dispatch("setError",{text:"Unsupported file type",type:"error",code:402});let a=new FileReader;a.onload=function(a){if(-1!==_.indexOf(t.type)||h.test(t.name.toLowerCase())){let r=new Image;r.src=a.target.result,r.onload=function(){r=c.a.compressImage(r,90,1920),e(t.name.toLowerCase(),r.src)}}else e(t.name.toLowerCase(),a.target.result)},a.readAsDataURL(t)},getPhotoPath:function(t){return t&&0===t.indexOf("data:image/")?t:this.imagesBaseUrl+"/"+t}}},m=a("2877"),u=a("6544"),p=a.n(u),f=a("e4e5"),g=a("8336"),k=a("b0af"),b=a("99d9"),w=a("62ad"),y=a("a523"),D=a("2e4b"),x=a("169a"),C=a("4bd4"),S=a("132d"),I=a("adda"),P=a("e449"),Y=a("0fd9"),R=a("b974"),T=a("b73d"),V=a("71a3"),E=a("c671"),A=a("fe57"),N=a("aac8"),$=a("8654"),L=Object(m.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("span",t._g({},r),[t._t("default")],2)]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Driver")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:t.tab_edit_restaurant,callback:function(e){t.tab_edit_restaurant=e},expression:"tab_edit_restaurant"}},[a("v-tab",[t._v("Main")]),a("v-tab",[t._v("Identity")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:t.tab_edit_restaurant,callback:function(e){t.tab_edit_restaurant=e},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"First Name*",hint:"enter first name",required:"","error-messages":t.firstNameErrors},on:{input:function(e){return t.$v.firstName.$touch()},blur:function(e){return t.$v.firstName.$touch()}},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Last Name",hint:"enter a last name","error-messages":t.lastNameErrors,required:""},on:{input:function(e){return t.$v.lastName.$touch()},blur:function(e){return t.$v.lastName.$touch()}},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Driver Email*",required:"","error-messages":t.emailErrors},on:{input:function(e){return t.$v.email.$touch()},blur:function(e){return t.$v.email.$touch()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"max-width":"346px","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-text-field",t._g({attrs:{"clear-icon":"mdi-close","prepend-icon":"mdi-calendar",clearable:"",outlined:"",label:"Date of birth",hint:"22/11/1990","error-messages":t.dateOfBirthErrors,autocomplete:"off"},on:{input:function(e){return t.$v.date_of_birth.$touch()},blur:function(e){return t.$v.date_of_birth.$touch()}},model:{value:t.date_of_birth,callback:function(e){t.date_of_birth=e},expression:"date_of_birth"}},r))]}}]),model:{value:t.date_of_birth_picker,callback:function(e){t.date_of_birth_picker=e},expression:"date_of_birth_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1","title-date-format":t.getDateOfBirthText},on:{"click:date":t.dateOfBirthSelect},model:{value:t.date_of_birth_selected,callback:function(e){t.date_of_birth_selected=e},expression:"date_of_birth_selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_1","persistent-hint":""},model:{value:t.address_1,callback:function(e){t.address_1=e},expression:"address_1"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address_2","persistent-hint":""},model:{value:t.address_2,callback:function(e){t.address_2=e},expression:"address_2"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"City",hint:"Enter city"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Postcode",hint:"Enter postcode"},model:{value:t.postcode,callback:function(e){t.postcode=e},expression:"postcode"}})],1),a("v-col",{attrs:{cols:"6",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number",type:"Telephone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact name","persistent-hint":""},model:{value:t.emergency_contact_name,callback:function(e){t.emergency_contact_name=e},expression:"emergency_contact_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Emergency contact phone","persistent-hint":""},model:{value:t.emergency_contact_phone,callback:function(e){t.emergency_contact_phone=e},expression:"emergency_contact_phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Make","persistent-hint":""},model:{value:t.car_make,callback:function(e){t.car_make=e},expression:"car_make"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Model","persistent-hint":""},model:{value:t.car_model,callback:function(e){t.car_model=e},expression:"car_model"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Registration","persistent-hint":""},model:{value:t.car_registration,callback:function(e){t.car_registration=e},expression:"car_registration"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Car Insurer","persistent-hint":""},model:{value:t.car_insurer,callback:function(e){t.car_insurer=e},expression:"car_insurer"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"max-width":"346px","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-text-field",t._g({attrs:{"clear-icon":"mdi-close","prepend-icon":"mdi-calendar",clearable:"",outlined:"",label:"Car Insurance Renewal Date",hint:"22/11/2019","persistent-hint":"","error-messages":t.carInsuranceRenewalDateErrors,autocomplete:"off"},on:{input:function(e){return t.$v.car_insurance_renewal_date.$touch()},blur:function(e){return t.$v.car_insurance_renewal_date.$touch()}},model:{value:t.car_insurance_renewal_date,callback:function(e){t.car_insurance_renewal_date=e},expression:"car_insurance_renewal_date"}},r))]}}]),model:{value:t.car_insurance_renewal_date_picker,callback:function(e){t.car_insurance_renewal_date_picker=e},expression:"car_insurance_renewal_date_picker"}},[a("v-card",{attrs:{"max-width":"346px"}},[a("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1","title-date-format":t.getCarInsuranceRenewalDateText},on:{"click:date":t.carInsuranceRenewalDateSelect},model:{value:t.car_insurance_renewal_date_selected,callback:function(e){t.car_insurance_renewal_date_selected=e},expression:"car_insurance_renewal_date_selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-switch",{attrs:{"false-value":t.EXPERIANCE_NO,"true-value":t.EXPERIANCE_YES,label:"Have experience"},model:{value:t.have_experience,callback:function(e){t.have_experience=e},expression:"have_experience"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Experience description","persistent-hint":""},model:{value:t.experience_description,callback:function(e){t.experience_description=e},expression:"experience_description"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank Name of Account Holder","persistent-hint":""},model:{value:t.bank_name_of_account_holder,callback:function(e){t.bank_name_of_account_holder=e},expression:"bank_name_of_account_holder"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank sort code","persistent-hint":""},model:{value:t.bank_sort_code,callback:function(e){t.bank_sort_code=e},expression:"bank_sort_code"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bank account number","persistent-hint":""},model:{value:t.bank_account_number,callback:function(e){t.bank_account_number=e},expression:"bank_account_number"}})],1),a("v-col",{staticClass:"area-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas Assigned to*",multiple:"",chips:"","deletable-chips":"",hint:"leave blank not to assign driver to any areas","persistent-hint":"",items:t.areasList,"item-text":"name","item-value":"id","error-messages":t.selectAreaErrors},on:{change:t.onChangeArea,blur:function(e){return t.$v.area_ids.$touch()}},model:{value:t.area_ids,callback:function(e){t.area_ids=e},expression:"area_ids"}})],1),a("v-col",{staticClass:"drivers_resturants-select",attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Area's Restaurants Not Assigned to Driver",multiple:"",chips:"","deletable-chips":"",hint:"if leave blank driver to be assigned to all Area's restaurants","persistent-hint":"",items:t.restaurantsList,"item-text":"name","item-value":"id",disabled:0==t.area_ids.length,"error-messages":t.selectRestaurantErrors},on:{change:t.onChangeRestaurant,blur:function(e){return t.$v.restaurant_ids.$touch()}},model:{value:t.restaurant_ids,callback:function(e){t.restaurant_ids=e},expression:"restaurant_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-switch",{attrs:{label:"Change Password"},model:{value:t.switch_change_password,callback:function(e){t.switch_change_password=e},expression:"switch_change_password"}})],1),t.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:t.passwordRules,counter:12},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):t._e()],1)],1),a("v-tab-item",[a("v-row",{staticStyle:{"align-items":"start"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[t._v("License Front Photo")]),a("hr"),a("input",{ref:"driver_license_front_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"driver_license_front_photo",id:"driver_license_front_photo",accept:"image/*"},on:{change:t.onChangDriverLicenseFrontPhoto}}),a("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:t.onAddDriverLicenseFrontPhoto}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-attachment")]),t._v("Choose License Front Photo\n                            ")],1),a("v-row",[t.driver_license_front_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:t.getPhotoPath(t.driver_license_front_photo),target:"_blank"}},[a("v-img",{attrs:{src:t.getPhotoPath(t.driver_license_front_photo)}})],1),t.driver_license_front_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.onRemoveDriverLicenseFrontPhoto()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove Photo\n                                    ")],1):t._e()],1):t._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[t._v("License Back Photo")]),a("hr"),a("input",{ref:"driver_license_back_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"driver_license_back_photo",id:"driver_license_back_photo",accept:"image/*"},on:{change:t.onChangDriverLicenseBackPhoto}}),a("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:t.onAddDriverLicenseBackPhoto}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-attachment")]),t._v("Choose License Back Photo\n                            ")],1),a("v-row",[t.driver_license_back_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:t.getPhotoPath(t.driver_license_back_photo),target:"_blank"}},[a("v-img",{attrs:{src:t.getPhotoPath(t.driver_license_back_photo)}})],1),t.driver_license_back_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.onRemoveDriverLicenseBackPhoto()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove Photo\n                                    ")],1):t._e()],1):t._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[t._v("Identity Photo")]),a("hr"),a("input",{ref:"identity_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"identity_photo",id:"identity_photo",accept:"image/*"},on:{change:t.onChangIdentityPhoto}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:t.onAddIdentityPhoto}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-attachment")]),t._v("Choose Identity Photo\n                            ")],1),a("v-row",[t.identity_photo?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:t.getPhotoPath(t.identity_photo),target:"_blank"}},[a("v-img",{attrs:{src:t.getPhotoPath(t.identity_photo)}})],1),t.identity_photo?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.onRemoveIdentityPhoto()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove Photo\n                                    ")],1):t._e()],1):t._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("b",[t._v("Profile Photo")]),a("hr"),a("input",{ref:"photo_src",staticStyle:{display:"none"},attrs:{type:"file",name:"photo_src",id:"photo_src",accept:"image/*"},on:{change:t.onChangPhotoSrc}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:t.onAddPhotoSrc}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-attachment")]),t._v("Choose Profile Photo\n                            ")],1),a("v-row",[t.photo_src?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("a",{attrs:{href:t.getPhotoPath(t.photo_src),target:"_blank"}},[a("v-img",{attrs:{src:t.getPhotoPath(t.photo_src)}})],1),t.photo_src?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.onRemovePhotoSrc()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove Photo\n                                    ")],1):t._e()],1):t._e()],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-banner",{attrs:{"single-line":""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("input",{ref:"right_to_work_photo",staticStyle:{display:"none"},attrs:{type:"file",name:"right_to_work_photo",id:"right_to_work_photo",accept:"image/*",multiple:""},on:{change:t.onChangRightToWorkPhoto}}),a("v-btn",{attrs:{color:"primary",right:"",text:"",small:""},on:{click:t.onAddRightToWorkPhotos}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Right To Work Photos\n                                    ")],1)]},proxy:!0}])},[a("b",[t._v("Right to work photos")])]),a("v-row",t._l(t.right_to_work_photos,(function(e,r){return a("v-col",{key:e.id,attrs:{cols:"12",sm:"6",md:"3"}},[a("a",{attrs:{href:t.getPhotoPath(e.file_name),target:"_blank"}},[a("v-img",{attrs:{src:t.getPhotoPath(e.file_name)}})],1),e.file_name?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.onRemoveRightToWorkPhoto(r)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove Photo\n                                    ")],1):t._e()],1)})),1)],1)],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"e1bb5c16",null);e.a=L.exports;p()(L,{VBanner:f.a,VBtn:g.a,VCard:k.a,VCardText:b.b,VCardTitle:b.c,VCol:w.a,VContainer:y.a,VDatePicker:D.a,VDialog:x.a,VForm:C.a,VIcon:S.a,VImg:I.a,VMenu:P.a,VRow:Y.a,VSelect:R.a,VSwitch:T.a,VTab:V.a,VTabItem:E.a,VTabs:A.a,VTabsItems:N.a,VTextField:$.a})}}]);