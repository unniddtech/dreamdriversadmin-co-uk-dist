(window.webpackJsonp=window.webpackJsonp||[]).push([["app~5d62c75a"],{3392:function(t,e,a){"use strict";var i=a("2f62"),s=a("1dce"),o=a("b5ae"),n=a("2ef0");var r={mixins:[s.validationMixin],name:"SendPushMessage",validations:{title:{required:o.required,maxLength:Object(o.maxLength)(55)},body:{required:o.required,maxLength:Object(o.maxLength)(255)}},data:()=>({dialog:!1,localLoading:!1,area_ids:[],restaurant_ids:[],driver_ids:[],notifyStatusList:[{id:10,name:"Active only"},{id:20,name:"Inactive only"}],notify_status:void 0,title:"",body:""}),computed:{...Object(i.c)({area_list:"areas",restaurant_list:"restaurants",driver_list:"drivers"}),titleErrors(){const t=[];return this.$v.title.$dirty?(!this.$v.title.maxLength&&t.push("Title must be at most 55 characters long"),!this.$v.title.required&&t.push("Title is required."),t):t},bodyErrors(){const t=[];return this.$v.body.$dirty?(!this.$v.body.maxLength&&t.push("Body must be at most 255 characters long"),!this.$v.body.required&&t.push("Body is required."),t):t},areasList(){return this.area_list},restaurantsListSearched(){return 0==this.area_ids.length?[]:n.filter(this.restaurant_list,t=>-1!==this.area_ids.indexOf(+t.area_id))},driverListSearched(){return n.filter(this.driver_list,t=>{if(0==t.area_ids.length)return!0;let e=n.map(t.area_ids,t=>t.area_id);if(this.area_ids.length>0&&0==n.intersection(e,this.area_ids).length)return!1;if(0==t.restaurant_ids.length)return!0;let a=n.map(t.restaurant_ids,t=>t.restaurant_id);return!(this.restaurant_ids.length>0&&0==n.intersection(a,this.restaurant_ids).length)&&(!this.notify_status||this.notify_status==t.status)})}},created(){},mounted(){Promise.all([this.$store.dispatch("fetchLocations"),this.$store.dispatch("fetchDrivers")]).then(()=>{})},methods:{onChangeArea(){let t=n.map(this.restaurantsListSearched,t=>t.id);this.restaurant_ids=n.intersection(t,this.restaurant_ids)},onChangeRestaurant(){},onChangeDriver(){},cancel(){this.dialog=!1},submit(){if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){const t={title:this.title,body:this.body,area_ids:this.area_ids,restaurant_ids:this.restaurant_ids,notify_status:this.notify_status,driver_ids:this.driver_ids};this.$store.dispatch("messageDriver",t).then(()=>{this.dialog=!1}).catch(t=>{let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},l=a("2877"),d=a("6544"),c=a.n(d),u=a("c6a6"),h=a("8336"),m=a("b0af"),v=a("99d9"),p=a("62ad"),g=a("a523"),_=a("169a"),f=a("4bd4"),b=a("132d"),y=a("0fd9"),k=a("b974"),$=a("8654"),x=a("a844"),C=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("span",t._g({staticClass:"pointer"},i),[t._t("default")],2)]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Push message")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Title*",hint:"enter title",required:"","error-messages":t.titleErrors},on:{input:function(e){return t.$v.title.$touch()},blur:function(e){return t.$v.title.$touch()}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",sm:"12"}},[a("v-textarea",{attrs:{outlined:"",label:"Body*","error-messages":t.bodyErrors},on:{input:function(e){return t.$v.body.$touch()},blur:function(e){return t.$v.body.$touch()}},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"",label:"Areas to Message",multiple:"",chips:"","deletable-chips":"",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.areasList,"item-text":"name","item-value":"id"},on:{change:t.onChangeArea},model:{value:t.area_ids,callback:function(e){t.area_ids=e},expression:"area_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-autocomplete",{attrs:{outlined:"",label:"Restaurants to Message",multiple:"","clear-icon":"mdi-close",clearable:"",chips:"","deletable-chips":"",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.restaurantsListSearched,"item-text":"name","item-value":"id"},model:{value:t.restaurant_ids,callback:function(e){t.restaurant_ids=e},expression:"restaurant_ids"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{outlined:"","clear-icon":"mdi-close",clearable:"",label:"Notify Active/Inactive Drivers",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.notifyStatusList,"item-text":"name","item-value":"id"},model:{value:t.notify_status,callback:function(e){t.notify_status=e},expression:"notify_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-autocomplete",{attrs:{outlined:"",label:"Drivers to Message",multiple:"","clear-icon":"mdi-close",clearable:"",chips:"","deletable-chips":"",hint:"leave blank to messages all drivers","persistent-hint":"",items:t.driverListSearched,"item-text":"full_name","item-value":"id"},model:{value:t.driver_ids,callback:function(e){t.driver_ids=e},expression:"driver_ids"}})],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cellphone-message")]),t._v("\n              Send Message(s)\n            ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n              Cancel\n            ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"f32fa384",null),V=C.exports;c()(C,{VAutocomplete:u.a,VBtn:h.a,VCard:m.a,VCardText:v.b,VCardTitle:v.c,VCol:p.a,VContainer:g.a,VDialog:_.a,VForm:f.a,VIcon:b.a,VRow:y.a,VSelect:k.a,VTextField:$.a,VTextarea:x.a});var L={name:"Options",components:{"send-push-message":V},data:()=>({localLoading:!1}),mounted(){this.$store.dispatch("fetchOptions")},created(){},computed:{...Object(i.c)(["options"]),optionsSearched(){return this.options}},methods:{}},O=a("0e8f"),w=a("1f4f"),q=a("2fa4"),D=Object(l.a)(L,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Options")]),a("v-spacer",{staticClass:"line"}),a("send-push-message",[a("v-btn",{attrs:{small:"",color:"primary",tile:"",depressed:""}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cellphone-message")]),t._v("\n                        Send Push Message\n                    ")],1)],1),a("hr")],1)],1),0!==t.optionsSearched.length?a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Key ")]),a("th",{staticClass:"text-left"},[t._v("Value")]),a("th",{staticClass:"text-left"},[t._v("Description")]),a("th",{staticClass:"text-left"})])]),a("tbody",t._l(t.optionsSearched,(function(e){return a("tr",{key:e.id},[a("td",[a("span",{staticClass:"option-name"},[t._v(t._s(e.okey))])]),a("td",[a("span",{staticClass:"option-name"},[t._v(t._s(e.ovalue))])]),a("td",[t._v("\n                        -\n                    ")]),a("td",["map_center_default"==e.okey?a("span",[a("edit-option-map-modal",{attrs:{thisOptionData:e}})],1):a("span",[a("edit-option-modal",{attrs:{thisOptionData:e}})],1)])])})),0)]):t._e()],1)])}),[],!1,null,"577dc65d",null);e.a=D.exports;c()(D,{VBtn:h.a,VContainer:g.a,VFlex:O.a,VIcon:b.a,VRow:y.a,VSimpleTable:w.a,VSpacer:q.a})},7628:function(t,e,a){"use strict";var i=a("1dce"),s=a("b5ae"),o=a("755e"),n=a("2ef0"),r=a("bc3a"),l=a.n(r);const d={lat:51.4,lng:0};var c={mixins:[i.validationMixin],name:"EditOptionModal",props:["thisOptionData"],validations:{okey:{required:s.required},ovalue:{required:s.required}},data:()=>({optionData:null,localLoading:!1,dialog:!1,okey:"",ovalue:"",address:"",map_latitude:void 0,map_longitude:void 0,is_initialized:!1,map_center:d,map_zoom:12,map_marker:void 0,gmap_results:[],gmap_loading:!1}),computed:{okeyErrors(){const t=[];return this.$v.okey.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.okey.required&&t.push("First name is required."),t):t},ovalueErrors(){const t=[];return this.$v.ovalue.$dirty?(!this.$v.ovalue.required&&t.push("Last Name is required."),t):t},google:o.gmapApi},updated(){if(this.is_initialized)return;let t=this,e=setInterval(()=>{t.google&&t.$refs.mapRef&&(clearInterval(e),t.$data.is_initialized=!0,t.onUpgradeMapMarker())},10)},mounted(){this.optionData=this.thisOptionData,this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue;let t=JSON.parse(this.ovalue);this.map_latitude=t.lat,this.map_longitude=t.lng,this.map_center={lat:this.map_latitude,lng:this.map_longitude},this.map_zoom=t.map_zoom},methods:{cancel(){this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue,this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const t={okey:this.okey,ovalue:this.ovalue};this.switch_change_password&&(t.password=this.password),this.$store.dispatch("editOption",t).then(()=>{this.dialog=!1,this.$emit("optionUpdated","")}).catch(t=>{this.email="";let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}},refreshValue(){this.ovalue=JSON.stringify({lat:this.map_latitude,lng:this.map_longitude,map_zoom:this.map_zoom})},onAddressChanged(){if(!this.$data.address)return;this.gmap_loading=!0;let t=encodeURI(this.$data.address.split(" ").join("+"));l.a.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${this.appConfig.GOOGLE_MAP_API_KEY}&language=en`).then(t=>{this.gmap_loading=!1,this.$data.gmap_results=t.data&&t.data.results})},onSelectAddress(t){this.address=t.formatted_address;let e=n.find(t.address_components,t=>-1!==t.types.indexOf("postal_code"));e&&(this.postcode=e.short_name),this.map_latitude=n.get(t,"geometry.location.lat",void 0),this.map_longitude=n.get(t,"geometry.location.lng",void 0),this.map_latitude&&this.map_longitude&&this.onUpgradeMapMarker()},onUpgradeMapMarker(){let t=this;t.$data.map_marker=void 0,t.map_latitude&&t.map_longitude&&(t.$refs.mapRef.$mapPromise.then(e=>{t.$data.map_marker=new t.google.maps.LatLng(t.map_latitude,t.map_longitude);var a=new t.google.maps.LatLngBounds;a.extend(t.$data.map_marker),e.setCenter(a.getCenter()),e.setZoom(this.map_zoom)}),this.refreshValue())},onChangeMarkerPosition(t){this.map_latitude||this.map_longitude?(this.map_latitude=void 0,this.map_longitude=void 0):(this.map_latitude=t.latLng.lat(),this.map_longitude=t.latLng.lng()),this.onUpgradeMapMarker()},onChangeZoom(t){this.map_zoom=t,this.refreshValue()}}},u=a("2877"),h=a("6544"),m=a.n(h),v=a("8336"),p=a("b0af"),g=a("99d9"),_=a("62ad"),f=a("a523"),b=a("169a"),y=a("4bd4"),k=a("132d"),$=a("da13"),x=a("5d23"),C=a("1baa"),V=a("34c3"),L=a("0fd9"),O=a("8654"),w=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{"x-small":"",icon:"",color:"grey lighten-1"},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},i),[a("v-icon",{staticStyle:{"font-size":"20px"}},[t._v("mdi-pencil")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit option")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Key*",hint:"enter key",required:"",disabled:"","error-messages":t.okeyErrors},on:{input:function(e){return t.$v.okey.$touch()},blur:function(e){return t.$v.okey.$touch()}},model:{value:t.okey,callback:function(e){t.okey=e},expression:"okey"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Value*",hint:"enter value","error-messages":t.ovalueErrors,required:"",disabled:""},on:{input:function(e){return t.$v.ovalue.$touch()},blur:function(e){return t.$v.ovalue.$touch()}},model:{value:t.ovalue,callback:function(e){t.ovalue=e},expression:"ovalue"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify","clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address",hint:"type something to search","persistent-hint":""},on:{change:function(e){return t.onAddressChanged()}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[0!=t.gmap_results.length?a("h2",[t._v("Seach results:")]):t._e(),t.gmap_loading?a("h3",[t._v("Seaching address...")]):t._e(),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.gmap_results,(function(e,i){return a("v-list-item",{key:i,on:{click:function(a){return t.onSelectAddress(e)}}},[a("v-list-item-icon",{staticClass:"driver-profile_icon"},[a("v-icon",[t._v("mdi-map-marker")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.formatted_address)}})],1)],1)})),1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"220px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:t.map_center,zoom:t.map_zoom,"map-type-id":"terrain"},on:{click:t.onChangeMarkerPosition,zoom_changed:t.onChangeZoom}},[t.map_marker?a("GmapMarker",{attrs:{position:t.map_marker}}):t._e()],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"519f88b5",null);e.a=w.exports;m()(w,{VBtn:v.a,VCard:p.a,VCardText:g.b,VCardTitle:g.c,VCol:_.a,VContainer:f.a,VDialog:b.a,VForm:y.a,VIcon:k.a,VListItem:$.a,VListItemContent:x.a,VListItemGroup:C.a,VListItemIcon:V.a,VListItemTitle:x.c,VRow:L.a,VTextField:O.a})},a9c3:function(t,e,a){"use strict";var i=a("1dce"),s=a("b5ae"),o={mixins:[i.validationMixin],name:"EditOptionModal",props:["thisOptionData"],validations:{okey:{required:s.required},ovalue:{required:s.required}},data:()=>({optionData:null,localLoading:!1,dialog:!1,okey:"",ovalue:""}),computed:{okeyErrors(){const t=[];return this.$v.okey.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.okey.required&&t.push("First name is required."),t):t},ovalueErrors(){const t=[];return this.$v.ovalue.$dirty?(!this.$v.ovalue.required&&t.push("Last Name is required."),t):t}},created(){},mounted(){this.optionData=this.thisOptionData,this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue},methods:{cancel(){this.okey=this.thisOptionData.okey,this.ovalue=this.thisOptionData.ovalue,this.dialog=!1},submit(){if(this.localLoading=!0,this.dialog=!0,this.$v.$touch(),!this.$v.$invalid){const t={okey:this.okey,ovalue:this.ovalue};this.switch_change_password&&(t.password=this.password),this.$store.dispatch("editOption",t).then(()=>{this.dialog=!1,this.$emit("optionUpdated","")}).catch(t=>{this.email="";let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},n=a("2877"),r=a("6544"),l=a.n(r),d=a("8336"),c=a("b0af"),u=a("99d9"),h=a("62ad"),m=a("a523"),v=a("169a"),p=a("4bd4"),g=a("132d"),_=a("0fd9"),f=a("8654"),b=Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{"x-small":"",icon:"",color:"grey lighten-1"},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},i),[a("v-icon",{staticStyle:{"font-size":"20px"}},[t._v("mdi-pencil")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit option")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Key*",hint:"enter key",required:"",disabled:"","error-messages":t.okeyErrors},on:{input:function(e){return t.$v.okey.$touch()},blur:function(e){return t.$v.okey.$touch()}},model:{value:t.okey,callback:function(e){t.okey=e},expression:"okey"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Value*",hint:"enter value","error-messages":t.ovalueErrors,required:""},on:{input:function(e){return t.$v.ovalue.$touch()},blur:function(e){return t.$v.ovalue.$touch()}},model:{value:t.ovalue,callback:function(e){t.ovalue=e},expression:"ovalue"}})],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"34c4136f",null);e.a=b.exports;l()(b,{VBtn:d.a,VCard:c.a,VCardText:u.b,VCardTitle:u.c,VCol:h.a,VContainer:m.a,VDialog:v.a,VForm:p.a,VIcon:g.a,VRow:_.a,VTextField:f.a})}}]);