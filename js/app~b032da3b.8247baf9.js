(window.webpackJsonp=window.webpackJsonp||[]).push([["app~b032da3b"],{"1cf0":function(t,e,i){"use strict";i("8ee0")},"249b":function(t,e,i){"use strict";var a=i("1dce"),s=i("b5ae"),n=i("2f62"),o=i("c1df"),l=i.n(o),r={mixins:[a.validationMixin],name:"NewShiftModal",props:["restaurantItem","periodDate"],validations:{start_time:{required:s.required},finish_time:{required:s.required},comment:{}},data:()=>({readOnly:!1,localLoading:!1,dialog:!1,restaurant_id:"",period_date:"",start_time:"",finish_time:"",cost_bonus:0,const_fuel_bonus:0,cost_extra_bonus:0,comment:"",area_selected:void 0,bonus_list:[{id:0,name:"no bonus"},{id:10,name:"+£10"},{id:20,name:"+£20"}],start_time_was_clean:!1,finish_time_was_clean:!1}),updated(){},computed:{...Object(n.c)(["timeList"]),startTimeErrors(){const t=[];return this.$v.start_time.$dirty?(!this.$v.start_time.required&&t.push("Start Time is required."),!l()(this.$data.start_time,"HH:mm").isValid()&&t.push("Start Time invalid format."),t):t},finishTimeErrors(){const t=[];return this.$v.finish_time.$dirty?(!this.$v.finish_time.required&&t.push("Start Time is required."),!l()(this.$data.finish_time,"HH:mm").isValid()&&t.push("Finish Time invalid format."),t):t},shiftLength:function(){let t=l()(this.$data.finish_time,"HH:mm"),e=l()(this.$data.start_time,"HH:mm");return t.isValid()&&e.isValid()?(this.$data.finish_time<this.$data.start_time&&t.add(1,"days"),((t-e)/6e4/60).toFixed(2)):0}},methods:{submit(){if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){this.$data.restaurant_id=this.$props.restaurantItem.id,this.$data.period_date=this.$props.periodDate;const t={restaurant_id:this.$data.restaurant_id,period_date:this.$data.period_date,start_time:this.$data.start_time,finish_time:this.$data.finish_time,meal_time:0,rest_time:0,cost_per_hour:0,cost_total:0,cost_bonus:this.$data.cost_bonus,const_fuel_bonus:this.$data.const_fuel_bonus,cost_extra_bonus:this.$data.cost_extra_bonus,comment:this.$data.comment};this.$store.dispatch("createNewFreeShift",t).then(()=>{this.dialog=!1,this.clear()}).finally(()=>{this.localLoading=!1})}},clear(){this.$v.$reset(),this.start_time="",this.finish_time="",this.cost_bonus=0,this.const_fuel_bonus=0,this.cost_extra_bonus=0,this.comment=""},onStartTimeFocused:function(){this.start_time||(this.start_time=this.timeToApproximation(l()().format("HH:mm")),this.start_time_was_clean=!0)},onStartTimeChanged:function(){this.$v.start_time.$touch(),this.start_time_was_clean=!1},onStartTimeBlur:function(){this.start_time_was_clean&&(this.start_time=void 0),this.$v.start_time.$touch()},onFinishTimeFocused:function(){this.finish_time||(this.finish_time=this.timeToApproximation(l()().format("HH:mm")),this.finish_time_was_clean=!0)},onFinishTimeChanged:function(){this.$v.finish_time.$touch(),this.finish_time_was_clean=!1},onFinishTimeBlur:function(){this.finish_time_was_clean&&(this.finish_time=void 0),this.$v.finish_time.$touch()},timeToApproximation:function(t){let e=l()(t,"HH:mm:ss");if(!e.isValid())return t;let i=_.find(this.timeList,t=>(l()(t.value,"HH:mm")-e)/36e5>-.125);return i?i.value:t}},filters:{formatDate:function(t){return l()(t,"YYYY-MM-DD").format("MMM Do")}}},d=i("2877"),c=i("6544"),m=i.n(c),u=i("c6a6"),h=i("8336"),f=i("b0af"),v=i("99d9"),p=i("62ad"),g=i("169a"),b=i("4bd4"),S=i("132d"),T=i("0fd9"),$=i("8654"),y=i("a844"),k=Object(d.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{outlined:"",color:"grey",small:""}},a),[i("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add\n        ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Add a New Shift, "+t._s(t._f("formatDate")(t.periodDate)))]),i("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),i("v-card-text",[i("v-row",{attrs:{align:"stretch"}},[i("v-col",{attrs:{cols:"12"}},[i("v-form",{ref:"form"},[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",label:"Start Time*",hint:"Example: 08:00",required:"",items:t.timeList,"item-text":"name","item-value":"value","error-messages":t.startTimeErrors,"open-on-clear":"",dense:""},on:{focus:t.onStartTimeFocused,input:t.onStartTimeChanged,blur:t.onStartTimeBlur},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",label:"Finish Time*",hint:"Example: 18:30",required:"",items:t.timeList,"item-text":"name","item-value":"value","error-messages":t.finishTimeErrors,"open-on-clear":"",dense:""},on:{focus:t.onFinishTimeFocused,input:t.onFinishTimeChanged,blur:t.onFinishTimeBlur},model:{value:t.finish_time,callback:function(e){t.finish_time=e},expression:"finish_time"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-autocomplete",{attrs:{"prepend-icon":"mdi-wallet-giftcard",label:"Add Driver Bonus","item-text":"name","item-value":"id",items:t.bonus_list,required:"",outlined:"",dense:""},model:{value:t.cost_bonus,callback:function(e){t.cost_bonus=e},expression:"cost_bonus"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-text-field",{attrs:{type:"number","prepend-icon":"mdi-gas-station",label:"Add Fuel Bonus",required:"",outlined:"",dense:""},model:{value:t.const_fuel_bonus,callback:function(e){t.const_fuel_bonus=e},expression:"const_fuel_bonus"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-textarea",{attrs:{outlined:"",label:"Comment"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1),i("div",{staticClass:"d-flex justify-center"},[i("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-upload")]),t._v("Create "),i("span",{staticClass:"hidden-sm-and-down"},[t._v("Shift")])],1),i("v-btn",{staticClass:"mr-4",attrs:{loading:t.localLoading,depressed:""},on:{click:t.clear}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-rotate-left")]),i("span",{staticClass:"hidden-sm-and-down"},[t._v("Clear")])],1),i("v-btn",{staticClass:"mr-4 warning",attrs:{loading:t.localLoading,depressed:""},on:{click:function(e){t.dialog=!1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("Cancel")],1)],1)],1)],1)],1)],1)],1):t._e()],1)}),[],!1,null,"1eabd7dd",null);e.a=k.exports;m()(k,{VAutocomplete:u.a,VBtn:h.a,VCard:f.a,VCardText:v.b,VCardTitle:v.c,VCol:p.a,VDialog:g.a,VForm:b.a,VIcon:S.a,VRow:T.a,VTextField:$.a,VTextarea:y.a})},3362:function(t,e,i){"use strict";var a=i("c1df"),s=i.n(a),n=i("2ef0"),o=i("1168"),l={name:"CopyShiftsModal",props:["shiftList","intervalId","dateRangeSelected"],data:()=>({readOnly:!1,localLoading:!1,dialog:!1,date_range_selected:null,INTERVAL_DAY:o.b}),watch:{dialog:function(t){if(t){let t=s()();switch(this.isShiftsEmpty||(t=s()(this.$props.shiftList[0].period_date,"YYYY-MM-DD")),this.$props.intervalId){case o.b:alert("unready");break;case o.e:t.add(1,"weeks");break;case o.d:t.add(2,"weeks");break;case o.c:t.add(1,"months")}this.$data.date_range_selected=this.dateRangeSelected,this.dateRangeSelect()}}},created(){this.$data.date_range_selected=this.dateRangeSelected},updated(){},computed:{isShiftsEmpty(){return n.isEmpty(this.$props.shiftList)},shiftsRangeText(){if(this.isShiftsEmpty)return"no shifts";let t=this.dayToRange(this.dateRangeSelected,this.$props.intervalId);return o.a.dateRangeText(t)}},methods:{submit(){this.localLoading=!0,this.$store.dispatch("copyShiftsFree",{shifts:this.$props.shiftList,to_date:this.$data.date_range_selected[0]}).then(()=>{this.dialog=!1}).finally(()=>{this.localLoading=!1})},dateRangeSelect:async function(){this.$data.date_range_selected=this.dayToRange(this.$data.date_range_selected[0],this.$props.intervalId)},dayToRange:function(t,e){return o.a.dayToRange(t,e)},dateRangeText:function(t){return"to: "+o.a.dateRangeText(t)}}},r=i("2877"),d=i("6544"),c=i.n(d),_=i("8336"),m=i("b0af"),u=i("99d9"),h=i("62ad"),f=i("2e4b"),v=i("169a"),p=i("132d"),g=i("0fd9"),b=Object(r.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"450px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{disabled:t.INTERVAL_DAY==t.intervalId}},a),[i("v-icon",[t._v("mdi-content-copy")]),t._v(" Copy Shifts\n        ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Copy shifts from: "+t._s(t.shiftsRangeText))]),i("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),i("v-row",[i("v-col",[t._v("\n                    Please select period where to copy current shifts:\n                ")])],1),i("v-row",[i("v-col",[i("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1",range:"","title-date-format":t.dateRangeText},on:{"click:date":t.dateRangeSelect},model:{value:t.date_range_selected,callback:function(e){t.date_range_selected=e},expression:"date_range_selected"}})],1)],1),i("v-row",[i("v-col",[i("div",{staticClass:"d-flex justify-center"},[i("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:t.localLoading||t.isShiftsEmpty,loading:t.localLoading},on:{click:t.submit}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-content-copy")]),t._v("Make Copy of Shifts")],1),i("v-btn",{staticClass:"warning",attrs:{loading:t.localLoading,depressed:""},on:{click:function(e){t.dialog=!1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("Cancel")],1)],1)])],1)],1):t._e()],1)}),[],!1,null,"138e6222",null);e.a=b.exports;c()(b,{VBtn:_.a,VCard:m.a,VCardTitle:u.c,VCol:h.a,VDatePicker:f.a,VDialog:v.a,VIcon:p.a,VRow:g.a})},"869f":function(t,e,i){"use strict";var a=i("1dce"),s=i("b5ae"),n=i("2f62"),o=i("c1df"),l=i.n(o),r={mixins:[a.validationMixin],name:"EditShiftModal",props:["shiftItem"],validations:{start_time:{required:s.required},finish_time:{required:s.required},comment:{}},data:()=>({readOnly:!1,localLoading:!1,dialog:!1,period_date:"",start_time:"",finish_time:"",cost_per_hour:"",cost_total:"",cost_bonus:0,const_fuel_bonus:0,cost_extra_bonus:0,comment:"",area_selected:void 0,is_initialized:!1,bonus_list:[{id:0,name:"no bonus"},{id:10,name:"+£10"},{id:20,name:"+£20"}]}),updated(){this.$data.dialog&&!this.$data.is_initialized&&(this.$data.period_date=this.$props.shiftItem.period_date,this.$data.start_time=this.$props.shiftItem.start_time.substr(0,5),this.$data.finish_time=this.$props.shiftItem.finish_time.substr(0,5),this.$data.cost_bonus=+parseFloat(this.$props.shiftItem.cost_bonus),this.$data.const_fuel_bonus=+parseFloat(this.$props.shiftItem.const_fuel_bonus),this.$data.cost_extra_bonus=+parseFloat(this.$props.shiftItem.cost_extra_bonus),this.$data.comment=this.$props.shiftItem.comment,this.$data.is_initialized=!0)},computed:{...Object(n.c)(["timeList"]),startTimeErrors(){const t=[];return this.$v.start_time.$dirty?(!this.$v.start_time.required&&t.push("Start Time is required."),!l()(this.$data.start_time,"HH:mm").isValid()&&t.push("Start Time invalid format."),t):t},finishTimeErrors(){const t=[];return this.$v.finish_time.$dirty?(!this.$v.finish_time.required&&t.push("Start Time is required."),!l()(this.$data.finish_time,"HH:mm").isValid()&&t.push("Finish Time invalid format."),t):t},contactNameErrors(){const t=[];return this.$v.contactName.$dirty?(!this.$v.contactName.required&&t.push("Contact Name is required."),t):t},shiftLength:function(){let t=l()(this.$data.finish_time,"HH:mm"),e=l()(this.$data.start_time,"HH:mm");return t.isValid()&&e.isValid()?(this.$data.finish_time<this.$data.start_time&&t.add(1,"days"),((t-e)/6e4/60).toFixed(2)):0}},methods:{submit(){if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){const t={id:this.$props.shiftItem.id,period_date:this.$data.period_date,start_time:this.$data.start_time,finish_time:this.$data.finish_time,meal_time:0,rest_time:0,cost_per_hour:0,cost_total:0,cost_bonus:this.$data.cost_bonus,const_fuel_bonus:this.$data.const_fuel_bonus,cost_extra_bonus:this.$data.cost_extra_bonus,comment:this.$data.comment};this.$store.dispatch("editFreeShift",t).then(()=>{this.dialog=!1}).finally(()=>{this.localLoading=!1})}},clear(){this.$v.$reset(),this.$data.period_date=this.$props.shiftItem.period_date,this.$data.start_time=this.$props.shiftItem.start_time.substr(0,5),this.$data.finish_time=this.$props.shiftItem.finish_time.substr(0,5),this.$data.cost_per_hour=this.$props.shiftItem.cost_per_hour,this.$data.cost_total=this.$props.shiftItem.cost_total,this.$data.cost_bonus=+this.$props.shiftItem.cost_bonus,this.$data.const_fuel_bonus=+this.$props.shiftItem.const_fuel_bonus,this.$data.cost_extra_bonus=+this.$props.shiftItem.cost_extra_bonus,this.$data.comment=this.$props.shiftItem.comment}},filters:{formatDate:function(t){return l()(t,"YYYY-MM-DD").format("MMM Do")}}},d=i("2877"),c=i("6544"),_=i.n(c),m=i("c6a6"),u=i("8336"),h=i("b0af"),f=i("99d9"),v=i("62ad"),p=i("169a"),g=i("4bd4"),b=i("132d"),S=i("da13"),T=i("5d23"),$=i("0fd9"),y=i("8654"),k=i("a844"),x=Object(d.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-list-item",{on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[i("v-list-item-title",[t._v("Edit")])],1),i("v-dialog",{attrs:{width:"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Edit Shift, "+t._s(t._f("formatDate")(t.period_date)))]),i("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),i("v-card-text",[i("v-row",{attrs:{align:"stretch"}},[i("v-col",{attrs:{cols:"12"}},[i("v-form",{ref:"form"},[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",label:"Start Time*",hint:"Example: 08:00",required:"",items:t.timeList,"item-text":"name","item-value":"value","error-messages":t.startTimeErrors,dense:""},on:{input:function(e){return t.$v.start_time.$touch()},blur:function(e){return t.$v.start_time.$touch()}},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-autocomplete",{staticClass:"hide-time-picker-indicator",attrs:{type:"time","menu-props":"auto, overflowY","clear-icon":"mdi-close","prepend-icon":"mdi-clock-outline",clearable:"",outlined:"",label:"Finish Time*",hint:"Example: 18:30",required:"",items:t.timeList,"item-text":"name","item-value":"value","error-messages":t.finishTimeErrors,dense:""},on:{input:function(e){return t.$v.finish_time.$touch()},blur:function(e){return t.$v.finish_time.$touch()}},model:{value:t.finish_time,callback:function(e){t.finish_time=e},expression:"finish_time"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-autocomplete",{attrs:{"prepend-icon":"mdi-wallet-giftcard",label:"Add Driver Bonus","item-text":"name","item-value":"id",items:t.bonus_list,required:"",outlined:"",dense:""},model:{value:t.cost_bonus,callback:function(e){t.cost_bonus=e},expression:"cost_bonus"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-text-field",{attrs:{type:"number","prepend-icon":"mdi-gas-station",label:"Add Fuel Bonus",required:"",outlined:"",dense:""},model:{value:t.const_fuel_bonus,callback:function(e){t.const_fuel_bonus=e},expression:"const_fuel_bonus"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-textarea",{attrs:{outlined:"",label:"Comment"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1),i("div",{staticClass:"d-flex justify-center"},[i("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-upload")]),t._v("Save")],1),i("v-btn",{staticClass:"mr-4",attrs:{loading:t.localLoading,depressed:""},on:{click:t.clear}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-rotate-left")]),i("span",{staticClass:"hidden-sm-and-down"},[t._v("Restore")])],1),i("v-btn",{staticClass:"mr-4 warning",attrs:{loading:t.localLoading,depressed:""},on:{click:function(e){t.dialog=!1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("Cancel")],1)],1)],1)],1)],1)],1)],1):t._e()],1)],1)}),[],!1,null,"6a2f0c44",null);e.a=x.exports;_()(x,{VAutocomplete:m.a,VBtn:u.a,VCard:h.a,VCardText:f.b,VCardTitle:f.c,VCol:v.a,VDialog:p.a,VForm:g.a,VIcon:b.a,VListItem:S.a,VListItemTitle:T.c,VRow:$.a,VTextField:y.a,VTextarea:k.a})},"8ee0":function(t,e,i){},"94d4":function(t,e,i){"use strict";var a=i("c1df"),s=i.n(a),n=i("2b0e"),o=i("2ef0"),l=i("2f62"),r=i("156f"),d=i("1168"),c={name:"Schedule",props:["restaurantId"],data:()=>({scroll_panel_height:window.innerHeight-122,TYPE_AREA:r.b,TYPE_RESTAURANT:r.c,STATUS_NEW:d.i,STATUS_PUBLICATED:d.j,STATUS_DRAFT:d.g,STATUS_FREE:d.h,STATUS_STALE:d.k,STATUS_ASSIGNED:d.f,INTERVAL_DAY:d.b,INTERVAL_WEEK:d.e,INTERVAL_TWO_WEEK:d.d,INTERVAL_MONTH:d.c,interval_list:[{id:d.b,name:"Day",$isDisabled:!0},{id:d.e,name:"Week"},{id:d.d,name:"2-Week"}],date_range_selected:null,menu_date_picker:!1,thisRestaurantId:null,localLoading:!1,moderatePeriodLoading:!1,restaurant_selected_index:0,location_selected:void 0,interval_selected_id:d.e,shift_to_copy:void 0,totals:{total_shifts:0,filled_hours:0,published:0,draft:0,unpublished:0,free:0},is_mobile_version:!1,restaurant_id_mobile_selected:void 0,restaurant_item_mobile_selected:void 0,period_list_loading:{}}),computed:{...Object(l.c)(["areas","locations","restaurants","drivers"]),locations_list(){return this.locations},restaurant_list(){return this.restaurants},driver_list(){return this.drivers},restaurantListSearched(){let t=JSON.parse(localStorage.getItem("user")),e=[];return o.each(t.restaurants,i=>{e.push({id:i.id,name:i.name,contact_name:i.contact_name,email:t.email})}),e},shift_list(){return this.$store.getters.shifts},shiftListSearched(){return this.shift_list},area_list(){return this.$store.getters.areas},period_list(){if(!this.$data.date_range_selected)return;let t=this.shiftListSearched,e=s()(this.$data.date_range_selected[0],"YYYY-MM-DD"),i=0,a=[];for(;e.format("YYYY-MM-DD")<=this.$data.date_range_selected[1];){if(31==i){alert("Invalid date range: "+this.$data.date_range_selected[0]+" ~ "+this.$data.date_range_selected[1]);break}let s=e.format("YYYY-MM-DD"),n=o.groupBy(o.filter(t,t=>t.period_date==s),"restaurant_id"),l={date:s,restaurant_shifts:n};a.push(l),this.period_list_loading[s]||(this.period_list_loading[s]=!1),e.add(1,"days"),i++}return a},draftShifts(){return o.filter(this.shiftListSearched,t=>t.status==d.g).length},unpublishedShifts(){return o.filter(this.shiftListSearched,t=>t.status==d.i).length},freeShifts(){return o.filter(this.shiftListSearched,t=>!t.driver_id).length}},watch:{shiftListSearched:function(t){if(0!=t.length){this.$data.totals.total_shifts=t.length,this.$data.totals.filled_hours=0,this.$data.totals.published=0,this.$data.totals.draft=0,this.$data.totals.unpublished=0,this.$data.totals.free=0;for(let e=0;e<t.length;e++)this.$data.totals.filled_hours+=this.getShiftHours(t[e]),t[e].status==d.j?this.$data.totals.published+=1:t[e].status==d.g?this.$data.totals.draft+=1:this.$data.totals.unpublished+=1,t[e].status_assigned==d.h&&(this.$data.totals.free+=1)}}},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize)}),this.$store.dispatch("fetchDrivers").then(()=>{let t=s()();this.$data.date_range_selected=[t.startOf("isoWeek").format("YYYY-MM-DD"),null],this.dateRangeSelect()}),!this.restaurant_item_mobile_selected&&this.restaurantListSearched.length>0&&(this.restaurant_id_mobile_selected=this.restaurantListSearched[0].id,this.onSelectRestaurantMobile(this.restaurant_id_mobile_selected))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},created(){let t=!1;var e;e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),this.is_mobile_version=t},methods:{onResize(){this.scroll_panel_height=window.innerHeight-122},dateRangeSelect:async function(){this.$data.date_range_selected=this.dayToRange(this.$data.date_range_selected[0],this.$data.interval_selected_id),await this.$store.dispatch("fetchShifts",{period_date_from:this.$data.date_range_selected[0],period_date_to:this.$data.date_range_selected[1],with_timesheet:"1"})},getDriverFullName:function(t){if(t.status_assigned==d.h)return"Open shift";let e=o.find(this.driver_list,e=>e.id==t.driver_id);return e?e.full_name:"Claimed"},getDriverPhone:function(t){if(s()(t.period_date).format("YYYY-MM-DD")!=s()().format("YYYY-MM-DD"))return;let e=o.find(this.driver_list,e=>e.id==t.driver_id);return e?e.phone:void 0},onSelectInterval:function(){if(this.$data.interval_selected_id==d.e||this.$data.interval_selected_id==d.d||this.$data.interval_selected_id==d.c){let t=s()(this.$data.date_range_selected[0],"YYYY-MM-DD");this.$data.date_range_selected=[t.startOf("isoWeek").format("YYYY-MM-DD"),null]}if(this.$data.interval_selected_id==d.b){let t=s()();this.$data.date_range_selected=[t.format("YYYY-MM-DD"),null]}n.a.nextTick(()=>{this.dateRangeSelect()})},onSelectRestaurantMobile:function(t){this.restaurant_item_mobile_selected=o.find(this.restaurantListSearched,e=>e.id==t)},onPreviosRange:function(){let t=s()(this.$data.date_range_selected[0],"YYYY-MM-DD");switch(this.$data.interval_selected_id){case d.b:t.subtract(1,"day");break;case d.e:t.subtract(1,"weeks");break;case d.d:t.subtract(2,"weeks");break;case d.c:t.subtract(1,"months")}this.$data.date_range_selected=[t.format("YYYY-MM-DD"),null],this.dateRangeSelect()},onNextRange:function(){let t=s()(this.$data.date_range_selected[0],"YYYY-MM-DD");switch(this.$data.interval_selected_id){case d.b:t.add(1,"days");break;case d.e:t.add(1,"weeks");break;case d.d:t.add(2,"weeks");break;case d.c:t.add(1,"months")}this.$data.date_range_selected=[t.format("YYYY-MM-DD"),null],this.dateRangeSelect()},removeShift:function(t){confirm("Remove shift "+t.period_date+"?")&&(t.localLoading=!0,this.$store.dispatch("removeFreeShift",t).then(()=>{}).finally(()=>{this.localLoading=!1}),this.$data.shift_to_copy=void 0)},copyShift:function(t){this.$data.shift_to_copy=t},pasteShift:function(t,e){let i=this;i.$data.period_list_loading[e.date]=!0,i.localLoading=!0;let a=i.$data.shift_to_copy;i.$data.shift_to_copy=void 0,n.a.nextTick(()=>{i.$data.shift_to_copy=a;const s={restaurant_id:t.id,period_date:e.date,//!
start_time:i.$data.shift_to_copy.start_time,finish_time:i.$data.shift_to_copy.finish_time,meal_time:0,rest_time:0,cost_per_hour:0,//!
cost_total:0,//!
comment:i.$data.shift_to_copy.comment,cost_bonus:0,const_fuel_bonus:0,cost_extra_bonus:0};let n=!window.event.shiftKey;i.$store.dispatch("createNewFreeShift",s).then(()=>{n&&(i.$data.shift_to_copy=void 0)}).finally(()=>{i.period_list_loading[e.date]=!1,i.localLoading=!1})})},changeShiftStatus:function(t,e){t.status=e,this.localLoading=!0,t.localLoading=!0,this.$store.dispatch("editFreeShift",t).then(()=>{}).finally(()=>{this.localLoading=!1,t.localLoading=!1}),this.$data.shift_to_copy=void 0},moderatePeriodShifts:function(){if(!confirm("Publish "+this.draftShifts+" shifts?"))return;let t=o.filter(this.shiftListSearched,t=>t.status==d.g);this.localLoading=!0,this.moderatePeriodLoading=!0,o.each(t,t=>{t.localLoading=!0}),this.$store.dispatch("moderateFreeShifts",t).then(()=>{}).finally(()=>{this.localLoading=!1,this.moderatePeriodLoading=!1,o.each(t,t=>{t.localLoading=!1})}),this.$data.shift_to_copy=void 0},dayToRange:function(t,e){return d.a.dayToRange(t,e)},dateRangeText:function(t){return d.a.dateRangeText(t)},getShiftHours:function(t){let e=s()(t.finish_time,"HH:mm"),i=s()(t.start_time,"HH:mm");return e.isValid()&&i.isValid()?(t.finish_time<t.start_time&&e.add(1,"days"),(e-i)/6e4/60):0}},filters:{formatFloat:function(t){return Number(t).toFixed(2)},formatHours:function(t){return Number(t).toFixed(1)},moment:function(t){return s()(t,"YYYY-MM-DD").format("MMM Do")},formatTime:function(t){return s()(t,"HH:mm").format("HH:mm")}}},_=(i("9988"),i("1cf0"),i("2877")),m=i("6544"),u=i.n(m),h=i("40dc"),f=i("8336"),v=i("b0af"),p=i("62ad"),g=i("2e4b"),b=i("ce7e"),S=i("ce87"),T=i("132d"),$=i("8860"),y=i("da13"),k=i("5d23"),x=i("e449"),w=i("0fd9"),C=i("b974"),L=i("2fa4"),A=i("71d9"),D=i("3a2f"),E=Object(_.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",[t.is_mobile_version?t._e():i("v-col",{staticClass:"pt-0 pl-1 pr-1 pb-0"},[i("v-card",{staticStyle:{"margin-bottom":"6px"},attrs:{color:"grey lighten-4",flat:"",tile:""}},[i("v-app-bar",{staticStyle:{"margin-top":"70px"},attrs:{dense:"",fixed:"",color:"elevation-1"}},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{staticClass:"d-flex pa-0",staticStyle:{"flex-grow":"1","justify-content":"center"}},[i("div",{staticStyle:{"flex-wrap":"nowrap",display:"flex"}},[i("v-btn",{on:{click:t.onPreviosRange}},[i("v-icon",[t._v("mdi-menu-left")])],1),i("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({},a),[t._v("\n                    "+t._s(t.dateRangeText(t.date_range_selected))+"\n                  ")])]}}],null,!1,1263868741),model:{value:t.menu_date_picker,callback:function(e){t.menu_date_picker=e},expression:"menu_date_picker"}},[i("v-card",{attrs:{"max-width":"346px"}},[i("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1",range:"","title-date-format":t.dateRangeText,"hide-details":""},on:{"click:date":t.dateRangeSelect},model:{value:t.date_range_selected,callback:function(e){t.date_range_selected=e},expression:"date_range_selected"}}),i("v-divider")],1)],1),i("v-btn",{on:{click:t.onNextRange}},[i("v-icon",[t._v("mdi-menu-right")])],1)],1),i("v-select",{staticStyle:{"max-width":"150px","margin-left":"16px"},attrs:{items:t.interval_list,"item-text":"name","item-value":"id",dense:"",solo:"","hide-details":""},on:{change:t.onSelectInterval},model:{value:t.interval_selected_id,callback:function(e){t.interval_selected_id=e},expression:"interval_selected_id"}})],1)],1),i("div",{staticStyle:{"flex-wrap":"nowrap",display:"flex"}},[i("copy-shifts-restaurant-modal",{attrs:{shiftList:t.shiftListSearched,intervalId:t.interval_selected_id,dateRangeSelected:t.date_range_selected}}),i("v-btn",{staticClass:"blue lighten-3",attrs:{loading:t.moderatePeriodLoading},on:{click:t.moderatePeriodShifts}},[i("v-icon",[t._v("mdi-post")]),t._v(" Publish shifts ["+t._s(t.draftShifts)+"]\n          ")],1)],1)],1)],1),i("div",{staticClass:"d-flex mb-auto",attrs:{flat:"",tile:""}},[i("v-card",{staticClass:"right-panel-restaurant-calendar",attrs:{color:"elevation-1",height:t.scroll_panel_height-31}},[i("v-card",{staticClass:"calendar-v-card-header",class:{"v-card-day":t.interval_selected_id==t.INTERVAL_DAY,"v-card-week":t.interval_selected_id==t.INTERVAL_WEEK,"v-card-two-week":t.interval_selected_id==t.INTERVAL_TWO_WEEK,"v-card-month":t.interval_selected_id==t.INTERVAL_MONTH},attrs:{color:"elevation-1"}},[i("v-row",{attrs:{"no-gutters":""}},t._l(t.period_list,(function(e){return i("v-col",{key:e.date,staticClass:"text-center"},[t._v("\n              "+t._s(t._f("moment")(e.date))+"\n            ")])})),1)],1),t._l(t.restaurantListSearched,(function(e,a){return i("v-card",{key:a,staticClass:"calendar-v-card-body",class:{"v-card-day":t.interval_selected_id==t.INTERVAL_DAY,"v-card-week":t.interval_selected_id==t.INTERVAL_WEEK,"v-card-two-week":t.interval_selected_id==t.INTERVAL_TWO_WEEK,"v-card-month":t.interval_selected_id==t.INTERVAL_MONTH},attrs:{color:"elevation-0","no-gutters":""}},[i("v-card",{attrs:{color:"grey lighten-2"}},[i("v-col",[t._v(t._s(e.name))])],1),i("v-row",{attrs:{align:"stretch"}},t._l(t.period_list,(function(a){return i("v-col",{key:a.date,staticClass:"text-center"},[i("v-hover",{staticStyle:{height:"100%"},attrs:{"open-delay":"100"},scopedSlots:t._u([{key:"default",fn:function(s){var n=s.hover;return[i("div",[i("new-shift-restaurant-modal",{attrs:{restaurantItem:e,periodDate:a.date}}),t.shift_to_copy&&(n||t.period_list_loading[a.date])?i("v-tooltip",{attrs:{bottom:"","nudge-left":"52","nudge-bottom":"4"},scopedSlots:t._u([{key:"activator",fn:function(s){var n=s.on;return[i("v-btn",t._g({attrs:{outlined:"",small:"",color:"grey",loading:t.period_list_loading[a.date]},on:{click:function(i){return t.pasteShift(e,a)}}},n),[i("v-icon",{attrs:{left:""}},[t._v("mdi-content-paste")]),t._v("Paste\n                        ")],1)]}}],null,!0)},[i("span",[t._v("Hold the "),i("span",{staticClass:"yellow--text"},[t._v('"Shift"')]),t._v(" key to continue copying multiple times")])]):t._e(),t._l(a.restaurant_shifts[e.id],(function(e){return i("v-menu",{key:e.date,scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[i("v-btn",t._g({staticClass:"shift-button_item",class:{"light-green lighten-3":e.status==t.STATUS_PUBLICATED&&!e.status_assigned==t.STATUS_STALE,"yellow lighten-3":e.status_assigned==t.STATUS_FREE,"red darken-3":e.status_assigned==t.STATUS_STALE},attrs:{tile:"",small:"",block:"",loading:e.localLoading}},s),[i("div",[i("v-tooltip",{attrs:{left:"","nudge-left":"50"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[i("span",t._g({},s),[t._v("\n                                      ("+t._s(t._f("formatTime")(e.start_time))+" - "+t._s(t._f("formatTime")(e.finish_time))+")\n                                      "),e.status==t.STATUS_PUBLICATED?i("v-icon",{staticStyle:{"font-size":"14px"}},[t._v("mdi-eye")]):t._e(),e.status==t.STATUS_NEW?i("v-icon",{staticStyle:{"font-size":"14px",color:"red"}},[t._v("mdi-eye-off")]):t._e(),e.status==t.STATUS_DRAFT?i("v-icon",{staticStyle:{"font-size":"14px",color:"gray"}},[t._v("mdi-eye-off")]):t._e()],1)]}}],null,!0)},[e.comment?i("span",[t._v(t._s(e.comment))]):t._e(),e.comment?t._e():i("span",[t._v("(empty)")])]),null!=e.timesheet?i("v-tooltip",{attrs:{bottom:"","nudge-left":"52","nudge-bottom":"10"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("span",t._g({},a),[i("v-icon",{staticStyle:{"font-size":"14px",color:"#FF5722"}},[t._v("mdi-lock")])],1)]}}],null,!0)},[i("span",[t._v("Timesheet exists by this shift")])]):t._e(),i("v-tooltip",{attrs:{bottom:"","nudge-left":"0","nudge-bottom":"0"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[i("span",t._g({},t.getDriverPhone(e)&&s),[i("div",[t._v("\n                                        "+t._s(t.getDriverFullName(e))+"\n                                      ")])])]}}],null,!0)},[i("span",[t._v("\n                                    Phone: "+t._s(t.getDriverPhone(e))+"\n                                  ")])])],1)])]}}],null,!0)},[i("v-list",[i("v-list-item",{on:{click:function(i){return t.copyShift(e)}}},[i("v-list-item-title",[t._v("Copy")])],1),null==e.timesheet?i("edit-shift-restaurant-modal",{attrs:{shiftItem:e}}):t._e(),e.status!=t.STATUS_NEW&&e.status!=t.STATUS_DRAFT||e.status_assigned!=t.STATUS_FREE||null!=e.timesheet?t._e():i("v-list-item",{on:{click:function(i){return t.removeShift(e)}}},[i("v-list-item-title",[t._v("Remove")])],1),e.status==t.STATUS_DRAFT?i("v-list-item",{on:{click:function(i){return t.changeShiftStatus(e,t.STATUS_NEW)}}},[i("v-list-item-title",[t._v("Publish")])],1):t._e(),e.status==t.STATUS_NEW&&null==e.timesheet?i("v-list-item",{on:{click:function(i){return t.changeShiftStatus(e,t.STATUS_DRAFT)}}},[i("v-list-item-title",[t._v("Unpublish")])],1):t._e()],1)],1)}))],2)]}}],null,!0)})],1)})),1)],1)}))],2)],1),i("v-card",{staticStyle:{"margin-bottom":"-5px"},attrs:{color:"grey lighten-4",flat:"",tile:""}},[i("v-app-bar",{staticStyle:{"margin-left":"0px"},attrs:{fixed:"",bottom:"",height:"36px",color:"elevation-1 tool-bar__totals-panel"}},[i("v-spacer"),i("div",[i("v-btn",{staticClass:"shift-button_item",attrs:{tile:"",small:""}},[i("div",{staticClass:"shift-total_value"},[t._v(t._s(t.totals.published))]),i("div",{staticClass:"shift-total_label"},[t._v("Published Shifts")])]),i("v-btn",{staticClass:"shift-button_item",attrs:{tile:"",small:""}},[i("div",{staticClass:"shift-total_value"},[t._v(t._s(t.totals.unpublished))]),i("div",{staticClass:"shift-total_label"},[t._v("Unpublished Shifts")])]),i("v-btn",{staticClass:"shift-button_item",attrs:{tile:"",small:""}},[i("div",{staticClass:"shift-total_value"},[t._v(t._s(t.totals.draft))]),i("div",{staticClass:"shift-total_label"},[t._v("Draft Shifts")])]),i("v-btn",{staticClass:"shift-button_item",attrs:{tile:"",small:""}},[i("div",{staticClass:"shift-total_value"},[t._v(t._s(t.totals.free))]),i("div",{staticClass:"shift-total_label"},[t._v("Open Shifts")])])],1),i("v-spacer"),i("div",[i("v-btn",{staticClass:"shift-button_item",attrs:{tile:"",small:""}},[i("div",{staticClass:"shift-total_value"},[t._v(t._s(t.totals.total_shifts))]),i("div",{staticClass:"shift-total_label"},[t._v("Total Shifts")])]),i("v-btn",{staticClass:"shift-button_item",attrs:{tile:"",small:""}},[i("div",{staticClass:"shift-total_value"},[t._v(t._s(t._f("formatHours")(t.totals.filled_hours)))]),i("div",{staticClass:"shift-total_label"},[t._v("Filled Hours")])])],1)],1)],1)],1),t.is_mobile_version?i("v-col",[i("v-card",{staticStyle:{"margin-bottom":"6px"},attrs:{color:"grey lighten-4",flat:"",tile:""}},[i("v-toolbar",{attrs:{dense:"",color:"elevation-1 tool-bar__actions-panel header-btn-panel header-btn-panel-mobile",height:"40"}},[i("v-row",{staticClass:"d-flex mb-auto",attrs:{"no-gutters":""}},[i("div",{staticClass:"menu-date__picker-mobile"},[i("v-btn",{on:{click:t.onPreviosRange}},[i("v-icon",[t._v("mdi-menu-left")])],1),i("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({},a),[t._v("\n                  "+t._s(t.dateRangeText(t.date_range_selected))+"\n                ")])]}}],null,!1,3587149381),model:{value:t.menu_date_picker,callback:function(e){t.menu_date_picker=e},expression:"menu_date_picker"}},[i("v-card",{attrs:{"max-width":"346px"}},[i("v-date-picker",{attrs:{scrollable:"",actions:"","full-width":"","first-day-of-week":"1",range:"","title-date-format":t.dateRangeText},on:{"click:date":t.dateRangeSelect},model:{value:t.date_range_selected,callback:function(e){t.date_range_selected=e},expression:"date_range_selected"}}),i("v-divider")],1)],1),i("v-btn",{on:{click:t.onNextRange}},[i("v-icon",[t._v("mdi-menu-right")])],1)],1),i("div",{staticClass:"menu-interval-changer-mobile"},[i("v-select",{attrs:{items:t.interval_list,"item-text":"name","item-value":"id",dense:"",solo:"","hide-details":""},on:{change:t.onSelectInterval},model:{value:t.interval_selected_id,callback:function(e){t.interval_selected_id=e},expression:"interval_selected_id"}})],1),i("div",{staticClass:"menu-restaurant-changer-mobile"},[i("v-select",{attrs:{items:t.restaurantListSearched,"item-text":"name","item-value":"id",dense:"",solo:"","hide-details":""},on:{change:t.onSelectRestaurantMobile},model:{value:t.restaurant_id_mobile_selected,callback:function(e){t.restaurant_id_mobile_selected=e},expression:"restaurant_id_mobile_selected"}})],1)]),i("v-row",[i("v-col",[i("copy-shifts-restaurant-modal",{attrs:{shiftList:t.shiftListSearched,intervalId:t.interval_selected_id}}),i("v-btn",{staticClass:"blue lighten-3 ml-1",attrs:{loading:t.moderatePeriodLoading},on:{click:t.moderatePeriodShifts}},[i("v-icon",[t._v("mdi-post")]),t._v(" Publish shifts ["+t._s(t.draftShifts)+"]\n            ")],1)],1)],1),i("v-spacer")],1)],1),i("div",{staticClass:"d-flex mb-auto",attrs:{flat:"",tile:""}},[i("v-card",{staticClass:"right-panel-calendar-mobile",attrs:{color:"elevation-0"}},[i("v-card",{staticClass:"calendar-v-card-header",attrs:{color:"elevation-1"}},t._l(t.period_list,(function(e){return i("v-row",{key:e.date},[i("v-col",{staticClass:"text-center"},[i("v-card",{staticClass:"calendar-v-card-body",attrs:{color:"elevation-0"}},[t.restaurant_item_mobile_selected?i("v-card",{attrs:{color:"grey lighten-2"}},[i("v-col",[t._v(t._s(t._f("moment")(e.date)))])],1):t._e(),i("v-row",{attrs:{align:"stretch"}},[i("v-col",{staticClass:"text-center"},[i("new-shift-restaurant-modal",{attrs:{restaurantItem:t.restaurant_item_mobile_selected,periodDate:e.date}}),t.shift_to_copy?i("v-btn",{attrs:{outlined:"",small:"",color:"grey",loading:t.period_list_loading[e.date]},on:{click:function(i){return t.pasteShift(t.restaurant_item_mobile_selected,e)}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-content-paste")]),t._v("Paste\n                    ")],1):t._e(),t._l(e.restaurant_shifts[t.restaurant_item_mobile_selected.id],(function(e){return i("v-menu",{key:e.date,scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[i("v-btn",t._g({staticClass:"shift-button_item shift-button_item-fix_height",class:{"light-green lighten-3":e.status==t.STATUS_PUBLICATED&&!e.status_assigned==t.STATUS_STALE,"yellow lighten-3":e.status_assigned==t.STATUS_FREE,"red darken-3":e.status_assigned==t.STATUS_STALE},attrs:{tile:"",small:"",block:"",loading:e.localLoading}},s),[i("div",[i("v-tooltip",{attrs:{left:"","nudge-left":"50"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[i("span",t._g({},s),[t._v("\n                                      ("+t._s(t._f("formatTime")(e.start_time))+" - "+t._s(t._f("formatTime")(e.finish_time))+")\n                                      "),e.status==t.STATUS_PUBLICATED?i("v-icon",{staticStyle:{"font-size":"14px"}},[t._v("mdi-eye")]):t._e(),e.status==t.STATUS_NEW?i("v-icon",{staticStyle:{"font-size":"14px",color:"red"}},[t._v("mdi-eye-off")]):t._e(),e.status==t.STATUS_DRAFT?i("v-icon",{staticStyle:{"font-size":"14px",color:"gray"}},[t._v("mdi-eye-off")]):t._e()],1)]}}],null,!0)},[e.comment?i("span",[t._v(t._s(e.comment))]):t._e(),e.comment?t._e():i("span",[t._v("(empty)")])]),null!=e.timesheet?i("v-tooltip",{attrs:{bottom:"","nudge-left":"52","nudge-bottom":"10"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("span",t._g({},a),[i("v-icon",{staticStyle:{"font-size":"14px",color:"#FF5722"}},[t._v("mdi-lock")])],1)]}}],null,!0)},[i("span",[t._v("Timesheet exists by this shift")])]):t._e(),i("div",[t._v("\n                                  "+t._s(t.getDriverFullName(e))),t.getDriverPhone(e)?i("span",[t._v(", phone: "+t._s(t.getDriverPhone(e)))]):t._e()])],1)])]}}],null,!0)},[i("v-list",[i("v-list-item",{on:{click:function(i){return t.copyShift(e)}}},[i("v-list-item-title",[t._v("Copy")])],1),null==e.timesheet?i("edit-shift-restaurant-modal",{attrs:{shiftItem:e}}):t._e(),e.status!=t.STATUS_NEW&&e.status!=t.STATUS_DRAFT||e.status_assigned!=t.STATUS_FREE||null!=e.timesheet?t._e():i("v-list-item",{on:{click:function(i){return t.removeShift(e)}}},[i("v-list-item-title",[t._v("Remove")])],1),e.status==t.STATUS_DRAFT?i("v-list-item",{on:{click:function(i){return t.changeShiftStatus(e,t.STATUS_NEW)}}},[i("v-list-item-title",[t._v("Publish")])],1):t._e(),e.status==t.STATUS_NEW&&null==e.timesheet?i("v-list-item",{on:{click:function(i){return t.changeShiftStatus(e,t.STATUS_DRAFT)}}},[i("v-list-item-title",[t._v("Unpublish")])],1):t._e()],1)],1)}))],2)],1)],1)],1)],1)})),1)],1)],1)],1):t._e()],1)}),[],!1,null,"26eddfc2",null);e.a=E.exports;u()(E,{VAppBar:h.a,VBtn:f.a,VCard:v.a,VCol:p.a,VDatePicker:g.a,VDivider:b.a,VHover:S.a,VIcon:T.a,VList:$.a,VListItem:y.a,VListItemTitle:k.c,VMenu:x.a,VRow:w.a,VSelect:C.a,VSpacer:L.a,VToolbar:A.a,VTooltip:D.a})},9988:function(t,e,i){"use strict";i("c0f5")},c0f5:function(t,e,i){}}]);