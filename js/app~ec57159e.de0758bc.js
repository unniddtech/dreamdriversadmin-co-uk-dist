(window.webpackJsonp=window.webpackJsonp||[]).push([["app~ec57159e"],{"3bf8":function(e,t,a){"use strict";var s=a("1dce"),i=a("b5ae"),r=a("bc3a"),o=a.n(r),n=a("2f62"),l=a("755e"),c=a("2ef0");const d={lat:51.4,lng:0};var u={mixins:[s.validationMixin],name:"NewLocationModal",props:["thisAreaData"],validations:{name:{required:i.required},email:{required:i.required,email:i.email},business_email:{required:i.required,email:i.email},telephone:{required:i.required},contactName:{required:i.required},area:{required:i.required},address:{required:i.required},standard_pay:{},weekend_pay:{},booking_fee:{},invoice_comission:{},meal:{},uniform:{},cash_orders:{},waiting_location:{},other:{},bonus_target:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[e=>!!e||"Please enter your password",e=>e&&e.length>=6||"Password should be at least six symbols long"],readOnly:!1,localLoading:!1,dialog:!1,name:"",email:"",business_email:"",address:"",map_latitude:void 0,map_longitude:void 0,contactName:"",telephone:"",postcode:"",area:null,areaData:null,password:"",standard_pay:null,weekend_pay:null,invoice_comission:null,booking_fee:null,send_invoice:1,map_center:d,map_zoom:12,map_marker:void 0,gmap_results:[],gmap_loading:!1,tab_edit_restaurant:void 0,default_comission:void 0,default_booking_fee:void 0,meal:void 0,uniform:void 0,cash_orders:void 0,waiting_location:void 0,other:void 0,bonus_target:void 0,file:void 0,imgRules:[e=>!(e&&e.size>1e7)||"File size should be less than 10 MB!"],logo_src:void 0}),created(){},updated(){if(this.thisAreaData&&(this.areaData=c.find(this.areas,e=>e.id==this.thisAreaData.id),this.area=this.areaData,this.readOnly=!0),!this.$data.dialog)return void(this.is_initialized=!1);if(this.is_initialized)return;let e=this,t=setInterval(()=>{clearInterval(t),this.is_initialized=!0;let a=c.find(e.options,e=>"map_center_default"==e.okey),s=JSON.parse(a.ovalue);e.map_center={lat:s.lat,lng:s.lng},e.map_zoom=s.map_zoom;let i=c.find(e.options,e=>"restaurants_standard_invoice_comission"==e.okey);i&&i.ovalue&&(e.default_comission=i.ovalue);let r=c.find(e.options,e=>"restaurants_standard_booking_fee"==e.okey);r&&r.ovalue&&(e.default_booking_fee=r.ovalue)},10)},computed:{...Object(n.c)(["areas","restaurateurs","options"]),selectErrors(){const e=[];return this.$v.area.$dirty?(!this.$v.area.required&&e.push("Area is required"),e):e},nameErrors(){const e=[];return this.$v.name.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.name.required&&e.push("Restaurant name is required."),e):e},contactNameErrors(){const e=[];return this.$v.contactName.$dirty?(!this.$v.contactName.required&&e.push("Contact Name is required."),e):e},emailErrors(){const e=[];return this.$v.email.$dirty?(!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required"),e):e},businessEmailErrors(){const e=[];return this.$v.business_email.$dirty?(!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("Business E-mail is required"),e):e},addressErrors(){const e=[];return this.$v.address.$dirty?(!this.$v.address.required&&e.push("Address is required"),e):e},telephoneErrors(){const e=[];return this.$v.telephone.$dirty?(!this.$v.telephone.required&&e.push("Telephone number is required"),e):e},areasList(){return this.areas},mealErrors(){const e=[];return this.$v.meal.$dirty,e},uniformErrors(){const e=[];return this.$v.uniform.$dirty,e},cash_ordersErrors(){const e=[];return this.$v.cash_orders.$dirty,e},waiting_locationErrors(){const e=[];return this.$v.waiting_location.$dirty,e},otherErrors(){const e=[];return this.$v.other.$dirty,e},bonus_targetErrors(){const e=[];return this.$v.bonus_target.$dirty,e},google:l.gmapApi},methods:{onSelectArea(e){Object.keys(this.areas).forEach(t=>{this.areas[t].id===e&&(this.areaData=this.areas[t])})},onAddressChanged(){if(!this.$data.address)return;this.gmap_loading=!0;let e=encodeURI(this.$data.address.split(" ").join("+"));o.a.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${e}&key=${this.appConfig.GOOGLE_MAP_API_KEY}&language=en`).then(e=>{this.gmap_loading=!1,this.$data.gmap_results=e.data&&e.data.results})},onSelectAddress(e){this.address=e.formatted_address;let t=c.find(e.address_components,e=>-1!==e.types.indexOf("postal_code"));t&&(this.postcode=t.short_name),this.map_latitude=c.get(e,"geometry.location.lat",void 0),this.map_longitude=c.get(e,"geometry.location.lng",void 0),this.map_latitude&&this.map_longitude&&this.onUpgradeMapMarker()},onUpgradeMapMarker(){let e=this;e.$data.map_marker=void 0,e.map_latitude&&e.map_longitude&&e.$refs.mapRef.$mapPromise.then(t=>{e.$data.map_marker=new e.google.maps.LatLng(e.map_latitude,e.map_longitude);var a=new e.google.maps.LatLngBounds;a.extend(e.$data.map_marker),t.setCenter(a.getCenter()),t.setZoom(e.map_zoom)})},onChangeMarkerPosition(e){this.map_latitude||this.map_longitude?(this.map_latitude=void 0,this.map_longitude=void 0):(this.map_latitude=e.latLng.lat(),this.map_longitude=e.latLng.lng()),this.onUpgradeMapMarker()},onSelectEmail(e){"object"==typeof e&&(this.email=e.email)},onChangeFileUpload(e){this.file=e},submit(){let e=JSON.parse(localStorage.getItem("user"));if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){const a={name:this.name,email:this.email,business_email:this.business_email,address:this.address,contactName:this.contactName,telephone:this.telephone,postcode:this.postcode,areaId:this.areaData.id,area:this.areaData,standard_pay:this.standard_pay,weekend_pay:this.weekend_pay,invoice_comission:this.invoice_comission,booking_fee:this.booking_fee,send_invoice:this.send_invoice,map_latitude:this.map_latitude,map_longitude:this.map_longitude,meal:this.meal,uniform:this.uniform,cash_orders:this.cash_orders,waiting_location:this.waiting_location,other:this.other,bonus_target:this.bonus_target};this.switch_change_password&&(a.password=this.password);let s=new FormData;for(var t of(s.append("file",this.file),c.each(a,(e,t)=>{s.append(t,e)}),s.keys()))null!=s.get(t)&&"null"!=s.get(t)||s.delete(t);this.$store.dispatch("createNewRestaurant",s).then(t=>{t.restCredentials.link=""+this.appConfig.app_url,o.a.post(this.appConfig.app_url+"/api/sendEmail",t.restCredentials,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+e.access_token}}).then(e=>{console.log(e)})}).finally(()=>{this.localLoading=!1,this.dialog=!1,this.clear()})}},clear(){this.$v.$reset(),this.name="",this.email="",this.business_email="",this.contactName="",this.address="",this.telephone="",this.postcode="",this.area=null,this.areaData={},this.standard_pay=null,this.weekend_pay=null,this.invoice_comission=null,this.booking_fee=null,this.send_invoice=1,this.map_latitude=void 0,this.map_longitude=void 0,this.meal=void 0,this.uniform=void 0,this.cash_orders=void 0,this.waiting_location=void 0,this.other=void 0,this.bonus_target=void 0,this.logo_src=void 0}}},m=a("2877"),h=a("6544"),p=a.n(h),_=a("8336"),v=a("b0af"),g=a("99d9"),f=a("ac7c"),b=a("62ad"),$=a("2b5d"),y=a("a523"),x=a("169a"),w=a("23a7"),k=a("4bd4"),C=a("132d"),R=a("da13"),E=a("5d23"),S=a("1baa"),D=a("34c3"),V=a("0fd9"),q=a("b974"),A=a("b73d"),T=a("71a3"),L=a("c671"),I=a("fe57"),j=a("aac8"),N=a("8654"),P=Object(m.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"primary",attrs:{text:""}},s),[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add Restaurant\n        ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Add a New Restaurant")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",{staticClass:"pl-0 pr-0"},[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab",[e._v("Main")]),a("v-tab",[e._v("Additional")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Name*",hint:"enter restaurant name",required:"","error-messages":e.nameErrors},on:{input:function(t){return e.$v.name.$touch()},blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Contact Name*",hint:"enter a contact name","error-messages":e.contactNameErrors,required:""},on:{input:function(t){return e.$v.contactName.$touch()},blur:function(t){return e.$v.contactName.$touch()}},model:{value:e.contactName,callback:function(t){e.contactName=t},expression:"contactName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify","clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address*",hint:"type something to search","persistent-hint":"",required:"","error-messages":e.addressErrors},on:{input:function(t){return e.$v.address.$touch()},blur:function(t){return e.$v.address.$touch()},change:function(t){return e.onAddressChanged()}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[0!=e.gmap_results.length?a("h2",[e._v("Seach results:")]):e._e(),e.gmap_loading?a("h3",[e._v("Seaching address...")]):e._e(),a("v-list-item-group",{attrs:{color:"primary"}},e._l(e.gmap_results,(function(t,s){return a("v-list-item",{key:s,on:{click:function(a){return e.onSelectAddress(t)}}},[a("v-list-item-icon",{staticClass:"driver-profile_icon"},[a("v-icon",[e._v("mdi-map-marker")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:e._s(t.formatted_address)}})],1)],1)})),1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"220px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:e.map_center,zoom:e.map_zoom,"map-type-id":"terrain"},on:{click:e.onChangeMarkerPosition}},[e.map_marker?a("GmapMarker",{attrs:{position:e.map_marker}}):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-combobox",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Email*",required:"","error-messages":e.emailErrors,"item-text":"email","item-value":"email",items:e.restaurateurs},on:{input:function(t){return e.$v.email.$touch()},blur:function(t){return e.$v.email.$touch()},change:e.onSelectEmail},nativeOn:{input:function(t){e.email=t.srcElement.value}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-combobox",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Business Email*",required:"","error-messages":e.businessEmailErrors},on:{input:function(t){return e.$v.email.$touch()},blur:function(t){return e.$v.email.$touch()}},nativeOn:{input:function(t){e.business_email=t.srcElement.value}},model:{value:e.business_email,callback:function(t){e.business_email=t},expression:"business_email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number*",type:"Telephone",required:"","error-messages":e.telephoneErrors},on:{change:function(t){return e.$v.telephone.$touch()},blur:function(t){return e.$v.telephone.$touch()}},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{readonly:e.readOnly,disabled:e.readOnly,outlined:"",label:"Area Assigned to*",required:"",items:e.areasList,"item-text":"name","item-value":"id","error-messages":e.selectErrors},on:{change:e.onSelectArea,blur:function(t){return e.$v.area.$touch()}},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),null!==this.area?a("v-col",{staticClass:"pb-0",attrs:{sm:"12"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0 pr-3",staticStyle:{height:"80px"},attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"adjustment-type"},[e._v("Mon – Thurs Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:e.areaData.standardPayRate},model:{value:e.standard_pay,callback:function(t){e.standard_pay=t},expression:"standard_pay"}})],1)]),a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0 pl-3",staticStyle:{height:"80px"},attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"adjustment-type"},[e._v("Fri-Sun Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:e.areaData.weekendPayRate},model:{value:e.weekend_pay,callback:function(t){e.weekend_pay=t},expression:"weekend_pay"}})],1)])],1)],1):e._e(),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Dream Drivers Сommission")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"%",type:"number",outlined:"",placeholder:e.default_comission,"persistent-hint":""},model:{value:e.invoice_comission,callback:function(t){e.invoice_comission=t},expression:"invoice_comission"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Booking fee")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:e.default_booking_fee,"persistent-hint":""},model:{value:e.booking_fee,callback:function(t){e.booking_fee=t},expression:"booking_fee"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Send Invoice")]),a("v-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Yes"},model:{value:e.send_invoice,callback:function(t){e.send_invoice=t},expression:"send_invoice"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-switch",{attrs:{label:"Special Password"},model:{value:e.switch_change_password,callback:function(t){e.switch_change_password=t},expression:"switch_change_password"}})],1),e.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:e.passwordRules,counter:12},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1)],1),a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-file-input",{ref:"image",attrs:{rules:e.imgRules,accept:"image/png, image/jpeg, image/jpg, image/bmp",placeholder:"Upload a file","prepend-icon":"mdi-camera",label:"File"},on:{change:e.onChangeFileUpload}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Meal",hint:"enter meal","error-messages":e.mealErrors},on:{input:function(t){return e.$v.meal.$touch()},blur:function(t){return e.$v.meal.$touch()}},model:{value:e.meal,callback:function(t){e.meal=t},expression:"meal"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Uniform",hint:"enter uniform","error-messages":e.uniformErrors,required:""},on:{input:function(t){return e.$v.uniform.$touch()},blur:function(t){return e.$v.uniform.$touch()}},model:{value:e.uniform,callback:function(t){e.uniform=t},expression:"uniform"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Cash Orders",hint:"enter cash orders","error-messages":e.cash_ordersErrors,required:""},on:{input:function(t){return e.$v.cash_orders.$touch()},blur:function(t){return e.$v.cash_orders.$touch()}},model:{value:e.cash_orders,callback:function(t){e.cash_orders=t},expression:"cash_orders"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Waiting location",hint:"enter waiting location","error-messages":e.waiting_locationErrors,required:""},on:{input:function(t){return e.$v.waiting_location.$touch()},blur:function(t){return e.$v.waiting_location.$touch()}},model:{value:e.waiting_location,callback:function(t){e.waiting_location=t},expression:"waiting_location"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Other",hint:"enter other","error-messages":e.otherErrors,required:""},on:{input:function(t){return e.$v.other.$touch()},blur:function(t){return e.$v.other.$touch()}},model:{value:e.other,callback:function(t){e.other=t},expression:"other"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bonus Target",hint:"enter Bonus Target","error-messages":e.bonus_targetErrors,required:""},on:{input:function(t){return e.$v.bonus_target.$touch()},blur:function(t){return e.$v.bonus_target.$touch()}},model:{value:e.bonus_target,callback:function(t){e.bonus_target=t},expression:"bonus_target"}})],1)],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||e.localLoading,loading:e.localLoading},on:{click:e.submit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-upload")]),e._v("Send Verification")],1),a("v-btn",{staticClass:"warning",attrs:{loading:e.localLoading,depressed:""},on:{click:e.clear}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("Clear")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"3abe6298",null);t.a=P.exports;p()(P,{VBtn:_.a,VCard:v.a,VCardText:g.b,VCardTitle:g.c,VCheckbox:f.a,VCol:b.a,VCombobox:$.a,VContainer:y.a,VDialog:x.a,VFileInput:w.a,VForm:k.a,VIcon:C.a,VListItem:R.a,VListItemContent:E.a,VListItemGroup:S.a,VListItemIcon:D.a,VListItemTitle:E.c,VRow:V.a,VSelect:q.a,VSwitch:A.a,VTab:T.a,VTabItem:L.a,VTabs:I.a,VTabsItems:j.a,VTextField:N.a})},"52ec":function(e,t,a){"use strict";var s=a("1dce"),i=a("b5ae"),r=a("bc3a"),o=a.n(r),n=a("2f62"),l=a("755e"),c=a("2ef0");const d={lat:51.4,lng:0};var u={mixins:[s.validationMixin],name:"NewLocationModal",props:["thisRestaurantData"],validations:{name:{required:i.required},email:{required:i.required,email:i.email},business_email:{required:i.required,email:i.email},telephone:{required:i.required},contactName:{required:i.required},area_id:{required:i.required},address:{required:i.required},standard_pay:{},weekend_pay:{},invoice_comission:{},meal:{},uniform:{},cash_orders:{},waiting_location:{},other:{},bonus_target:{},booking_fee:{},send_invoice:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[e=>!!e||"Please enter your password",e=>e&&e.length>=6||"Password should be at least six symbols long"],restaurantData:null,localLoading:!1,dialog:!1,id:"",name:"",email:"",business_email:"",address:"",map_latitude:void 0,map_longitude:void 0,contactName:"",telephone:"",postcode:"",area_id:void 0,areaData:{},password:"",standard_pay:null,weekend_pay:null,invoice_comission:null,booking_fee:null,send_invoice:!0,is_initialized:!1,map_center:d,map_zoom:12,map_marker:void 0,gmap_results:[],gmap_loading:!1,tab_edit_restaurant:void 0,default_comission:void 0,default_booking_fee:void 0,default_send_invoice:void 0,meal:void 0,uniform:void 0,cash_orders:void 0,waiting_location:void 0,other:void 0,bonus_target:void 0,file:void 0,imgRules:[e=>!(e&&e.size>1e7)||"File size should be less than 10 MB!"],logo_src:void 0}),watch:{thisRestaurantData:{handler:function(e,t){t.restaurateur&&this.email==t.restaurateur.email&&this.email!=e.restaurateur.email&&(this.email=this.thisRestaurantData.restaurateur.email)},deep:!0}},created(){},mounted(){this.restaurantData=this.thisRestaurantData,this.id=this.thisRestaurantData.id,this.name=this.thisRestaurantData.name,this.email=this.thisRestaurantData.restaurateur?this.thisRestaurantData.restaurateur.email:void 0,this.address=this.thisRestaurantData.address,this.contactName=this.thisRestaurantData.contactName,this.telephone=this.thisRestaurantData.telephone,this.business_email=this.thisRestaurantData.business_email,this.postcode=this.thisRestaurantData.postcode,this.standard_pay=this.thisRestaurantData.standard_pay,this.weekend_pay=this.thisRestaurantData.weekend_pay,this.invoice_comission=this.thisRestaurantData.invoice_comission,this.map_latitude=this.thisRestaurantData.map_latitude,this.map_longitude=this.thisRestaurantData.map_longitude,this.booking_fee=this.thisRestaurantData.booking_fee,this.send_invoice=this.thisRestaurantData.send_invoice,this.meal=this.thisRestaurantData.meal,this.uniform=this.thisRestaurantData.uniform,this.cash_orders=this.thisRestaurantData.cash_orders,this.waiting_location=this.thisRestaurantData.waiting_location,this.other=this.thisRestaurantData.other,this.bonus_target=this.thisRestaurantData.bonus_target,this.logo_src=this.thisRestaurantData.logo_src,Object.keys(this.areas).forEach(e=>{+this.areas[e].id==+this.thisRestaurantData.areaId&&(this.area_id=this.areas[e].id,this.areaData=this.areas[e])})},updated(){if(this.is_initialized)return;let e=this,t=setInterval(()=>{if(!e.google||!e.$refs.mapRef)return;clearInterval(t),e.$data.is_initialized=!0;let a=c.find(e.options,e=>"map_center_default"==e.okey);if(a){let t=JSON.parse(a.ovalue);e.map_center={lat:t.lat,lng:t.lng},e.map_zoom=t.map_zoom}e.onUpgradeMapMarker();let s=c.find(e.options,e=>"restaurants_standard_invoice_comission"==e.okey);s&&s.ovalue&&(e.default_comission=s.ovalue)},10)},computed:{...Object(n.c)(["areas","restaurateurs","options"]),selectAreaErrors(){const e=[];return this.$v.area_id.$dirty?(!this.$v.area_id.required&&e.push("Area is required"),e):e},nameErrors(){const e=[];return this.$v.name.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.name.required&&e.push("Restaurant name is required."),e):e},contactNameErrors(){const e=[];return this.$v.contactName.$dirty?(!this.$v.contactName.required&&e.push("Contact Name is required."),e):e},emailErrors(){const e=[];return this.$v.email.$dirty?(!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required"),e):e},businessEmailErrors(){const e=[];return this.$v.business_email.$dirty?(!this.$v.business_email.email&&e.push("Must be valid business e-mail"),e):e},addressErrors(){const e=[];return this.$v.address.$dirty?(!this.$v.address.required&&e.push("Address is required"),e):e},telephoneErrors(){const e=[];return this.$v.telephone.$dirty?(!this.$v.telephone.required&&e.push("Telephone number is required"),e):e},areasList(){return this.areas},mealErrors(){const e=[];return this.$v.meal.$dirty,e},uniformErrors(){const e=[];return this.$v.uniform.$dirty,e},cash_ordersErrors(){const e=[];return this.$v.cash_orders.$dirty,e},waiting_locationErrors(){const e=[];return this.$v.waiting_location.$dirty,e},otherErrors(){const e=[];return this.$v.other.$dirty,e},bonus_targetErrors(){const e=[];return this.$v.bonus_target.$dirty,e},google:l.gmapApi},methods:{onChangeArea(){Object.keys(this.areas).forEach(e=>{+this.areas[e].id==+this.area_id&&(this.areaData=this.areas[e])})},onAddressChanged(){if(!this.$data.address)return;this.gmap_loading=!0;let e=encodeURI(this.$data.address.split(" ").join("+"));o.a.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${e}&key=${this.appConfig.GOOGLE_MAP_API_KEY}&language=en`).then(e=>{this.gmap_loading=!1,this.$data.gmap_results=e.data&&e.data.results})},onSelectAddress(e){this.address=e.formatted_address;let t=c.find(e.address_components,e=>-1!==e.types.indexOf("postal_code"));t&&(this.postcode=t.short_name),this.map_latitude=c.get(e,"geometry.location.lat",void 0),this.map_longitude=c.get(e,"geometry.location.lng",void 0),this.map_latitude&&this.map_longitude&&this.onUpgradeMapMarker()},onUpgradeMapMarker(){let e=this;e.$data.map_marker=void 0,e.map_latitude&&e.map_longitude&&e.$refs.mapRef.$mapPromise.then(t=>{e.$data.map_marker=new e.google.maps.LatLng(e.map_latitude,e.map_longitude);var a=new e.google.maps.LatLngBounds;a.extend(e.$data.map_marker),t.setCenter(a.getCenter()),t.setZoom(e.map_zoom)})},onChangeMarkerPosition(e){this.map_latitude||this.map_longitude?(this.map_latitude=void 0,this.map_longitude=void 0):(this.map_latitude=e.latLng.lat(),this.map_longitude=e.latLng.lng()),this.onUpgradeMapMarker()},onSelectEmail(e){"object"==typeof e&&(this.email=e.email)},onChangeFileUpload(e){this.file=e},onRemoveLogo(){this.logo_src=void 0},cancel(){this.restaurantData=this.thisRestaurantData,this.name=this.thisRestaurantData.name,this.email=this.thisRestaurantData.restaurateur?this.thisRestaurantData.restaurateur.email:void 0,this.address=this.thisRestaurantData.address,this.contactName=this.thisRestaurantData.contactName,this.telephone=this.thisRestaurantData.telephone,this.business_email=this.thisRestaurantData.business_email,this.postcode=this.thisRestaurantData.postcode,this.area_id=this.thisRestaurantData.areaId,this.standard_pay=this.thisRestaurantData.standard_pay,this.weekend_pay=this.thisRestaurantData.weekend_pay,this.invoice_comission=this.thisRestaurantData.invoice_comission,this.booking_fee=this.thisRestaurantData.booking_fee,this.send_invoice=this.thisRestaurantData.send_invoice,this.map_latitude=this.thisRestaurantData.map_latitude,this.map_longitude=this.thisRestaurantData.map_longitude,this.meal=this.thisRestaurantData.meal,this.uniform=this.thisRestaurantData.uniform,this.cash_orders=this.thisRestaurantData.cash_orders,this.waiting_location=this.thisRestaurantData.waiting_location,this.other=this.thisRestaurantData.other,this.bonus_target=this.thisRestaurantData.bonus_target,this.logo_src=this.thisRestaurantData.logo_src,this.file=void 0,Object.keys(this.areas).forEach(e=>{+this.areas[e].id==+this.thisRestaurantData.areaId&&(this.area_id=this.areas[e].id,this.areaData=this.areas[e])}),this.dialog=!1},submit(){if(this.$v.$touch(),!this.$v.$invalid){let t={id:this.id,name:this.name,email:this.email,address:this.address,contactName:this.contactName,telephone:this.telephone,business_email:this.business_email,postcode:this.postcode,areaId:this.area_id,standard_pay:this.standard_pay,weekend_pay:this.weekend_pay,invoice_comission:this.invoice_comission,booking_fee:this.booking_fee,send_invoice:this.send_invoice,map_latitude:this.map_latitude,map_longitude:this.map_longitude,meal:this.meal,uniform:this.uniform,cash_orders:this.cash_orders,waiting_location:this.waiting_location,other:this.other,bonus_target:this.bonus_target,logo_src:this.logo_src?this.logo_src:null};this.switch_change_password&&(t.password=this.password);let a=new FormData;for(var e of(a.append("file",this.file),c.each(t,(e,t)=>{a.append(t,e)}),a.keys()))null!=a.get(e)&&"null"!=a.get(e)||a.delete(e);this.localLoading=!0,this.$store.dispatch("editRestaurant",a).then(()=>{this.dialog=!1,this.password="",this.switch_change_password=!1,this.$emit("updated",""),this.cancel()}).catch(e=>{this.email="";let t=e.response;this.$store.dispatch("setError",t[Object.keys(t)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},m=a("2877"),h=a("6544"),p=a.n(h),_=a("8336"),v=a("b0af"),g=a("99d9"),f=a("ac7c"),b=a("62ad"),$=a("2b5d"),y=a("a523"),x=a("169a"),w=a("23a7"),k=a("4bd4"),C=a("132d"),R=a("adda"),E=a("da13"),S=a("5d23"),D=a("1baa"),V=a("34c3"),q=a("0fd9"),A=a("b974"),T=a("b73d"),L=a("71a3"),I=a("c671"),j=a("fe57"),N=a("aac8"),P=a("8654"),M=Object(m.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"float-right primary",attrs:{small:"",id:"editModal",depressed:""}},s),[e._v("Edit Details\n        ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Restaurant")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",{staticClass:"pl-0 pr-0"},[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab",[e._v("Main")]),a("v-tab",[e._v("Additional")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:e.tab_edit_restaurant,callback:function(t){e.tab_edit_restaurant=t},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Name*",hint:"enter restaurant name",required:"","error-messages":e.nameErrors},on:{input:function(t){return e.$v.name.$touch()},blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Contact Name*",hint:"enter a contact name","error-messages":e.contactNameErrors,required:""},on:{input:function(t){return e.$v.contactName.$touch()},blur:function(t){return e.$v.contactName.$touch()}},model:{value:e.contactName,callback:function(t){e.contactName=t},expression:"contactName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify","clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address*",hint:"type something to search","persistent-hint":"",required:"","error-messages":e.addressErrors},on:{input:function(t){return e.$v.address.$touch()},blur:function(t){return e.$v.address.$touch()},change:function(t){return e.onAddressChanged()}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[0!=e.gmap_results.length?a("h2",[e._v("Seach results:")]):e._e(),e.gmap_loading?a("h3",[e._v("Seaching address...")]):e._e(),a("v-list-item-group",{attrs:{color:"primary"}},e._l(e.gmap_results,(function(t,s){return a("v-list-item",{key:s,on:{click:function(a){return e.onSelectAddress(t)}}},[a("v-list-item-icon",{staticClass:"driver-profile_icon"},[a("v-icon",[e._v("mdi-map-marker")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:e._s(t.formatted_address)}})],1)],1)})),1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"220px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:e.map_center,zoom:e.map_zoom,"map-type-id":"terrain"},on:{click:e.onChangeMarkerPosition}},[e.map_marker?a("GmapMarker",{attrs:{position:e.map_marker}}):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-combobox",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Login Email*",required:"","error-messages":e.emailErrors,"item-text":"email","item-value":"email",items:e.restaurateurs},on:{input:e.onSelectEmail,blur:function(t){return e.$v.email.$touch()},change:e.onSelectEmail},nativeOn:{input:function(t){e.email=t.srcElement.value}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Billing Email*",type:"email",required:"","error-messages":e.businessEmailErrors},on:{change:function(t){return e.$v.business_email.$touch()},blur:function(t){return e.$v.business_email.$touch()}},model:{value:e.business_email,callback:function(t){e.business_email=t},expression:"business_email"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{outlined:"",label:"Area Assigned to*",required:"",items:e.areasList,"item-text":"name","item-value":"id","error-messages":e.selectAreaErrors},on:{change:e.onChangeArea,blur:function(t){return e.$v.area_id.$touch()}},model:{value:e.area_id,callback:function(t){e.area_id=t},expression:"area_id"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number*",type:"Telephone",required:"","error-messages":e.telephoneErrors},on:{change:function(t){return e.$v.telephone.$touch()},blur:function(t){return e.$v.telephone.$touch()}},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),null!==this.area_id?a("v-col",{staticClass:"d-flex flex-row pb-0",attrs:{sm:"12"}},[a("v-col",{staticStyle:{"padding-left":"0px !important"},attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Mon – Thurs Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:e.areaData.standardPayRate},model:{value:e.standard_pay,callback:function(t){e.standard_pay=t},expression:"standard_pay"}})],1)])],1),a("v-col",{staticStyle:{"padding-right":"0px !important"},attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Fri-Sun Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:e.areaData.weekendPayRate},model:{value:e.weekend_pay,callback:function(t){e.weekend_pay=t},expression:"weekend_pay"}})],1)])],1)],1):e._e(),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Dream Drivers Сommission")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"%",type:"number",outlined:"",placeholder:e.default_comission,"persistent-hint":""},model:{value:e.invoice_comission,callback:function(t){e.invoice_comission=t},expression:"invoice_comission"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Booking fee")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:e.default_booking_fee,"persistent-hint":""},model:{value:e.booking_fee,callback:function(t){e.booking_fee=t},expression:"booking_fee"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[e._v("Send Invoice")]),a("v-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Yes"},model:{value:e.send_invoice,callback:function(t){e.send_invoice=t},expression:"send_invoice"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"9"}},[a("v-switch",{attrs:{label:"Change Password"},model:{value:e.switch_change_password,callback:function(t){e.switch_change_password=t},expression:"switch_change_password"}})],1),e.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:e.passwordRules,counter:12},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1)],1),a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-file-input",{ref:"image",attrs:{rules:e.imgRules,accept:"image/png, image/jpeg, image/jpg, image/bmp",placeholder:"Upload a file","prepend-icon":"mdi-camera",label:"File"},on:{change:e.onChangeFileUpload}}),e.logo_src?a("v-img",{attrs:{"max-width":"500px","max-height":"300px",src:e.appConfig.app_url+"/images/"+e.logo_src},model:{value:e.logo_src,callback:function(t){e.logo_src=t},expression:"logo_src"}}):e._e(),e.logo_src?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.onRemoveLogo()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Remove Logo\n                                    ")],1):e._e()],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Meal",hint:"enter meal","error-messages":e.mealErrors},on:{input:function(t){return e.$v.meal.$touch()},blur:function(t){return e.$v.meal.$touch()}},model:{value:e.meal,callback:function(t){e.meal=t},expression:"meal"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Uniform",hint:"enter uniform","error-messages":e.uniformErrors,required:""},on:{input:function(t){return e.$v.uniform.$touch()},blur:function(t){return e.$v.uniform.$touch()}},model:{value:e.uniform,callback:function(t){e.uniform=t},expression:"uniform"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Cash Orders",hint:"enter cash orders","error-messages":e.cash_ordersErrors,required:""},on:{input:function(t){return e.$v.cash_orders.$touch()},blur:function(t){return e.$v.cash_orders.$touch()}},model:{value:e.cash_orders,callback:function(t){e.cash_orders=t},expression:"cash_orders"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Waiting location",hint:"enter waiting location","error-messages":e.waiting_locationErrors,required:""},on:{input:function(t){return e.$v.waiting_location.$touch()},blur:function(t){return e.$v.waiting_location.$touch()}},model:{value:e.waiting_location,callback:function(t){e.waiting_location=t},expression:"waiting_location"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Other",hint:"enter other","error-messages":e.otherErrors,required:""},on:{input:function(t){return e.$v.other.$touch()},blur:function(t){return e.$v.other.$touch()}},model:{value:e.other,callback:function(t){e.other=t},expression:"other"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bonus Target",hint:"enter Bonus Target","error-messages":e.bonus_targetErrors,required:""},on:{input:function(t){return e.$v.bonus_target.$touch()},blur:function(t){return e.$v.bonus_target.$touch()}},model:{value:e.bonus_target,callback:function(t){e.bonus_target=t},expression:"bonus_target"}})],1)],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||e.localLoading,loading:e.localLoading},on:{click:e.submit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check-box-outline")]),e._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:e.localLoading},on:{click:e.cancel}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"f8f599e6",null);t.a=M.exports;p()(M,{VBtn:_.a,VCard:v.a,VCardText:g.b,VCardTitle:g.c,VCheckbox:f.a,VCol:b.a,VCombobox:$.a,VContainer:y.a,VDialog:x.a,VFileInput:w.a,VForm:k.a,VIcon:C.a,VImg:R.a,VListItem:E.a,VListItemContent:S.a,VListItemGroup:D.a,VListItemIcon:V.a,VListItemTitle:S.c,VRow:q.a,VSelect:A.a,VSwitch:T.a,VTab:L.a,VTabItem:I.a,VTabs:j.a,VTabsItems:N.a,VTextField:P.a})},9722:function(e,t,a){"use strict";var s=a("2f62"),i=a("2ef0");var r={name:"Restaurants",data:()=>({localLoading:!1,filter_search:void 0,restaurateurFilter:void 0,RESTAURANT_STATUS_ACTIVE:10,RESTAURANT_STATUS_INACTIVE:20,filter_status:10,filter_search:"",filter_area:null,page:1,per_page:15,per_page_list:[10,15,50,100,1e3],restaurant_status_list:[{id:10,type:"root",name:"Show only active"},{id:20,type:"root",name:"Show only inactive"}]}),created(){Promise.all([this.$store.dispatch("fetchAreas"),this.$store.dispatch("fetchRestaurateurs"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchOptions")]).then(()=>{this.$store.dispatch("fetchRestaurants")})},computed:{...Object(s.c)(["areas","restaurants","drivers","restaurateurs"]),restaurantsSearched(){let e=this.restaurants;switch(this.filter_search&&(e=i.filter(e,e=>-1!==e.name.toLowerCase().indexOf(this.filter_search))),this.filter_area&&(e=e.filter(e=>e.area_id==this.filter_area)),this.restaurateurFilter&&(e=i.filter(e,e=>e.restaurateur&&e.restaurateur_id==this.restaurateurFilter)),this.filter_status){case 10:e=i.filter(e,e=>e.status==this.filter_status);break;case 20:if(e=i.filter(e,e=>e.status==this.filter_status),0===e.length){let e=this.filter_status;this.$store.dispatch("fetchRestaurants",e)}}return e},restaurantsSearchedPaged(){let e=this.per_page*(this.page-1),t=e+this.per_page;return this.restaurantsSearched.slice(e,t)},total_pages(){return Math.ceil(this.restaurantsSearched.length/this.per_page)}},methods:{onAreaChange(){console.log("Selected Area ID:",this.filter_area),this.filterRestaurants()},deleteRestaurant(e){confirm("Remove restaurant "+e.name+"?")&&(this.localLoading=!0,this.$store.dispatch("deleteRestaurant",e).then(()=>{}).catch(e=>{e&&e.response&&e.response.data&&e.response.data.id&&alert(e.response.data.id[0])}).finally(()=>{this.localLoading=!1}))},inactiveItem(e,t){this.localLoading=!0,this.$store.dispatch("setRestaurantStatus",{status:e,restaurant_id:t}).then(()=>{}).finally(()=>{this.localLoading=!1})},onChangePage(e){this.page=e},goToSchedule(e){localStorage.setItem("redirrected_from_restaurants",e),window.location="schedule"},getAreaName(e){let t=i.find(this.areas,t=>t.id==e);return t?t.name:"-"},restaurantEdited(){this.$store.dispatch("fetchRestaurants"),this.$store.dispatch("fetchRestaurateurs")},onCangePerPage(){this.page=1}}},o=a("2877"),n=a("6544"),l=a.n(n),c=a("c6a6"),d=a("8336"),u=a("a609"),m=a("62ad"),h=a("a523"),p=a("0e8f"),_=a("132d"),v=a("8860"),g=a("da13"),f=a("5d23"),b=a("e449"),$=a("891e"),y=a("0fd9"),x=a("b974"),w=a("1f4f"),k=a("2fa4"),C=a("8654"),R=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[e._v("Restaurants")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("new-restaurant-modal")],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-autocomplete",{attrs:{items:e.areas,"item-text":"name","item-value":"id",label:"All Areas",solo:"",clearable:"","hide-details":""},on:{change:e.onAreaChange},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("div",[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]}}]),model:{value:e.filter_area,callback:function(t){e.filter_area=t},expression:"filter_area"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-autocomplete",{attrs:{items:e.restaurant_status_list,"item-text":"name","item-value":"id",label:"All statuses",solo:"",clearable:"","hide-details":""},on:{change:e.onStatusfilter},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("div",[a("div",{domProps:{innerHTML:e._s(t.item.name)}})])]}}]),model:{value:e.filter_status,callback:function(t){e.filter_status=t},expression:"filter_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-autocomplete",{attrs:{items:e.restaurateurs,label:"Search Restaurateur","item-text":"email","item-value":"id",solo:"",clearable:"","hide-details":""},model:{value:e.restaurateurFilter,callback:function(t){e.restaurateurFilter=t},expression:"restaurateurFilter"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-text-field",{attrs:{solo:"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search Restaurant",clearable:""},model:{value:e.filter_search,callback:function(t){e.filter_search=t},expression:"filter_search"}})],1)],1),0===e.restaurantsSearchedPaged.length?a("span",[e._v("No restaurants found")]):e._e(),0!==e.restaurantsSearchedPaged.length?a("div",{staticClass:"restaurants-table"},[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Restaurant Name")]),a("th",{staticClass:"text-left"},[e._v("Location Address")]),a("th",{staticClass:"text-left"},[e._v("Email")]),a("th",{staticClass:"text-left"},[e._v("Area")]),a("th",{staticClass:"text-right"},[e._v("Actions")])])]),a("tbody",e._l(e.restaurantsSearchedPaged,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.name))]),a("td",{staticClass:"pl-0 pr-0"},[a("restaurant-address-modal",{attrs:{thisRestaurantId:t.id}})],1),a("td",[e._v(e._s(t.restaurateur.email))]),a("td",[e._v(e._s(e.getAreaName(t.area_id)))]),a("td",[a("v-btn-toggle",{staticClass:"float-right edit-button-group"},[a("edit-restaurant-modal",{attrs:{thisRestaurantData:t},on:{updated:e.restaurantEdited}}),[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:""}},s),[a("v-icon",[e._v("mdi-menu-down")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",[t.status==e.RESTAURANT_STATUS_ACTIVE?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.inactiveItem(e.RESTAURANT_STATUS_INACTIVE,t.id)}}},[e._v("Mark as Inactive")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return e.inactiveItem(e.RESTAURANT_STATUS_ACTIVE,t.id)}}},[e._v("Mark as Active")])],1),a("v-list-item",{on:{click:function(a){return e.deleteRestaurant(t)}}},[a("v-list-item-title",[e._v("Delete")])],1),a("v-list-item",{attrs:{restaurantId:t.id},on:{click:function(a){return e.goToSchedule(t.id)}}},[a("v-list-item-title",[e._v("Schedule")])],1),a("drivers-list-modal",{attrs:{restaurantId:t.id}}),a("new-post-modal",{attrs:{restaurantId:t.id}})],1)],1)],1)]],2)],1)])})),0)]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[a("v-flex",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-2",staticStyle:{"min-width":"75px"}},[e._v("\n                            Per page:\n                        ")]),a("v-select",{attrs:{items:e.per_page_list,label:"Solo field",solo:"",dense:"","hide-details":""},on:{change:e.onCangePerPage},model:{value:e.per_page,callback:function(t){e.per_page=t},expression:"per_page"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-pagination",{attrs:{value:e.page,length:e.total_pages,"total-visible":10},on:{input:e.onChangePage}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[e._v("\n                    "+e._s((e.page-1)*e.per_page+1)+" - "+e._s(e.page*e.per_page<e.restaurantsSearched.length?e.page*e.per_page:e.restaurantsSearched.length)+" of "+e._s(e.restaurantsSearched.length)+"\n                ")])],1)],1):e._e()],1)])}),[],!1,null,"bd387112",null);t.a=R.exports;l()(R,{VAutocomplete:c.a,VBtn:d.a,VBtnToggle:u.a,VCol:m.a,VContainer:h.a,VFlex:p.a,VIcon:_.a,VList:v.a,VListItem:g.a,VListItemTitle:f.c,VMenu:b.a,VPagination:$.a,VRow:y.a,VSelect:x.a,VSimpleTable:w.a,VSpacer:k.a,VTextField:C.a})},c20b:function(e,t,a){"use strict";var s=a("2f62"),i=a("755e"),r=a("2ef0");const o={lat:51.4,lng:0};var n={name:"LocationAddressModal",props:["thisRestaurantId"],data:()=>({dialog:!1,map_center:o,map_zoom:12,map_marker:void 0,is_initialized:!1}),computed:{...Object(s.c)(["options"]),thisRestaurant(){const e=this.thisRestaurantId;let t=JSON.parse(localStorage.getItem("user"));return"restaurant"==t.role?r.find(t.restaurants,t=>t.id==e):this.$store.getters.restaurantById(e)},google:i.gmapApi},updated(){if(!this.$data.dialog)return void(this.$data.is_initialized=!1);if(this.$data.is_initialized)return;let e=this;if(e.$data.map_marker=void 0,!this.thisRestaurant.map_latitude||!this.thisRestaurant.map_longitude){let t=r.find(e.options,e=>"map_center_default"==e.okey),a=JSON.parse(t.ovalue);return e.map_center={lat:a.lat,lng:a.lng},e.map_zoom=a.map_zoom,void(e.$data.is_initialized=!0)}let t=setInterval(()=>{e.google&&(clearInterval(t),e.$data.is_initialized=!0,e.$refs.mapRef.$mapPromise.then(t=>{e.$data.map_marker=new e.google.maps.LatLng(e.thisRestaurant.map_latitude,e.thisRestaurant.map_longitude);var a=new e.google.maps.LatLngBounds;a.extend(e.$data.map_marker),t.setCenter(a.getCenter()),t.setZoom(e.map_zoom)}))},10)}},l=a("2877"),c=a("6544"),d=a.n(c),u=a("b0af"),m=a("99d9"),h=a("a523"),p=a("169a"),_=a("0e8f"),v=a("132d"),g=a("a722"),f=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-card-text",e._g({staticClass:"location-link",attrs:{flat:"",href:"#"}},s),[e._v(e._s(e.thisRestaurant.address))])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-title",[a("span",{staticClass:"title--primary"},[e._v(e._s(e.thisRestaurant.name))]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")])],1)])],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"800px",height:"420px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:e.map_center,zoom:e.map_zoom,"map-type-id":"terrain"}},[e.map_marker?a("GmapMarker",{attrs:{position:e.map_marker}}):e._e()],1)],1)],1)],1)],1)],1)}),[],!1,null,"8b87f904",null);t.a=f.exports;d()(f,{VCard:u.a,VCardText:m.b,VCardTitle:m.c,VContainer:h.a,VDialog:p.a,VFlex:_.a,VIcon:v.a,VLayout:g.a})}}]);