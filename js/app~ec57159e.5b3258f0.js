(window.webpackJsonp=window.webpackJsonp||[]).push([["app~ec57159e"],{"3bf8":function(t,e,a){"use strict";var s=a("1dce"),i=a("b5ae"),r=a("bc3a"),n=a.n(r),o=a("2f62"),l=a("755e"),c=a("2ef0");const d={lat:51.4,lng:0};var u={mixins:[s.validationMixin],name:"NewLocationModal",props:["thisAreaData"],validations:{name:{required:i.required},email:{required:i.required,email:i.email},business_email:{required:i.required,email:i.email},telephone:{required:i.required},contactName:{required:i.required},area:{required:i.required},address:{required:i.required},standard_pay:{},weekend_pay:{},booking_fee:{},invoice_comission:{},meal:{},uniform:{},cash_orders:{},waiting_location:{},other:{},bonus_target:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[t=>!!t||"Please enter your password",t=>t&&t.length>=6||"Password should be at least six symbols long"],readOnly:!1,localLoading:!1,dialog:!1,name:"",email:"",business_email:"",address:"",map_latitude:void 0,map_longitude:void 0,contactName:"",telephone:"",postcode:"",area:null,areaData:null,password:"",standard_pay:null,weekend_pay:null,invoice_comission:null,booking_fee:null,send_invoice:1,map_center:d,map_zoom:12,map_marker:void 0,gmap_results:[],gmap_loading:!1,tab_edit_restaurant:void 0,default_comission:void 0,default_booking_fee:void 0,meal:void 0,uniform:void 0,cash_orders:void 0,waiting_location:void 0,other:void 0,bonus_target:void 0,file:void 0,imgRules:[t=>!(t&&t.size>1e7)||"File size should be less than 10 MB!"],logo_src:void 0}),created(){},updated(){if(this.thisAreaData&&(this.areaData=c.find(this.areas,t=>t.id==this.thisAreaData.id),this.area=this.areaData,this.readOnly=!0),!this.$data.dialog)return void(this.is_initialized=!1);if(this.is_initialized)return;let t=this,e=setInterval(()=>{clearInterval(e),this.is_initialized=!0;let a=c.find(t.options,t=>"map_center_default"==t.okey),s=JSON.parse(a.ovalue);t.map_center={lat:s.lat,lng:s.lng},t.map_zoom=s.map_zoom;let i=c.find(t.options,t=>"restaurants_standard_invoice_comission"==t.okey);i&&i.ovalue&&(t.default_comission=i.ovalue);let r=c.find(t.options,t=>"restaurants_standard_booking_fee"==t.okey);r&&r.ovalue&&(t.default_booking_fee=r.ovalue)},10)},computed:{...Object(o.c)(["areas","restaurateurs","options"]),selectErrors(){const t=[];return this.$v.area.$dirty?(!this.$v.area.required&&t.push("Area is required"),t):t},nameErrors(){const t=[];return this.$v.name.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.name.required&&t.push("Restaurant name is required."),t):t},contactNameErrors(){const t=[];return this.$v.contactName.$dirty?(!this.$v.contactName.required&&t.push("Contact Name is required."),t):t},emailErrors(){const t=[];return this.$v.email.$dirty?(!this.$v.email.email&&t.push("Must be valid e-mail"),!this.$v.email.required&&t.push("E-mail is required"),t):t},businessEmailErrors(){const t=[];return this.$v.business_email.$dirty?(!this.$v.email.email&&t.push("Must be valid e-mail"),!this.$v.email.required&&t.push("Business E-mail is required"),t):t},addressErrors(){const t=[];return this.$v.address.$dirty?(!this.$v.address.required&&t.push("Address is required"),t):t},telephoneErrors(){const t=[];return this.$v.telephone.$dirty?(!this.$v.telephone.required&&t.push("Telephone number is required"),t):t},areasList(){return this.areas},mealErrors(){const t=[];return this.$v.meal.$dirty,t},uniformErrors(){const t=[];return this.$v.uniform.$dirty,t},cash_ordersErrors(){const t=[];return this.$v.cash_orders.$dirty,t},waiting_locationErrors(){const t=[];return this.$v.waiting_location.$dirty,t},otherErrors(){const t=[];return this.$v.other.$dirty,t},bonus_targetErrors(){const t=[];return this.$v.bonus_target.$dirty,t},google:l.gmapApi},methods:{onSelectArea(t){Object.keys(this.areas).forEach(e=>{this.areas[e].id===t&&(this.areaData=this.areas[e])})},onAddressChanged(){if(!this.$data.address)return;this.gmap_loading=!0;let t=encodeURI(this.$data.address.split(" ").join("+"));n.a.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${this.appConfig.GOOGLE_MAP_API_KEY}&language=en`).then(t=>{this.gmap_loading=!1,this.$data.gmap_results=t.data&&t.data.results})},onSelectAddress(t){this.address=t.formatted_address;let e=c.find(t.address_components,t=>-1!==t.types.indexOf("postal_code"));e&&(this.postcode=e.short_name),this.map_latitude=c.get(t,"geometry.location.lat",void 0),this.map_longitude=c.get(t,"geometry.location.lng",void 0),this.map_latitude&&this.map_longitude&&this.onUpgradeMapMarker()},onUpgradeMapMarker(){let t=this;t.$data.map_marker=void 0,t.map_latitude&&t.map_longitude&&t.$refs.mapRef.$mapPromise.then(e=>{t.$data.map_marker=new t.google.maps.LatLng(t.map_latitude,t.map_longitude);var a=new t.google.maps.LatLngBounds;a.extend(t.$data.map_marker),e.setCenter(a.getCenter()),e.setZoom(t.map_zoom)})},onChangeMarkerPosition(t){this.map_latitude||this.map_longitude?(this.map_latitude=void 0,this.map_longitude=void 0):(this.map_latitude=t.latLng.lat(),this.map_longitude=t.latLng.lng()),this.onUpgradeMapMarker()},onSelectEmail(t){"object"==typeof t&&(this.email=t.email)},onChangeFileUpload(t){this.file=t},submit(){let t=JSON.parse(localStorage.getItem("user"));if(this.localLoading=!0,this.$v.$touch(),!this.$v.$invalid){const a={name:this.name,email:this.email,business_email:this.business_email,address:this.address,contactName:this.contactName,telephone:this.telephone,postcode:this.postcode,areaId:this.areaData.id,area:this.areaData,standard_pay:this.standard_pay,weekend_pay:this.weekend_pay,invoice_comission:this.invoice_comission,booking_fee:this.booking_fee,send_invoice:this.send_invoice,map_latitude:this.map_latitude,map_longitude:this.map_longitude,meal:this.meal,uniform:this.uniform,cash_orders:this.cash_orders,waiting_location:this.waiting_location,other:this.other,bonus_target:this.bonus_target};this.switch_change_password&&(a.password=this.password);let s=new FormData;for(var e of(s.append("file",this.file),c.each(a,(t,e)=>{s.append(e,t)}),s.keys()))null!=s.get(e)&&"null"!=s.get(e)||s.delete(e);this.$store.dispatch("createNewRestaurant",s).then(e=>{e.restCredentials.link=""+this.appConfig.app_url,n.a.post(this.appConfig.app_url+"/api/sendEmail",e.restCredentials,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+t.access_token}}).then(t=>{console.log(t)})}).finally(()=>{this.localLoading=!1,this.dialog=!1,this.clear()})}},clear(){this.$v.$reset(),this.name="",this.email="",this.business_email="",this.contactName="",this.address="",this.telephone="",this.postcode="",this.area=null,this.areaData={},this.standard_pay=null,this.weekend_pay=null,this.invoice_comission=null,this.booking_fee=null,this.send_invoice=1,this.map_latitude=void 0,this.map_longitude=void 0,this.meal=void 0,this.uniform=void 0,this.cash_orders=void 0,this.waiting_location=void 0,this.other=void 0,this.bonus_target=void 0,this.logo_src=void 0}}},m=a("2877"),h=a("6544"),p=a.n(h),_=a("8336"),v=a("b0af"),f=a("99d9"),g=a("ac7c"),b=a("62ad"),y=a("2b5d"),$=a("a523"),x=a("169a"),w=a("23a7"),k=a("4bd4"),C=a("132d"),R=a("da13"),E=a("5d23"),S=a("1baa"),D=a("34c3"),V=a("0fd9"),q=a("b974"),A=a("b73d"),L=a("71a3"),T=a("c671"),j=a("fe57"),I=a("aac8"),N=a("8654"),P=Object(m.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"primary",attrs:{text:""}},s),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Add Restaurant\n        ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Add a New Restaurant")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",{staticClass:"pl-0 pr-0"},[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:t.tab_edit_restaurant,callback:function(e){t.tab_edit_restaurant=e},expression:"tab_edit_restaurant"}},[a("v-tab",[t._v("Main")]),a("v-tab",[t._v("Additional")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:t.tab_edit_restaurant,callback:function(e){t.tab_edit_restaurant=e},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Name*",hint:"enter restaurant name",required:"","error-messages":t.nameErrors},on:{input:function(e){return t.$v.name.$touch()},blur:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Contact Name*",hint:"enter a contact name","error-messages":t.contactNameErrors,required:""},on:{input:function(e){return t.$v.contactName.$touch()},blur:function(e){return t.$v.contactName.$touch()}},model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify","clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address*",hint:"type something to search","persistent-hint":"",required:"","error-messages":t.addressErrors},on:{input:function(e){return t.$v.address.$touch()},blur:function(e){return t.$v.address.$touch()},change:function(e){return t.onAddressChanged()}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[0!=t.gmap_results.length?a("h2",[t._v("Seach results:")]):t._e(),t.gmap_loading?a("h3",[t._v("Seaching address...")]):t._e(),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.gmap_results,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.onSelectAddress(e)}}},[a("v-list-item-icon",{staticClass:"driver-profile_icon"},[a("v-icon",[t._v("mdi-map-marker")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.formatted_address)}})],1)],1)})),1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"220px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:t.map_center,zoom:t.map_zoom,"map-type-id":"terrain"},on:{click:t.onChangeMarkerPosition}},[t.map_marker?a("GmapMarker",{attrs:{position:t.map_marker}}):t._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-combobox",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Email*",required:"","error-messages":t.emailErrors,"item-text":"email","item-value":"email",items:t.restaurateurs},on:{input:function(e){return t.$v.email.$touch()},blur:function(e){return t.$v.email.$touch()},change:t.onSelectEmail},nativeOn:{input:function(e){t.email=e.srcElement.value}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-combobox",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Business Email*",required:"","error-messages":t.businessEmailErrors},on:{input:function(e){return t.$v.email.$touch()},blur:function(e){return t.$v.email.$touch()}},nativeOn:{input:function(e){t.business_email=e.srcElement.value}},model:{value:t.business_email,callback:function(e){t.business_email=e},expression:"business_email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number*",type:"Telephone",required:"","error-messages":t.telephoneErrors},on:{change:function(e){return t.$v.telephone.$touch()},blur:function(e){return t.$v.telephone.$touch()}},model:{value:t.telephone,callback:function(e){t.telephone=e},expression:"telephone"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{readonly:t.readOnly,disabled:t.readOnly,outlined:"",label:"Area Assigned to*",required:"",items:t.areasList,"item-text":"name","item-value":"id","error-messages":t.selectErrors},on:{change:t.onSelectArea,blur:function(e){return t.$v.area.$touch()}},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}})],1),null!==this.area?a("v-col",{staticClass:"pb-0",attrs:{sm:"12"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0 pr-3",staticStyle:{height:"80px"},attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"adjustment-type"},[t._v("Mon – Thurs Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:t.areaData.standardPayRate},model:{value:t.standard_pay,callback:function(e){t.standard_pay=e},expression:"standard_pay"}})],1)]),a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0 pl-3",staticStyle:{height:"80px"},attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"adjustment-type"},[t._v("Fri-Sun Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:t.areaData.weekendPayRate},model:{value:t.weekend_pay,callback:function(e){t.weekend_pay=e},expression:"weekend_pay"}})],1)])],1)],1):t._e(),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Dream Drivers Сommission")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"%",type:"number",outlined:"",placeholder:t.default_comission,"persistent-hint":""},model:{value:t.invoice_comission,callback:function(e){t.invoice_comission=e},expression:"invoice_comission"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Booking fee")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:t.default_booking_fee,"persistent-hint":""},model:{value:t.booking_fee,callback:function(e){t.booking_fee=e},expression:"booking_fee"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Send Invoice")]),a("v-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Yes"},model:{value:t.send_invoice,callback:function(e){t.send_invoice=e},expression:"send_invoice"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-switch",{attrs:{label:"Special Password"},model:{value:t.switch_change_password,callback:function(e){t.switch_change_password=e},expression:"switch_change_password"}})],1),t.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:t.passwordRules,counter:12},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):t._e()],1)],1),a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-file-input",{ref:"image",attrs:{rules:t.imgRules,accept:"image/png, image/jpeg, image/jpg, image/bmp",placeholder:"Upload a file","prepend-icon":"mdi-camera",label:"File"},on:{change:t.onChangeFileUpload}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Meal",hint:"enter meal","error-messages":t.mealErrors},on:{input:function(e){return t.$v.meal.$touch()},blur:function(e){return t.$v.meal.$touch()}},model:{value:t.meal,callback:function(e){t.meal=e},expression:"meal"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Uniform",hint:"enter uniform","error-messages":t.uniformErrors,required:""},on:{input:function(e){return t.$v.uniform.$touch()},blur:function(e){return t.$v.uniform.$touch()}},model:{value:t.uniform,callback:function(e){t.uniform=e},expression:"uniform"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Cash Orders",hint:"enter cash orders","error-messages":t.cash_ordersErrors,required:""},on:{input:function(e){return t.$v.cash_orders.$touch()},blur:function(e){return t.$v.cash_orders.$touch()}},model:{value:t.cash_orders,callback:function(e){t.cash_orders=e},expression:"cash_orders"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Waiting location",hint:"enter waiting location","error-messages":t.waiting_locationErrors,required:""},on:{input:function(e){return t.$v.waiting_location.$touch()},blur:function(e){return t.$v.waiting_location.$touch()}},model:{value:t.waiting_location,callback:function(e){t.waiting_location=e},expression:"waiting_location"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Other",hint:"enter other","error-messages":t.otherErrors,required:""},on:{input:function(e){return t.$v.other.$touch()},blur:function(e){return t.$v.other.$touch()}},model:{value:t.other,callback:function(e){t.other=e},expression:"other"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bonus Target",hint:"enter Bonus Target","error-messages":t.bonus_targetErrors,required:""},on:{input:function(e){return t.$v.bonus_target.$touch()},blur:function(e){return t.$v.bonus_target.$touch()}},model:{value:t.bonus_target,callback:function(e){t.bonus_target=e},expression:"bonus_target"}})],1)],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-upload")]),t._v("Send Verification")],1),a("v-btn",{staticClass:"warning",attrs:{loading:t.localLoading,depressed:""},on:{click:t.clear}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("Clear")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"3abe6298",null);e.a=P.exports;p()(P,{VBtn:_.a,VCard:v.a,VCardText:f.b,VCardTitle:f.c,VCheckbox:g.a,VCol:b.a,VCombobox:y.a,VContainer:$.a,VDialog:x.a,VFileInput:w.a,VForm:k.a,VIcon:C.a,VListItem:R.a,VListItemContent:E.a,VListItemGroup:S.a,VListItemIcon:D.a,VListItemTitle:E.c,VRow:V.a,VSelect:q.a,VSwitch:A.a,VTab:L.a,VTabItem:T.a,VTabs:j.a,VTabsItems:I.a,VTextField:N.a})},"52ec":function(t,e,a){"use strict";var s=a("1dce"),i=a("b5ae"),r=a("bc3a"),n=a.n(r),o=a("2f62"),l=a("755e"),c=a("2ef0");const d={lat:51.4,lng:0};var u={mixins:[s.validationMixin],name:"NewLocationModal",props:["thisRestaurantData"],validations:{name:{required:i.required},email:{required:i.required,email:i.email},business_email:{required:i.required,email:i.email},telephone:{required:i.required},contactName:{required:i.required},area_id:{required:i.required},address:{required:i.required},standard_pay:{},weekend_pay:{},invoice_comission:{},meal:{},uniform:{},cash_orders:{},waiting_location:{},other:{},bonus_target:{},booking_fee:{},send_invoice:{},notify_shifts:{},notify_news_events:{}},data:()=>({switch_change_password:!1,showPassword:!1,passwordRules:[t=>!!t||"Please enter your password",t=>t&&t.length>=6||"Password should be at least six symbols long"],restaurantData:null,localLoading:!1,dialog:!1,id:"",name:"",email:"",business_email:"",address:"",map_latitude:void 0,map_longitude:void 0,contactName:"",telephone:"",postcode:"",area_id:void 0,areaData:{},password:"",standard_pay:null,weekend_pay:null,invoice_comission:null,booking_fee:null,send_invoice:!0,notify_shifts:!1,notify_news_events:!1,is_initialized:!1,map_center:d,map_zoom:12,map_marker:void 0,gmap_results:[],gmap_loading:!1,tab_edit_restaurant:void 0,default_comission:void 0,default_booking_fee:void 0,default_send_invoice:void 0,default_notify_shifts:void 0,default_notify_news_events:void 0,meal:void 0,uniform:void 0,cash_orders:void 0,waiting_location:void 0,other:void 0,bonus_target:void 0,file:void 0,imgRules:[t=>!(t&&t.size>1e7)||"File size should be less than 10 MB!"],logo_src:void 0,service_agreement_src:void 0}),watch:{thisRestaurantData:{handler:function(t,e){e.restaurateur&&this.email==e.restaurateur.email&&this.email!=t.restaurateur.email&&(this.email=this.thisRestaurantData.restaurateur.email)},deep:!0}},created(){},mounted(){this.restaurantData=this.thisRestaurantData,this.id=this.thisRestaurantData.id,this.name=this.thisRestaurantData.name,this.email=this.thisRestaurantData.restaurateur?this.thisRestaurantData.restaurateur.email:void 0,this.address=this.thisRestaurantData.address,this.contactName=this.thisRestaurantData.contactName,this.telephone=this.thisRestaurantData.telephone,this.business_email=this.thisRestaurantData.business_email,this.postcode=this.thisRestaurantData.postcode,this.standard_pay=this.thisRestaurantData.standard_pay,this.weekend_pay=this.thisRestaurantData.weekend_pay,this.invoice_comission=this.thisRestaurantData.invoice_comission,this.map_latitude=this.thisRestaurantData.map_latitude,this.map_longitude=this.thisRestaurantData.map_longitude,this.booking_fee=this.thisRestaurantData.booking_fee,this.send_invoice=this.thisRestaurantData.send_invoice,this.notify_shifts=this.thisRestaurantData.notify_shifts,this.notify_news_events=this.thisRestaurantData.notify_news_events,this.meal=this.thisRestaurantData.meal,this.uniform=this.thisRestaurantData.uniform,this.cash_orders=this.thisRestaurantData.cash_orders,this.waiting_location=this.thisRestaurantData.waiting_location,this.other=this.thisRestaurantData.other,this.bonus_target=this.thisRestaurantData.bonus_target,this.logo_src=this.thisRestaurantData.logo_src,this.service_agreement_src=this.thisRestaurantData.service_agreement_src,Object.keys(this.areas).forEach(t=>{+this.areas[t].id==+this.thisRestaurantData.areaId&&(this.area_id=this.areas[t].id,this.areaData=this.areas[t])})},updated(){if(this.is_initialized)return;let t=this,e=setInterval(()=>{if(!t.google||!t.$refs.mapRef)return;clearInterval(e),t.$data.is_initialized=!0;let a=c.find(t.options,t=>"map_center_default"==t.okey);if(a){let e=JSON.parse(a.ovalue);t.map_center={lat:e.lat,lng:e.lng},t.map_zoom=e.map_zoom}t.onUpgradeMapMarker();let s=c.find(t.options,t=>"restaurants_standard_invoice_comission"==t.okey);s&&s.ovalue&&(t.default_comission=s.ovalue)},10)},computed:{...Object(o.c)(["areas","restaurateurs","options"]),selectAreaErrors(){const t=[];return this.$v.area_id.$dirty?(!this.$v.area_id.required&&t.push("Area is required"),t):t},nameErrors(){const t=[];return this.$v.name.$dirty?(
/*!this.$v.name.maxLength && errors.push('Name must be at most 10 characters long')*/
!this.$v.name.required&&t.push("Restaurant name is required."),t):t},contactNameErrors(){const t=[];return this.$v.contactName.$dirty?(!this.$v.contactName.required&&t.push("Contact Name is required."),t):t},emailErrors(){const t=[];return this.$v.email.$dirty?(!this.$v.email.email&&t.push("Must be valid e-mail"),!this.$v.email.required&&t.push("E-mail is required"),t):t},businessEmailErrors(){const t=[];return this.$v.business_email.$dirty?(!this.$v.business_email.email&&t.push("Must be valid business e-mail"),t):t},addressErrors(){const t=[];return this.$v.address.$dirty?(!this.$v.address.required&&t.push("Address is required"),t):t},telephoneErrors(){const t=[];return this.$v.telephone.$dirty?(!this.$v.telephone.required&&t.push("Telephone number is required"),t):t},areasList(){return this.areas},mealErrors(){const t=[];return this.$v.meal.$dirty,t},uniformErrors(){const t=[];return this.$v.uniform.$dirty,t},cash_ordersErrors(){const t=[];return this.$v.cash_orders.$dirty,t},waiting_locationErrors(){const t=[];return this.$v.waiting_location.$dirty,t},otherErrors(){const t=[];return this.$v.other.$dirty,t},bonus_targetErrors(){const t=[];return this.$v.bonus_target.$dirty,t},google:l.gmapApi},methods:{onChangeArea(){Object.keys(this.areas).forEach(t=>{+this.areas[t].id==+this.area_id&&(this.areaData=this.areas[t])})},onAddressChanged(){if(!this.$data.address)return;this.gmap_loading=!0;let t=encodeURI(this.$data.address.split(" ").join("+"));n.a.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${this.appConfig.GOOGLE_MAP_API_KEY}&language=en`).then(t=>{this.gmap_loading=!1,this.$data.gmap_results=t.data&&t.data.results})},onSelectAddress(t){this.address=t.formatted_address;let e=c.find(t.address_components,t=>-1!==t.types.indexOf("postal_code"));e&&(this.postcode=e.short_name),this.map_latitude=c.get(t,"geometry.location.lat",void 0),this.map_longitude=c.get(t,"geometry.location.lng",void 0),this.map_latitude&&this.map_longitude&&this.onUpgradeMapMarker()},onUpgradeMapMarker(){let t=this;t.$data.map_marker=void 0,t.map_latitude&&t.map_longitude&&t.$refs.mapRef.$mapPromise.then(e=>{t.$data.map_marker=new t.google.maps.LatLng(t.map_latitude,t.map_longitude);var a=new t.google.maps.LatLngBounds;a.extend(t.$data.map_marker),e.setCenter(a.getCenter()),e.setZoom(t.map_zoom)})},onChangeMarkerPosition(t){this.map_latitude||this.map_longitude?(this.map_latitude=void 0,this.map_longitude=void 0):(this.map_latitude=t.latLng.lat(),this.map_longitude=t.latLng.lng()),this.onUpgradeMapMarker()},onSelectEmail(t){"object"==typeof t&&(this.email=t.email)},onChangeFileUpload(t){this.file=t},onRemoveLogo(){this.logo_src=void 0},cancel(){this.restaurantData=this.thisRestaurantData,this.name=this.thisRestaurantData.name,this.email=this.thisRestaurantData.restaurateur?this.thisRestaurantData.restaurateur.email:void 0,this.address=this.thisRestaurantData.address,this.contactName=this.thisRestaurantData.contactName,this.telephone=this.thisRestaurantData.telephone,this.business_email=this.thisRestaurantData.business_email,this.postcode=this.thisRestaurantData.postcode,this.area_id=this.thisRestaurantData.areaId,this.standard_pay=this.thisRestaurantData.standard_pay,this.weekend_pay=this.thisRestaurantData.weekend_pay,this.invoice_comission=this.thisRestaurantData.invoice_comission,this.booking_fee=this.thisRestaurantData.booking_fee,this.send_invoice=this.thisRestaurantData.send_invoice,this.map_latitude=this.thisRestaurantData.map_latitude,this.map_longitude=this.thisRestaurantData.map_longitude,this.notify_shifts=this.thisRestaurantData.notify_shifts,this.notify_news_events=this.thisRestaurantData.notify_news_events,this.meal=this.thisRestaurantData.meal,this.uniform=this.thisRestaurantData.uniform,this.cash_orders=this.thisRestaurantData.cash_orders,this.waiting_location=this.thisRestaurantData.waiting_location,this.other=this.thisRestaurantData.other,this.bonus_target=this.thisRestaurantData.bonus_target,this.logo_src=this.thisRestaurantData.logo_src,this.service_agreement_src=this.thisRestaurantData.service_agreement_src,this.file=void 0,Object.keys(this.areas).forEach(t=>{+this.areas[t].id==+this.thisRestaurantData.areaId&&(this.area_id=this.areas[t].id,this.areaData=this.areas[t])}),this.dialog=!1},submit(){if(this.$v.$touch(),!this.$v.$invalid){let e={id:this.id,name:this.name,email:this.email,address:this.address,contactName:this.contactName,telephone:this.telephone,business_email:this.business_email,postcode:this.postcode,areaId:this.area_id,standard_pay:this.standard_pay,weekend_pay:this.weekend_pay,invoice_comission:this.invoice_comission,booking_fee:this.booking_fee,send_invoice:this.send_invoice,notify_shifts:this.notify_shifts,notify_news_events:this.notify_news_events,map_latitude:this.map_latitude,map_longitude:this.map_longitude,meal:this.meal,uniform:this.uniform,cash_orders:this.cash_orders,waiting_location:this.waiting_location,other:this.other,bonus_target:this.bonus_target,logo_src:this.logo_src?this.logo_src:null,service_agreement_src:this.service_agreement_src};this.switch_change_password&&(e.password=this.password);let a=new FormData;for(var t of(a.append("file",this.file),c.each(e,(t,e)=>{a.append(e,t)}),a.keys()))null!=a.get(t)&&"null"!=a.get(t)||a.delete(t);this.localLoading=!0,this.$store.dispatch("editRestaurant",a).then(()=>{this.dialog=!1,this.password="",this.switch_change_password=!1,this.$emit("updated",""),this.cancel()}).catch(t=>{this.email="";let e=t.response;this.$store.dispatch("setError",e[Object.keys(e)[0]][0])}).finally(()=>{this.localLoading=!1})}}}},m=a("2877"),h=a("6544"),p=a.n(h),_=a("8336"),v=a("b0af"),f=a("99d9"),g=a("ac7c"),b=a("62ad"),y=a("2b5d"),$=a("a523"),x=a("169a"),w=a("23a7"),k=a("4bd4"),C=a("132d"),R=a("adda"),E=a("da13"),S=a("5d23"),D=a("1baa"),V=a("34c3"),q=a("0fd9"),A=a("b974"),L=a("b73d"),T=a("71a3"),j=a("c671"),I=a("fe57"),N=a("aac8"),P=a("8654"),M=Object(m.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"float-right primary",attrs:{small:"",id:"editModal",depressed:""}},s),[t._v("Edit Details\n        ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Restaurant")]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)]),a("v-card-text",[a("v-container",{staticClass:"pl-0 pr-0"},[a("v-tabs",{staticStyle:{"margin-bottom":"16px"},attrs:{"background-color":"grey lighten-4","fixed-tabs":"","slider-color":"grey darken-1"},model:{value:t.tab_edit_restaurant,callback:function(e){t.tab_edit_restaurant=e},expression:"tab_edit_restaurant"}},[a("v-tab",[t._v("Main")]),a("v-tab",[t._v("Additional")])],1),a("v-form",{ref:"form"},[a("v-tabs-items",{model:{value:t.tab_edit_restaurant,callback:function(e){t.tab_edit_restaurant=e},expression:"tab_edit_restaurant"}},[a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Name*",hint:"enter restaurant name",required:"","error-messages":t.nameErrors},on:{input:function(e){return t.$v.name.$touch()},blur:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Contact Name*",hint:"enter a contact name","error-messages":t.contactNameErrors,required:""},on:{input:function(e){return t.$v.contactName.$touch()},blur:function(e){return t.$v.contactName.$touch()}},model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify","clear-icon":"mdi-close",clearable:"",outlined:"",label:"Address*",hint:"type something to search","persistent-hint":"",required:"","error-messages":t.addressErrors},on:{input:function(e){return t.$v.address.$touch()},blur:function(e){return t.$v.address.$touch()},change:function(e){return t.onAddressChanged()}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[0!=t.gmap_results.length?a("h2",[t._v("Seach results:")]):t._e(),t.gmap_loading?a("h3",[t._v("Seaching address...")]):t._e(),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.gmap_results,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.onSelectAddress(e)}}},[a("v-list-item-icon",{staticClass:"driver-profile_icon"},[a("v-icon",[t._v("mdi-map-marker")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.formatted_address)}})],1)],1)})),1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"220px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:t.map_center,zoom:t.map_zoom,"map-type-id":"terrain"},on:{click:t.onChangeMarkerPosition}},[t.map_marker?a("GmapMarker",{attrs:{position:t.map_marker}}):t._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-combobox",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Login Email*",required:"","error-messages":t.emailErrors,"item-text":"email","item-value":"email",items:t.restaurateurs},on:{input:t.onSelectEmail,blur:function(e){return t.$v.email.$touch()},change:t.onSelectEmail},nativeOn:{input:function(e){t.email=e.srcElement.value}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Restaurant Billing Email*",type:"email",required:"","error-messages":t.businessEmailErrors},on:{change:function(e){return t.$v.business_email.$touch()},blur:function(e){return t.$v.business_email.$touch()}},model:{value:t.business_email,callback:function(e){t.business_email=e},expression:"business_email"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{outlined:"",label:"Area Assigned to*",required:"",items:t.areasList,"item-text":"name","item-value":"id","error-messages":t.selectAreaErrors},on:{change:t.onChangeArea,blur:function(e){return t.$v.area_id.$touch()}},model:{value:t.area_id,callback:function(e){t.area_id=e},expression:"area_id"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Telephone Number*",type:"Telephone",required:"","error-messages":t.telephoneErrors},on:{change:function(e){return t.$v.telephone.$touch()},blur:function(e){return t.$v.telephone.$touch()}},model:{value:t.telephone,callback:function(e){t.telephone=e},expression:"telephone"}})],1),null!==this.area_id?a("v-col",{staticClass:"d-flex flex-row pb-0",attrs:{sm:"12"}},[a("v-col",{staticStyle:{"padding-left":"0px !important"},attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Mon – Thurs Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:t.areaData.standardPayRate},model:{value:t.standard_pay,callback:function(e){t.standard_pay=e},expression:"standard_pay"}})],1)])],1),a("v-col",{staticStyle:{"padding-right":"0px !important"},attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Fri-Sun Pay/Hr*")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:t.areaData.weekendPayRate},model:{value:t.weekend_pay,callback:function(e){t.weekend_pay=e},expression:"weekend_pay"}})],1)])],1)],1):t._e(),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Dream Drivers Сommission")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"%",type:"number",outlined:"",placeholder:t.default_comission,"persistent-hint":""},model:{value:t.invoice_comission,callback:function(e){t.invoice_comission=e},expression:"invoice_comission"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Booking fee")]),a("div",{staticClass:"adjustment"},[a("v-text-field",{staticClass:"adjustment-input",attrs:{prefix:"£",type:"number",outlined:"",placeholder:t.default_booking_fee,"persistent-hint":""},model:{value:t.booking_fee,callback:function(e){t.booking_fee=e},expression:"booking_fee"}})],1)])],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Send Invoice")]),a("v-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Yes"},model:{value:t.send_invoice,callback:function(e){t.send_invoice=e},expression:"send_invoice"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-switch",{attrs:{label:"Change Password"},model:{value:t.switch_change_password,callback:function(e){t.switch_change_password=e},expression:"switch_change_password"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Notify shift")]),a("v-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Yes"},model:{value:t.notify_shifts,callback:function(e){t.notify_shifts=e},expression:"notify_shifts"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-col",{staticClass:"d-flex flex-column justify-space-between pa-0",staticStyle:{height:"80px"},attrs:{cols:"12"}},[a("span",{staticClass:"adjustment-type"},[t._v("Notify News,Events")]),a("v-checkbox",{attrs:{"true-value":1,"false-value":0,label:"Yes"},model:{value:t.notify_news_events,callback:function(e){t.notify_news_events=e},expression:"notify_news_events"}})],1)],1),t.switch_change_password?a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password","clear-icon":"mdi-close",clearable:"",outlined:"",name:"password",label:"Password",rules:t.passwordRules,counter:12},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):t._e()],1)],1),a("v-tab-item",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-file-input",{ref:"image",attrs:{rules:t.imgRules,accept:"image/png, image/jpeg, image/jpg, image/bmp",placeholder:"Upload a file","prepend-icon":"mdi-camera",label:"File"},on:{change:t.onChangeFileUpload}}),t.logo_src?a("v-img",{attrs:{"max-width":"500px","max-height":"300px",src:t.appConfig.app_url+"/images/"+t.logo_src},model:{value:t.logo_src,callback:function(e){t.logo_src=e},expression:"logo_src"}}):t._e(),t.logo_src?a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.onRemoveLogo()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("Remove Logo\n                                    ")],1):t._e()],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Meal",hint:"enter meal","error-messages":t.mealErrors},on:{input:function(e){return t.$v.meal.$touch()},blur:function(e){return t.$v.meal.$touch()}},model:{value:t.meal,callback:function(e){t.meal=e},expression:"meal"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Uniform",hint:"enter uniform","error-messages":t.uniformErrors,required:""},on:{input:function(e){return t.$v.uniform.$touch()},blur:function(e){return t.$v.uniform.$touch()}},model:{value:t.uniform,callback:function(e){t.uniform=e},expression:"uniform"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Cash Orders",hint:"enter cash orders","error-messages":t.cash_ordersErrors,required:""},on:{input:function(e){return t.$v.cash_orders.$touch()},blur:function(e){return t.$v.cash_orders.$touch()}},model:{value:t.cash_orders,callback:function(e){t.cash_orders=e},expression:"cash_orders"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Waiting location",hint:"enter waiting location","error-messages":t.waiting_locationErrors,required:""},on:{input:function(e){return t.$v.waiting_location.$touch()},blur:function(e){return t.$v.waiting_location.$touch()}},model:{value:t.waiting_location,callback:function(e){t.waiting_location=e},expression:"waiting_location"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Other",hint:"enter other","error-messages":t.otherErrors,required:""},on:{input:function(e){return t.$v.other.$touch()},blur:function(e){return t.$v.other.$touch()}},model:{value:t.other,callback:function(e){t.other=e},expression:"other"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{"clear-icon":"mdi-close",clearable:"",outlined:"",label:"Bonus Target",hint:"enter Bonus Target","error-messages":t.bonus_targetErrors,required:""},on:{input:function(e){return t.$v.bonus_target.$touch()},blur:function(e){return t.$v.bonus_target.$touch()}},model:{value:t.bonus_target,callback:function(e){t.bonus_target=e},expression:"bonus_target"}})],1),t.service_agreement_src?a("v-col",{staticStyle:{"padding-top":"0px!important","padding-bottom":"18px!important"},attrs:{cols:"12",sm:"12",md:"12"}},[a("h3",[t._v("Service Agreement (click URL to download)")]),a("a",{attrs:{href:t.appConfig.app_url+"/documents/service_agreements/restaurant/"+t.service_agreement_src,target:"_blank",download:""}},[t._v(t._s(t.service_agreement_src))])]):t._e()],1)],1)],1),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-4 primary",attrs:{depressed:"",disabled:this.$v.$invalid||t.localLoading,loading:t.localLoading},on:{click:t.submit}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-check-box-outline")]),t._v("\n                            Accept Changes\n                        ")],1),a("v-btn",{staticClass:"warning",attrs:{depressed:"",loading:t.localLoading},on:{click:t.cancel}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n                            Cancel\n                        ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"62f44d16",null);e.a=M.exports;p()(M,{VBtn:_.a,VCard:v.a,VCardText:f.b,VCardTitle:f.c,VCheckbox:g.a,VCol:b.a,VCombobox:y.a,VContainer:$.a,VDialog:x.a,VFileInput:w.a,VForm:k.a,VIcon:C.a,VImg:R.a,VListItem:E.a,VListItemContent:S.a,VListItemGroup:D.a,VListItemIcon:V.a,VListItemTitle:S.c,VRow:q.a,VSelect:A.a,VSwitch:L.a,VTab:T.a,VTabItem:j.a,VTabs:I.a,VTabsItems:N.a,VTextField:P.a})},9722:function(t,e,a){"use strict";var s=a("2f62"),i=a("2ef0"),r=a("fcb3"),n=a.n(r);var o={name:"Restaurants",data:()=>({localLoading:!1,config:n.a,filter_search:void 0,restaurateurFilter:void 0,RESTAURANT_STATUS_ACTIVE:10,RESTAURANT_STATUS_INACTIVE:20,filter_status:10,filter_search:"",filter_area:null,page:1,per_page:15,per_page_list:[10,15,50,100,1e3],restaurant_status_list:[{id:10,type:"root",name:"Show only active"},{id:20,type:"root",name:"Show only inactive"}]}),created(){Promise.all([this.$store.dispatch("fetchAreas"),this.$store.dispatch("fetchRestaurateurs"),this.$store.dispatch("fetchDrivers"),this.$store.dispatch("fetchOptions")]).then(()=>{this.$store.dispatch("fetchRestaurants")})},computed:{...Object(s.c)(["areas","restaurants","drivers","restaurateurs"]),restaurantsSearched(){let t=this.restaurants;switch(this.filter_search&&(t=i.filter(t,t=>-1!==t.name.toLowerCase().indexOf(this.filter_search))),this.filter_area&&(t=t.filter(t=>t.area_id==this.filter_area)),this.restaurateurFilter&&(t=i.filter(t,t=>t.restaurateur&&t.restaurateur_id==this.restaurateurFilter)),this.filter_status){case 10:t=i.filter(t,t=>t.status==this.filter_status);break;case 20:if(t=i.filter(t,t=>t.status==this.filter_status),0===t.length){let t=this.filter_status;this.$store.dispatch("fetchRestaurants",t)}}return t},restaurantsSearchedPaged(){let t=this.per_page*(this.page-1),e=t+this.per_page;return this.restaurantsSearched.slice(t,e)},total_pages(){return Math.ceil(this.restaurantsSearched.length/this.per_page)}},methods:{onAreaChange(){console.log("Selected Area ID:",this.filter_area),this.filterRestaurants()},deleteRestaurant(t){confirm("Remove restaurant "+t.name+"?")&&(this.localLoading=!0,this.$store.dispatch("deleteRestaurant",t).then(()=>{}).catch(t=>{t&&t.response&&t.response.data&&t.response.data.id&&alert(t.response.data.id[0])}).finally(()=>{this.localLoading=!1}))},inactiveItem(t,e){this.localLoading=!0,this.$store.dispatch("setRestaurantStatus",{status:t,restaurant_id:e}).then(()=>{}).finally(()=>{this.localLoading=!1})},onChangePage(t){this.page=t},goToSchedule(t){localStorage.setItem("redirrected_from_restaurants",t),window.location="schedule"},getAreaName(t){let e=i.find(this.areas,e=>e.id==t);return e?e.name:"-"},restaurantEdited(){this.$store.dispatch("fetchRestaurants"),this.$store.dispatch("fetchRestaurateurs")},onCangePerPage(){this.page=1}}},l=a("2877"),c=a("6544"),d=a.n(c),u=a("c6a6"),m=a("8336"),h=a("a609"),p=a("62ad"),_=a("a523"),v=a("0e8f"),f=a("132d"),g=a("8860"),b=a("da13"),y=a("5d23"),$=a("e449"),x=a("891e"),w=a("0fd9"),k=a("b974"),C=a("1f4f"),R=a("2fa4"),E=a("8654"),S=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[a("v-flex",[a("v-row",[a("h1",{staticClass:"page-title"},[t._v("Restaurants")]),a("v-spacer",{staticClass:"line"}),a("hr"),a("new-restaurant-modal")],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-autocomplete",{attrs:{items:t.areas,"item-text":"name","item-value":"id",label:"All Areas",solo:"",clearable:"","hide-details":""},on:{change:t.onAreaChange},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}}]),model:{value:t.filter_area,callback:function(e){t.filter_area=e},expression:"filter_area"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-autocomplete",{attrs:{items:t.restaurant_status_list,"item-text":"name","item-value":"id",label:"All statuses",solo:"",clearable:"","hide-details":""},on:{change:t.onStatusfilter},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("div",[a("div",{domProps:{innerHTML:t._s(e.item.name)}})])]}}]),model:{value:t.filter_status,callback:function(e){t.filter_status=e},expression:"filter_status"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-autocomplete",{attrs:{items:t.restaurateurs,label:"Search Restaurateur","item-text":"email","item-value":"id",solo:"",clearable:"","hide-details":""},model:{value:t.restaurateurFilter,callback:function(e){t.restaurateurFilter=e},expression:"restaurateurFilter"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-text-field",{attrs:{solo:"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search Restaurant",clearable:""},model:{value:t.filter_search,callback:function(e){t.filter_search=e},expression:"filter_search"}})],1)],1),0===t.restaurantsSearchedPaged.length?a("span",[t._v("No restaurants found")]):t._e(),0!==t.restaurantsSearchedPaged.length?a("div",{staticClass:"restaurants-table"},[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Restaurant Name")]),a("th",{staticClass:"text-left"},[t._v("Location Address")]),a("th",{staticClass:"text-left"},[t._v("Email")]),a("th",{staticClass:"text-left"},[t._v("Area")]),a("th",{staticClass:"text-right"},[t._v("Actions")])])]),a("tbody",t._l(t.restaurantsSearchedPaged,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",{staticClass:"pl-0 pr-0"},[a("restaurant-address-modal",{attrs:{thisRestaurantId:e.id}})],1),a("td",[t._v(t._s(e.restaurateur.email))]),a("td",[t._v(t._s(t.getAreaName(e.area_id)))]),a("td",[a("v-btn-toggle",{staticClass:"float-right edit-button-group"},[a("edit-restaurant-modal",{attrs:{thisRestaurantData:e},on:{updated:t.restaurantEdited}}),[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"primary dropdown-menu-activator",attrs:{tile:"",small:"",depressed:""}},s),[a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",[e.status==t.RESTAURANT_STATUS_ACTIVE?a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.inactiveItem(t.RESTAURANT_STATUS_INACTIVE,e.id)}}},[t._v("Mark as Inactive")]):a("v-list-item-title",{staticClass:"pointer",on:{click:function(a){return t.inactiveItem(t.RESTAURANT_STATUS_ACTIVE,e.id)}}},[t._v("Mark as Active")])],1),a("v-list-item",{on:{click:function(a){return t.deleteRestaurant(e)}}},[a("v-list-item-title",[t._v("Delete")])],1),a("v-list-item",{attrs:{restaurantId:e.id},on:{click:function(a){return t.goToSchedule(e.id)}}},[a("v-list-item-title",[t._v("Schedule")])],1),a("drivers-list-modal",{attrs:{restaurantId:e.id}}),a("new-post-modal",{attrs:{restaurantId:e.id}}),a("v-list-item",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{href:t.config.freeagent_base_url+"contacts/"+e.freeagent_id,target:"_blank"}},[a("v-list-item-title",[t._v("View Contact")])],1)],1)],1)],1)]],2)],1)])})),0)]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[a("v-flex",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-2",staticStyle:{"min-width":"75px"}},[t._v("\n                            Per page:\n                        ")]),a("v-select",{attrs:{items:t.per_page_list,label:"Solo field",solo:"",dense:"","hide-details":""},on:{change:t.onCangePerPage},model:{value:t.per_page,callback:function(e){t.per_page=e},expression:"per_page"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-pagination",{attrs:{value:t.page,length:t.total_pages,"total-visible":10},on:{input:t.onChangePage}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[t._v("\n                    "+t._s((t.page-1)*t.per_page+1)+" - "+t._s(t.page*t.per_page<t.restaurantsSearched.length?t.page*t.per_page:t.restaurantsSearched.length)+" of "+t._s(t.restaurantsSearched.length)+"\n                ")])],1)],1):t._e()],1)])}),[],!1,null,"5481d8eb",null);e.a=S.exports;d()(S,{VAutocomplete:u.a,VBtn:m.a,VBtnToggle:h.a,VCol:p.a,VContainer:_.a,VFlex:v.a,VIcon:f.a,VList:g.a,VListItem:b.a,VListItemTitle:y.c,VMenu:$.a,VPagination:x.a,VRow:w.a,VSelect:k.a,VSimpleTable:C.a,VSpacer:R.a,VTextField:E.a})},c20b:function(t,e,a){"use strict";var s=a("2f62"),i=a("755e"),r=a("2ef0");const n={lat:51.4,lng:0};var o={name:"LocationAddressModal",props:["thisRestaurantId"],data:()=>({dialog:!1,map_center:n,map_zoom:12,map_marker:void 0,is_initialized:!1}),computed:{...Object(s.c)(["options"]),thisRestaurant(){const t=this.thisRestaurantId;let e=JSON.parse(localStorage.getItem("user"));return"restaurant"==e.role?r.find(e.restaurants,e=>e.id==t):this.$store.getters.restaurantById(t)},google:i.gmapApi},updated(){if(!this.$data.dialog)return void(this.$data.is_initialized=!1);if(this.$data.is_initialized)return;let t=this;if(t.$data.map_marker=void 0,!this.thisRestaurant.map_latitude||!this.thisRestaurant.map_longitude){let e=r.find(t.options,t=>"map_center_default"==t.okey),a=JSON.parse(e.ovalue);return t.map_center={lat:a.lat,lng:a.lng},t.map_zoom=a.map_zoom,void(t.$data.is_initialized=!0)}let e=setInterval(()=>{t.google&&(clearInterval(e),t.$data.is_initialized=!0,t.$refs.mapRef.$mapPromise.then(e=>{t.$data.map_marker=new t.google.maps.LatLng(t.thisRestaurant.map_latitude,t.thisRestaurant.map_longitude);var a=new t.google.maps.LatLngBounds;a.extend(t.$data.map_marker),e.setCenter(a.getCenter()),e.setZoom(t.map_zoom)}))},10)}},l=a("2877"),c=a("6544"),d=a.n(c),u=a("b0af"),m=a("99d9"),h=a("a523"),p=a("169a"),_=a("0e8f"),v=a("132d"),f=a("a722"),g=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"fit-content"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-card-text",t._g({staticClass:"location-link",attrs:{flat:"",href:"#"}},s),[t._v(t._s(t.thisRestaurant.address))])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card-title",[a("span",{staticClass:"title--primary"},[t._v(t._s(t.thisRestaurant.name))]),a("div",{staticClass:"dialog-closeBtn",on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")])],1)])],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"800px",height:"420px"},attrs:{options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},center:t.map_center,zoom:t.map_zoom,"map-type-id":"terrain"}},[t.map_marker?a("GmapMarker",{attrs:{position:t.map_marker}}):t._e()],1)],1)],1)],1)],1)],1)}),[],!1,null,"8b87f904",null);e.a=g.exports;d()(g,{VCard:u.a,VCardText:m.b,VCardTitle:m.c,VContainer:h.a,VDialog:p.a,VFlex:_.a,VIcon:v.a,VLayout:f.a})}}]);