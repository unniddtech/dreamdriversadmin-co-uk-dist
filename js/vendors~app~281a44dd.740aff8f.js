(window.webpackJsonp=window.webpackJsonp||[]).push([["vendors~app~281a44dd"],{"0ac0":function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return g})),r.d(e,"c",(function(){return m})),r.d(e,"d",(function(){return d})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return M})),r.d(e,"g",(function(){return k})),r.d(e,"h",(function(){return R})),r.d(e,"i",(function(){return S})),r.d(e,"j",(function(){return A})),r.d(e,"k",(function(){return b}));var n=r("304a"),o=Math.pow(2,16);function i(t){return 65535&t}var a=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},s=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};s.prototype.recover=function(t){var e=0,r=i(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+function(t){return(t-(65535&t))/o}(t)},s.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},s.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},s.prototype._map=function(t,e,r){for(var n=0,i=this.inverted?2:1,s=this.inverted?1:2,p=0;p<this.ranges.length;p+=3){var c=this.ranges[p]-(this.inverted?n:0);if(c>t)break;var l=this.ranges[p+i],h=this.ranges[p+s],f=c+l;if(t<=f){var u=c+n+((l?t==c?-1:t==f?1:e:e)<0?0:h);if(r)return u;var d=t==(e<0?c:f)?null:p/3+(t-c)*o;return new a(u,e<0?t!=c:t!=f,d)}n+=h-l}return r?t+n:new a(t+n)},s.prototype.touches=function(t,e){for(var r=0,n=i(e),o=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var p=this.ranges[s]-(this.inverted?r:0);if(p>t)break;var c=this.ranges[s+o];if(t<=p+c&&s==3*n)return!0;r+=this.ranges[s+a]-c}return!1},s.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),p=this.ranges[n+e],c=this.ranges[n+r];t(a,a+p,s,s+c),o+=c-p}},s.prototype.invert=function(){return new s(this.ranges,!this.inverted)},s.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},s.offset=function(t){return 0==t?s.empty:new s(t<0?[0,-t,0]:[0,0,t])},s.empty=new s([]);var p=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}p.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new p(this.maps,this.mirror,t,e)},p.prototype.copy=function(){return new p(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},p.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},p.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},p.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},p.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},p.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},p.prototype.invert=function(){var t=new p;return t.appendMappingInverted(this),t},p.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},p.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},p.prototype._map=function(t,e,r){for(var n=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}i.deleted&&(n=!0),t=i.pos}return r?t:new a(t,n)},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="TransformError";var l=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new p},h={before:{configurable:!0},docChanged:{configurable:!0}};function f(){throw new Error("Override me")}h.before.get=function(){return this.docs.length?this.docs[0]:this.doc},l.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new c(e.failed);return this},l.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},h.docChanged.get=function(){return this.steps.length>0},l.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(l.prototype,h);var u=Object.create(null),d=function(){};d.prototype.apply=function(t){return f()},d.prototype.getMap=function(){return s.empty},d.prototype.invert=function(t){return f()},d.prototype.map=function(t){return f()},d.prototype.merge=function(t){return null},d.prototype.toJSON=function(){return f()},d.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=u[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},d.jsonID=function(t,e){if(t in u)throw new RangeError("Duplicate use of step JSON ID "+t);return u[t]=e,e.prototype.jsonID=t,e};var v=function(t,e){this.doc=t,this.failed=e};v.ok=function(t){return new v(t,null)},v.fail=function(t){return new v(null,t)},v.fromReplace=function(t,e,r,o){try{return v.ok(t.replace(e,r,o))}catch(t){if(t instanceof n.h)return v.fail(t.message);throw t}};var m=function(t){function e(e,r,n,o){t.call(this),this.from=e,this.to=r,this.slice=n,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&y(t,this.from,this.to)?v.fail("Structure replace would overwrite content"):v.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new s([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted?null:new e(r.pos,Math.max(r.pos,n.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var r=this.slice.size+t.slice.size==0?n.j.empty:new n.j(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,r,this.structure)}var o=this.slice.size+t.slice.size==0?n.j.empty:new n.j(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(r.from,r.to,n.j.fromJSON(t,r.slice),!!r.structure)},e}(d);d.jsonID("replace",m);var g=function(t){function e(e,r,n,o,i,a,s){t.call(this),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(y(t,this.from,this.gapFrom)||y(t,this.gapTo,this.to)))return v.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return v.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?v.fromReplace(t,this.from,this.to,r):v.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var r=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return r.deleted&&n.deleted||o<r.pos||i>n.pos?null:new e(r.pos,n.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(r.from,r.to,r.gapFrom,r.gapTo,n.j.fromJSON(t,r.slice),r.insert,!!r.structure)},e}(d);function y(t,e,r){for(var n=t.resolve(e),o=r-e,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var a=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function w(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function b(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!w(n,o,i))break}}function S(t,e,r,n){void 0===n&&(n=t);var o=function(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return r.canReplaceWith(n,o,a)?i:null}(t,e),i=o&&function(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.child(n),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:e).contentMatch,p=n;s&&p<o;p++)s=s.matchType(r.child(p).type);if(!s||!s.validEnd)return null;return a}(n,e);return i?o.map(C).concat({type:e,attrs:r}).concat(i.map(C)):null}function C(t){return{type:t,attrs:null}}function k(t,e,r,n){void 0===r&&(r=1);var o=t.resolve(e),i=o.depth-r,a=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,p=r-2;s>i;s--,p--){var c=o.node(s),l=o.index(s);if(c.type.spec.isolating)return!1;var h=c.content.cutByIndex(l,c.childCount),f=n&&n[p]||c;if(f!=c&&(h=h.replaceChild(0,f.type.create(f.attrs))),!c.canReplace(l+1,c.childCount)||!f.type.validContent(h))return!1}var u=o.indexAfter(i),d=n&&n[0];return o.node(i).canReplaceWith(u,u,d?d.type:o.node(i+1).type)}function M(t,e){var r=t.resolve(e),n=r.index();return $(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function $(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function A(t,e,r){void 0===r&&(r=-1);for(var n=t.resolve(e),o=n.depth;;o--){var i=void 0,a=void 0,s=n.index(o);if(o==n.depth?(i=n.nodeBefore,a=n.nodeAfter):r>0?(i=n.node(o+1),s++,a=n.node(o).maybeChild(s)):(i=n.node(o).maybeChild(s-1),a=n.node(o+1)),i&&!i.isTextblock&&$(i,a)&&n.node(o).canReplace(s,s+1))return e;if(0==o)break;e=r<0?n.before(o):n.after(o)}}function R(t,e,r){var n=t.resolve(e);if(!r.content.size)return e;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==r.openStart&&r.size?2:1);a++)for(var s=n.depth;s>=0;s--){var p=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,c=n.index(s)+(p>0?1:0);if(1==a?n.node(s).canReplace(c,c,o):n.node(s).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==p?n.pos:p<0?n.before(s+1):n.after(s+1)}return null}function N(t,e,r){for(var o=[],i=0;i<t.childCount;i++){var a=t.child(i);a.content.size&&(a=a.copy(N(a.content,e,a))),a.isInline&&(a=e(a,r,i)),o.push(a)}return n.c.fromArray(o)}d.jsonID("replaceAround",g),l.prototype.lift=function(t,e){for(var r=t.$from,o=t.$to,i=t.depth,a=r.before(i+1),s=o.after(i+1),p=a,c=s,l=n.c.empty,h=0,f=i,u=!1;f>e;f--)u||r.index(f)>0?(u=!0,l=n.c.from(r.node(f).copy(l)),h++):p--;for(var d=n.c.empty,v=0,m=i,y=!1;m>e;m--)y||o.after(m+1)<o.end(m)?(y=!0,d=n.c.from(o.node(m).copy(d)),v++):c++;return this.step(new g(p,c,a,s,new n.j(l.append(d),h,v),l.size-h,!0))},l.prototype.wrap=function(t,e){for(var r=n.c.empty,o=e.length-1;o>=0;o--)r=n.c.from(e[o].type.create(e[o].attrs,r));var i=t.start,a=t.end;return this.step(new g(i,a,i,a,new n.j(r,0,0),e.length,!0))},l.prototype.setBlockType=function(t,e,r,o){var i=this;if(void 0===e&&(e=t),!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(r,o)&&function(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}(i.doc,i.mapping.slice(a).map(e),r)){i.clearIncompatible(i.mapping.slice(a).map(e,1),r);var s=i.mapping.slice(a),p=s.map(e,1),c=s.map(e+t.nodeSize,1);return i.step(new g(p,c,p+1,c-1,new n.j(n.c.from(r.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},l.prototype.setNodeMarkup=function(t,e,r,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var a=e.create(r,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,a);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new g(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new n.j(n.c.from(a),0,0),1,!0))},l.prototype.split=function(t,e,r){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=n.c.empty,a=n.c.empty,s=o.depth,p=o.depth-e,c=e-1;s>p;s--,c--){i=n.c.from(o.node(s).copy(i));var l=r&&r[c];a=n.c.from(l?l.type.create(l.attrs,a):o.node(s).copy(a))}return this.step(new m(t,t,new n.j(i.append(a),e,e),!0))},l.prototype.join=function(t,e){void 0===e&&(e=1);var r=new m(t-e,t+e,n.j.empty,!0);return this.step(r)};var O=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),a=new n.j(N(r.content,(function(t,r){return t.isAtom&&r.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),r.openStart,r.openEnd);return v.fromReplace(t,this.from,this.to,a)},e.prototype.invert=function(){return new x(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(d);d.jsonID("addMark",O);var x=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),o=new n.j(N(r.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),r.openStart,r.openEnd);return v.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new O(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(d);function j(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}d.jsonID("removeMark",x),l.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(t,e,(function(n,p,c){if(n.isInline){var l=n.marks;if(!r.isInSet(l)&&c.type.allowsMarkType(r.type)){for(var h=Math.max(p,t),f=Math.min(p+n.nodeSize,e),u=r.addToSet(l),d=0;d<l.length;d++)l[d].isInSet(u)||(a&&a.to==h&&a.mark.eq(l[d])?a.to=f:o.push(a=new x(h,f,l[d])));s&&s.to==h?s.to=f:i.push(s=new O(h,f,r))}}})),o.forEach((function(t){return n.step(t)})),i.forEach((function(t){return n.step(t)})),this},l.prototype.removeMark=function(t,e,r){var o=this;void 0===r&&(r=null);var i=[],a=0;return this.doc.nodesBetween(t,e,(function(o,s){if(o.isInline){a++;var p=null;if(r instanceof n.e){var c=r.isInSet(o.marks);c&&(p=[c])}else r?r.isInSet(o.marks)&&(p=[r]):p=o.marks;if(p&&p.length)for(var l=Math.min(s+o.nodeSize,e),h=0;h<p.length;h++){for(var f=p[h],u=void 0,d=0;d<i.length;d++){var v=i[d];v.step==a-1&&f.eq(i[d].style)&&(u=v)}u?(u.to=l,u.step=a):i.push({style:f,from:Math.max(s,t),to:l,step:a})}}})),i.forEach((function(t){return o.step(new x(t.from,t.to,t.style))})),this},l.prototype.clearIncompatible=function(t,e,r){void 0===r&&(r=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],a=t+1,s=0;s<o.childCount;s++){var p=o.child(s),c=a+p.nodeSize,l=r.matchType(p.type,p.attrs);if(l){r=l;for(var h=0;h<p.marks.length;h++)e.allowsMarkType(p.marks[h].type)||this.step(new x(a,c,p.marks[h]))}else i.push(new m(a,c,n.j.empty));a=c}if(!r.validEnd){var f=r.fillBefore(n.c.empty,!0);this.replace(a,a,new n.j(f,0,0))}for(var u=i.length-1;u>=0;u--)this.step(i[u]);return this},l.prototype.replace=function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=n.j.empty);var o=function(t,e,r,o){if(void 0===r&&(r=e),void 0===o&&(o=n.j.empty),e==r&&!o.size)return null;var i=t.resolve(e),a=t.resolve(r);return j(i,a,o)?new m(e,r,o):new z(i,a,o).fit()}(this.doc,t,e,r);return o&&this.step(o),this},l.prototype.replaceWith=function(t,e,r){return this.replace(t,e,new n.j(n.c.from(r),0,0))},l.prototype.delete=function(t,e){return this.replace(t,e,n.j.empty)},l.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var z=function(t,e,r){this.$to=e,this.$from=t,this.unplaced=r,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=n.c.empty;for(var a=t.depth;a>0;a--)this.placed=n.c.from(t.node(a).copy(this.placed))},E={depth:{configurable:!0}};function _(t,e,r){return 0==e?t.cutByIndex(r):t.replaceChild(0,t.firstChild.copy(_(t.firstChild.content,e-1,r)))}function T(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(T(t.lastChild.content,e-1,r)))}function I(t,e){for(var r=0;r<e;r++)t=t.firstChild.content;return t}function F(t,e,r){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,F(o.firstChild,e-1,1==o.childCount?r-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),r<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(n.c.empty,!0)))),t.copy(o)}function D(t,e,r,n,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!r.compatibleContent(i.type))return null;var s=n.fillBefore(i.content,!0,a);return s&&!function(t,e,r){for(var n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(r,i.content,a)?s:null}function J(t,e,r,o,i){if(e<r){var a=t.firstChild;t=t.replaceChild(0,a.copy(J(a.content,e+1,r,o,a)))}if(e>o){var s=i.contentMatchAt(0),p=s.fillBefore(t).append(t);t=p.append(s.matchFragment(p).fillBefore(n.c.empty,!0))}return t}function B(t,e){for(var r=[],n=Math.min(t.depth,e.depth);n>=0;n--){var o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;o==e.start(n)&&r.push(n)}return r}E.depth.get=function(){return this.frontier.length-1},z.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;for(var a=this.placed,s=o.depth,p=i.depth;s&&p&&1==a.childCount;)a=a.firstChild.content,s--,p--;var c=new n.j(a,s,p);return e>-1?new g(o.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||o.pos!=this.$to.pos?new m(o.pos,i.pos,c):void 0},z.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var r=void 0,o=(e?(r=I(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var a=this.frontier[i],s=a.type,p=a.match,c=void 0,l=void 0;if(1==t&&(o?p.matchType(o.type)||(l=p.fillBefore(n.c.from(o),!1)):s.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:i,parent:r,inject:l};if(2==t&&o&&(c=p.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:r,wrap:c};if(r&&p.matchType(r.type))break}},z.prototype.openMore=function(){var t=this.unplaced,e=t.content,r=t.openStart,o=t.openEnd,i=I(e,r);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new n.j(e,r+1,Math.max(o,i.size+r>=e.size-o?r+1:0)),!0)},z.prototype.dropNode=function(){var t=this.unplaced,e=t.content,r=t.openStart,o=t.openEnd,i=I(e,r);if(i.childCount<=1&&r>0){var a=e.size-r<=r+i.size;this.unplaced=new n.j(_(e,r-1,1),r-1,a?r-1:o)}else this.unplaced=new n.j(_(e,r,1),r,o)},z.prototype.placeNodes=function(t){for(var e=t.sliceDepth,r=t.frontierDepth,o=t.parent,i=t.inject,a=t.wrap;this.depth>r;)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var p=this.unplaced,c=o?o.content:p.content,l=p.openStart-e,h=0,f=[],u=this.frontier[r],d=u.match,v=u.type;if(i){for(var m=0;m<i.childCount;m++)f.push(i.child(m));d=d.matchFragment(i)}for(var g=c.size+e-(p.content.size-p.openEnd);h<c.childCount;){var y=c.child(h),w=d.matchType(y.type);if(!w)break;(++h>1||0==l||y.content.size)&&(d=w,f.push(F(y.mark(v.allowedMarks(y.marks)),1==h?l:0,h==c.childCount?g:-1)))}var b=h==c.childCount;b||(g=-1),this.placed=T(this.placed,r,n.c.from(f)),this.frontier[r].match=d,b&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var S=0,C=c;S<g;S++){var k=C.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),C=k.content}this.unplaced=b?0==e?n.j.empty:new n.j(_(p.content,e-1,1),e-1,g<0?p.openEnd:e-1):new n.j(_(p.content,e,h),p.openStart,p.openEnd)},z.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!D(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var r=this.$to.depth,n=this.$to.after(r);r>1&&n==this.$to.end(--r);)++n;return n},z.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var r=this.frontier[e],n=r.match,o=r.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=D(t,e,o,n,i);if(a){for(var s=e-1;s>=0;s--){var p=this.frontier[s],c=p.match,l=D(t,s,p.type,c,!0);if(!l||l.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}},z.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=T(this.placed,e.depth,e.fit)),t=e.move;for(var r=e.depth+1;r<=t.depth;r++){var n=t.node(r),o=n.type.contentMatch.fillBefore(n.content,!0,t.index(r));this.openFrontierNode(n.type,n.attrs,o)}return t},z.prototype.openFrontierNode=function(t,e,r){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=T(this.placed,this.depth,n.c.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})},z.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(n.c.empty,!0);t.childCount&&(this.placed=T(this.placed,this.frontier.length,t))},Object.defineProperties(z.prototype,E),l.prototype.replaceRange=function(t,e,r){if(!r.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(j(o,i,r))return this.step(new m(t,e,r));var a=B(o,this.doc.resolve(e));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var p=o.depth,c=o.pos-1;p>0;p--,c--){var l=o.node(p).type.spec;if(l.defining||l.isolating)break;a.indexOf(p)>-1?s=p:o.before(p)==c&&a.splice(1,0,-p)}for(var h=a.indexOf(s),f=[],u=r.openStart,d=r.content,v=0;;v++){var g=d.firstChild;if(f.push(g),v==r.openStart)break;d=g.content}u>0&&f[u-1].type.spec.defining&&o.node(h).type!=f[u-1].type?u-=1:u>=2&&f[u-1].isTextblock&&f[u-2].type.spec.defining&&o.node(h).type!=f[u-2].type&&(u-=2);for(var y=r.openStart;y>=0;y--){var w=(y+u+1)%(r.openStart+1),b=f[w];if(b)for(var S=0;S<a.length;S++){var C=a[(S+h)%a.length],k=!0;C<0&&(k=!1,C=-C);var M=o.node(C-1),$=o.index(C-1);if(M.canReplaceWith($,$,b.type,b.marks))return this.replace(o.before(C),k?i.after(C):e,new n.j(J(r.content,0,r.openStart,w),w,r.openEnd))}}for(var A=this.steps.length,R=a.length-1;R>=0&&(this.replace(t,e,r),!(this.steps.length>A));R--){var N=a[R];R<0||(t=o.before(N),e=i.after(N))}return this},l.prototype.replaceRangeWith=function(t,e,r){if(!r.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var a=n.depth-1;a>=0;a--){var s=n.indexAfter(a);if(n.node(a).canReplaceWith(s,s,r))return n.after(a+1);if(s<n.node(a).childCount)return null}}(this.doc,t,r.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new n.j(n.c.from(r),0,0))},l.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=B(r,n),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||r.node(a).type.contentMatch.validEnd)return this.delete(r.start(a),n.end(a));if(a>0&&(s||r.node(a-1).canReplace(r.index(a-1),n.indexAfter(a-1))))return this.delete(r.before(a),n.after(a))}for(var p=1;p<=r.depth&&p<=n.depth;p++)if(t-r.start(p)==r.depth-p&&e>r.end(p)&&n.end(p)-e!=n.depth-p)return this.delete(r.before(p),e);return this.delete(t,e)}},5313:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return C})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return $})),r.d(e,"e",(function(){return N})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return p})),r.d(e,"h",(function(){return c}));var n=r("304a"),o=r("0ac0"),i=Object.create(null),a=function(t,e,r){this.ranges=r||[new p(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},s={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};s.anchor.get=function(){return this.$anchor.pos},s.head.get=function(){return this.$head.pos},s.from.get=function(){return this.$from.pos},s.to.get=function(){return this.$to.pos},s.$from.get=function(){return this.ranges[0].$from},s.$to.get=function(){return this.ranges[0].$to},s.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},a.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},a.prototype.replace=function(t,e){void 0===e&&(e=n.j.empty);for(var r=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=r,r=r.lastChild;for(var a=t.steps.length,s=this.ranges,p=0;p<s.length;p++){var c=s[p],l=c.$from,h=c.$to,f=t.mapping.slice(a);t.replaceRange(f.map(l.pos),f.map(h.pos),p?n.j.empty:e),0==p&&m(t,a,(r?r.isInline:o&&o.isTextblock)?-1:1)}},a.prototype.replaceWith=function(t,e){for(var r=t.steps.length,n=this.ranges,o=0;o<n.length;o++){var i=n[o],a=i.$from,s=i.$to,p=t.mapping.slice(r),c=p.map(a.pos),l=p.map(s.pos);o?t.deleteRange(c,l):(t.replaceRangeWith(c,l,e),m(t,r,e.isInline?-1:1))}},a.findFrom=function(t,e,r){var n=t.parent.inlineContent?new c(t):v(t.node(0),t.parent,t.pos,t.index(),e,r);if(n)return n;for(var o=t.depth-1;o>=0;o--){var i=e<0?v(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):v(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(i)return i}},a.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new u(t.node(0))},a.atStart=function(t){return v(t,t,0,0,1)||new u(t)},a.atEnd=function(t){return v(t,t,t.content.size,t.childCount,-1)||new u(t)},a.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=i[e.type];if(!r)throw new RangeError("No selection type "+e.type+" defined");return r.fromJSON(t,e)},a.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},a.prototype.getBookmark=function(){return c.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(a.prototype,s),a.prototype.visible=!0;var p=function(t,e){this.$from=t,this.$to=e},c=function(t){function e(e,r){void 0===r&&(r=e),t.call(this,e,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={$cursor:{configurable:!0}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(r,n){var o=r.resolve(n.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=r.resolve(n.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,r){if(void 0===r&&(r=n.j.empty),t.prototype.replace.call(this,e,r),r==n.j.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new l(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,r){if("number"!=typeof r.anchor||"number"!=typeof r.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(r.anchor),t.resolve(r.head))},e.create=function(t,e,r){void 0===r&&(r=e);var n=t.resolve(e);return new this(n,r==e?n:t.resolve(r))},e.between=function(r,n,o){var i=r.pos-n.pos;if(o&&!i||(o=i>=0?1:-1),!n.parent.inlineContent){var a=t.findFrom(n,o,!0)||t.findFrom(n,-o,!0);if(!a)return t.near(n,o);n=a.$head}return r.parent.inlineContent||(0==i||(r=(t.findFrom(r,-o,!0)||t.findFrom(r,o,!0)).$anchor).pos<n.pos!=i<0)&&(r=n),new e(r,n)},Object.defineProperties(e.prototype,r),e}(a);a.jsonID("text",c);var l=function(t,e){this.anchor=t,this.head=e};l.prototype.map=function(t){return new l(t.map(this.anchor),t.map(this.head))},l.prototype.resolve=function(t){return c.between(t.resolve(this.anchor),t.resolve(this.head))};var h=function(t){function e(e){var r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);t.call(this,e,n),this.node=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(r,n){var o=n.mapResult(this.anchor),i=o.deleted,a=o.pos,s=r.resolve(a);return i?t.near(s):new e(s)},e.prototype.content=function(){return new n.j(n.c.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new f(this.anchor)},e.fromJSON=function(t,r){if("number"!=typeof r.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(r.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(a);h.prototype.visible=!1,a.jsonID("node",h);var f=function(t){this.anchor=t};f.prototype.map=function(t){var e=t.mapResult(this.anchor),r=e.deleted,n=e.pos;return r?new l(n,n):new f(n)},f.prototype.resolve=function(t){var e=t.resolve(this.anchor),r=e.nodeAfter;return r&&h.isSelectable(r)?new h(e):a.near(e)};var u=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,r){if(void 0===r&&(r=n.j.empty),r==n.j.empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,r)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return d},e}(a);a.jsonID("all",u);var d={map:function(){return this},resolve:function(t){return new u(t)}};function v(t,e,r,n,o,i){if(e.inlineContent)return c.create(t,r);for(var a=n-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var s=e.child(a);if(s.isAtom){if(!i&&h.isSelectable(s))return h.create(t,r-(o<0?s.nodeSize:0))}else{var p=v(t,s,r+o,o<0?s.childCount:0,o,i);if(p)return p}r+=s.nodeSize*o}}function m(t,e,r){var n=t.steps.length-1;if(!(n<e)){var i,s=t.steps[n];if(s instanceof o.c||s instanceof o.b)t.mapping.maps[n].forEach((function(t,e,r,n){null==i&&(i=n)})),t.setSelection(a.near(t.doc.resolve(i),r))}}var g=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return r.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},r.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return n.d.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},r.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,r){t.prototype.addStep.call(this,e,r),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var r=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||n.d.none))),r.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,r){void 0===r&&(r=e);var n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,r);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=r==e?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(e,r,n.text(t,o)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},r.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},r.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,r),e}(o.e);function y(t,e){return e&&t?t.bind(e):t}var w=function(t,e,r){this.name=t,this.init=y(e.init,r),this.apply=y(e.apply,r)},b=[new w("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new w("selection",{init:function(t,e){return t.selection||a.atStart(e.doc)},apply:function(t){return t.selection}}),new w("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new w("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],S=function(t,e){var r=this;this.schema=t,this.fields=b.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new w(t.key,t.spec.state,t))}))},C=function(t){this.config=t},k={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};k.schema.get=function(){return this.config.schema},k.plugins.get=function(){return this.config.plugins},C.prototype.apply=function(t){return this.applyTransaction(t).state},C.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=e){var n=this.config.plugins[r];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,t,this))return!1}return!0},C.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],r=this.applyInner(t),n=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=n?n[i].n:0,p=n?n[i].state:this,c=s<e.length&&a.spec.appendTransaction.call(a,s?e.slice(s):e,p,r);if(c&&r.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!n){n=[];for(var l=0;l<this.config.plugins.length;l++)n.push(l<i?{state:r,n:e.length}:{state:this,n:0})}e.push(c),r=r.applyInner(c),o=!0}n&&(n[i]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}},C.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new C(this.config),r=this.config.fields,n=0;n<r.length;n++){var o=r[n];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<M.length;i++)M[i](this,t,e);return e},k.tr.get=function(){return new g(this)},C.create=function(t){for(var e=new S(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new C(e),n=0;n<e.fields.length;n++)r[e.fields[n].name]=e.fields[n].init(t,r);return r},C.prototype.reconfigure=function(t){for(var e=new S(this.schema,t.plugins),r=e.fields,n=new C(e),o=0;o<r.length;o++){var i=r[o].name;n[i]=this.hasOwnProperty(i)?this[i]:r[o].init(t,n)}return n},C.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var r in t){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=t[r],o=n.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(n,this[n.key]))}return e},C.fromJSON=function(t,e,r){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new S(t.schema,t.plugins),i=new C(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=n.f.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=a.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var s in r){var p=r[s],c=p.spec.state;if(p.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(i[o.name]=c.fromJSON.call(p,t,e[s],i))}i[o.name]=o.init(t,i)}})),i},C.addApplyListener=function(t){M.push(t)},C.removeApplyListener=function(t){var e=M.indexOf(t);e>-1&&M.splice(e,1)},Object.defineProperties(C.prototype,k);var M=[];var $=function(t){this.props={},t.props&&function t(e,r,n){for(var o in e){var i=e[o];i instanceof Function?i=i.bind(r):"handleDOMEvents"==o&&(i=t(i,r,{})),n[o]=i}return n}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:R("plugin")};$.prototype.getState=function(t){return t[this.key]};var A=Object.create(null);function R(t){return t in A?t+"$"+ ++A[t]:(A[t]=0,t+"$")}var N=function(t){void 0===t&&(t="key"),this.key=R(t)};N.prototype.get=function(t){return t.config.pluginsByKey[this.key]},N.prototype.getState=function(t){return t[this.key]}},"55be":function(t,e,r){"use strict";r.d(e,"a",(function(){return tt})),r.d(e,"b",(function(){return Z})),r.d(e,"c",(function(){return it})),r.d(e,"d",(function(){return ot})),r.d(e,"e",(function(){return Ct})),r.d(e,"f",(function(){return rt})),r.d(e,"g",(function(){return st})),r.d(e,"h",(function(){return yt})),r.d(e,"i",(function(){return U})),r.d(e,"j",(function(){return gt})),r.d(e,"k",(function(){return ct})),r.d(e,"l",(function(){return ht})),r.d(e,"m",(function(){return lt})),r.d(e,"n",(function(){return Nt})),r.d(e,"o",(function(){return y})),r.d(e,"p",(function(){return mt})),r.d(e,"q",(function(){return vt})),r.d(e,"r",(function(){return dt}));var n,o,i=r("5313"),a=r("304a"),s=r("7f06"),p=r("576a"),c=r("0ac0");if("undefined"!=typeof WeakMap){var l=new WeakMap;n=function(t){return l.get(t)},o=function(t,e){return l.set(t,e),e}}else{var h=[],f=0;n=function(t){for(var e=0;e<h.length;e+=2)if(h[e]==t)return h[e+1]},o=function(t,e){return 10==f&&(f=0),h[f++]=t,h[f++]=e}}var u=function(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n},d=function(t,e,r,n){this.width=t,this.height=e,this.map=r,this.problems=n};function v(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],r=0;r<t.colspan;r++)e.push(0);return e}function m(t,e){var r=t.getAttribute("data-colwidth"),n=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:n&&n.length==o?n:null};for(var a in e){var s=e[a].getFromDOM,p=s&&s(t);null!=p&&(i[a]=p)}return i}function g(t,e){var r={};for(var n in 1!=t.attrs.colspan&&(r.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(r.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(r["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[n].setDOMAttr;o&&o(t.attrs[n],r)}return r}function y(t){var e=t.cellAttributes||{},r={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var n in e)r[n]={default:e[n].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return m(t,e)}}],toDOM:function(t){return["td",g(t,e),0]}},table_header:{content:t.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return m(t,e)}}],toDOM:function(t){return["th",g(t,e),0]}}}}function w(t){var e=t.cached.tableNodeTypes;if(!e)for(var r in e=t.cached.tableNodeTypes={},t.nodes){var n=t.nodes[r],o=n.spec.tableRole;o&&(e[o]=n)}return e}d.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var r=this.map[e];if(r==t){for(var n=e%this.width,o=e/this.width|0,i=n+1,a=o+1,s=1;i<this.width&&this.map[e+s]==r;s++)i++;for(var p=1;a<this.height&&this.map[e+this.width*p]==r;p++)a++;return new u(n,o,i,a)}}throw new RangeError("No cell with offset "+t+" found")},d.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},d.prototype.nextCell=function(t,e,r){var n=this.findCell(t),o=n.left,i=n.right,a=n.top,s=n.bottom;return"horiz"==e?(r<0?0==o:i==this.width)?null:this.map[a*this.width+(r<0?o-1:i)]:(r<0?0==a:s==this.height)?null:this.map[o+this.width*(r<0?a-1:s)]},d.prototype.rectBetween=function(t,e){var r=this.findCell(t),n=r.left,o=r.right,i=r.top,a=r.bottom,s=this.findCell(e),p=s.left,c=s.right,l=s.top,h=s.bottom;return new u(Math.min(n,p),Math.min(i,l),Math.max(o,c),Math.max(a,h))},d.prototype.cellsInRect=function(t){for(var e=[],r={},n=t.top;n<t.bottom;n++)for(var o=t.left;o<t.right;o++){var i=n*this.width+o,a=this.map[i];r[a]||(r[a]=!0,o==t.left&&o&&this.map[i-1]==a||n==t.top&&n&&this.map[i-this.width]==a||e.push(a))}return e},d.prototype.positionAt=function(t,e,r){for(var n=0,o=0;;n++){var i=o+r.child(n).nodeSize;if(n==t){for(var a=e+t*this.width,s=(t+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}},d.get=function(t){return n(t)||o(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,r=!1,n=0;n<t.childCount;n++){var o=t.child(n),i=0;if(r)for(var a=0;a<n;a++)for(var s=t.child(a),p=0;p<s.childCount;p++){var c=s.child(p);a+c.attrs.rowspan>n&&(i+=c.attrs.colspan)}for(var l=0;l<o.childCount;l++){var h=o.child(l);i+=h.attrs.colspan,h.attrs.rowspan>1&&(r=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}(t),r=t.childCount,n=[],o=0,i=null,a=[],s=0,p=e*r;s<p;s++)n[s]=0;for(var c=0,l=0;c<r;c++){var h=t.child(c);l++;for(var f=0;;f++){for(;o<n.length&&0!=n[o];)o++;if(f==h.childCount)break;for(var u=h.child(f),m=u.attrs,g=m.colspan,y=m.rowspan,w=m.colwidth,b=0;b<y;b++){if(b+c>=r){(i||(i=[])).push({type:"overlong_rowspan",pos:l,n:y-b});break}for(var S=o+b*e,C=0;C<g;C++){0==n[S+C]?n[S+C]=l:(i||(i=[])).push({type:"collision",row:c,pos:l,n:g-C});var k=w&&w[C];if(k){var M=(S+C)%e*2,$=a[M];null==$||$!=k&&1==a[M+1]?(a[M]=k,a[M+1]=1):$==k&&a[M+1]++}}}o+=g,l+=u.nodeSize}for(var A=(c+1)*e,R=0;o<A;)0==n[o++]&&R++;R&&(i||(i=[])).push({type:"missing",row:c,n:R}),l++}for(var N=new d(e,r,n,i),O=!1,x=0;!O&&x<a.length;x+=2)null!=a[x]&&a[x+1]<r&&(O=!0);O&&function(t,e,r){t.problems||(t.problems=[]);for(var n=0,o={};n<t.map.length;n++){var i=t.map[n];if(!o[i]){o[i]=!0;for(var a=r.nodeAt(i),s=null,p=0;p<a.attrs.colspan;p++){var c=(n+p)%t.width,l=e[2*c];null==l||a.attrs.colwidth&&a.attrs.colwidth[p]==l||((s||(s=v(a.attrs)))[p]=l)}s&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(N,a,t);return N}(t))};var b=new i.e("selectingCells");function S(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function C(t){for(var e=t.selection.$head,r=e.depth;r>0;r--)if("row"==e.node(r).type.spec.tableRole)return!0;return!1}function k(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:S(e.$head)||function(t){for(var e=t.nodeAfter,r=t.pos;e;e=e.firstChild,r++){var n=e.type.spec.tableRole;if("cell"==n||"header_cell"==n)return t.doc.resolve(r)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return t.doc.resolve(i-o.nodeSize)}}(e.$head)}function M(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function $(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function A(t,e,r){var n=t.start(-1),o=d.get(t.node(-1)).nextCell(t.pos-n,e,r);return null==o?null:t.node(0).resolve(n+o)}function R(t,e,r){var n={};for(var o in t)n[o]=t[o];return n[e]=r,n}function N(t,e,r){void 0===r&&(r=1);var n=R(t,"colspan",t.colspan-r);return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(e,r),n.colwidth.some((function(t){return t>0}))||(n.colwidth=null)),n}function O(t,e,r){void 0===r&&(r=1);var n=R(t,"colspan",t.colspan+r);if(n.colwidth){n.colwidth=n.colwidth.slice();for(var o=0;o<r;o++)n.colwidth.splice(e,0,0)}return n}var x=function(t){function e(e,r){void 0===r&&(r=e);var n=e.node(-1),o=d.get(n),a=e.start(-1),s=o.rectBetween(e.pos-a,r.pos-a),p=e.node(0),c=o.cellsInRect(s).filter((function(t){return t!=r.pos-a}));c.unshift(r.pos-a);var l=c.map((function(t){var e=n.nodeAt(t),r=t+a+1;return new i.g(p.resolve(r),p.resolve(r+e.content.size))}));t.call(this,l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,r){var n=t.resolve(r.map(this.$anchorCell.pos)),o=t.resolve(r.map(this.$headCell.pos));if(M(n)&&M(o)&&$(n,o)){var a=this.$anchorCell.node(-1)!=n.node(-1);return a&&this.isRowSelection()?e.rowSelection(n,o):a&&this.isColSelection()?e.colSelection(n,o):new e(n,o)}return i.h.between(n,o)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=d.get(t),r=this.$anchorCell.start(-1),n=e.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},i=[],s=n.top;s<n.bottom;s++){for(var p=[],c=s*e.width+n.left,l=n.left;l<n.right;l++,c++){var h=e.map[c];if(!o[h]){o[h]=!0;var f=e.findCell(h),u=t.nodeAt(h),v=n.left-f.left,m=f.right-n.right;if(v>0||m>0){var g=u.attrs;v>0&&(g=N(g,0,v)),m>0&&(g=N(g,g.colspan-m,m)),u=f.left<n.left?u.type.createAndFill(g):u.type.create(g,u.content)}if(f.top<n.top||f.bottom>n.bottom){var y=R(u.attrs,"rowspan",Math.min(f.bottom,n.bottom)-Math.max(f.top,n.top));u=f.top<n.top?u.type.createAndFill(y):u.type.create(y,u.content)}p.push(u)}}i.push(t.child(s).copy(a.c.from(p)))}var w=this.isColSelection()&&this.isRowSelection()?t:i;return new a.j(a.c.from(w),1,1)},e.prototype.replace=function(e,r){void 0===r&&(r=a.j.empty);for(var n=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],p=s.$from,c=s.$to,l=e.mapping.slice(n);e.replace(l.map(p.pos),l.map(c.pos),i?a.j.empty:r)}var h=t.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);h&&e.setSelection(h)},e.prototype.replaceWith=function(t,e){this.replace(t,new a.j(a.c.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),r=d.get(e),n=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),n+o[i])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var r=t+this.$anchorCell.nodeAfter.attrs.rowspan,n=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,n)==this.$headCell.node(-1).childCount},e.colSelection=function(t,r){void 0===r&&(r=t);var n=d.get(t.node(-1)),o=t.start(-1),i=n.findCell(t.pos-o),a=n.findCell(r.pos-o),s=t.node(0);return i.top<=a.top?(i.top>0&&(t=s.resolve(o+n.map[i.left])),a.bottom<n.height&&(r=s.resolve(o+n.map[n.width*(n.height-1)+a.right-1]))):(a.top>0&&(r=s.resolve(o+n.map[a.left])),i.bottom<n.height&&(t=s.resolve(o+n.map[n.width*(n.height-1)+i.right-1]))),new e(t,r)},e.prototype.isRowSelection=function(){var t=d.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-e),n=t.colCount(this.$headCell.pos-e);if(Math.min(r,n)>0)return!1;var o=r+this.$anchorCell.nodeAfter.attrs.colspan,i=n+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,r){void 0===r&&(r=t);var n=d.get(t.node(-1)),o=t.start(-1),i=n.findCell(t.pos-o),a=n.findCell(r.pos-o),s=t.node(0);return i.left<=a.left?(i.left>0&&(t=s.resolve(o+n.map[i.top*n.width])),a.right<n.width&&(r=s.resolve(o+n.map[n.width*(a.top+1)-1]))):(a.left>0&&(r=s.resolve(o+n.map[a.top*n.width])),i.right<n.width&&(t=s.resolve(o+n.map[n.width*(i.top+1)-1]))),new e(t,r)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,r){return new e(t.resolve(r.anchor),t.resolve(r.head))},e.create=function(t,r,n){return void 0===n&&(n=r),new e(t.resolve(r),t.resolve(n))},e.prototype.getBookmark=function(){return new j(this.$anchorCell.pos,this.$headCell.pos)},e}(i.f);x.prototype.visible=!1,i.f.jsonID("cell",x);var j=function(t,e){this.anchor=t,this.head=e};function z(t){if(!(t.selection instanceof x))return null;var e=[];return t.selection.forEachCell((function(t,r){e.push(p.a.node(r,r+t.nodeSize,{class:"selectedCell"}))})),p.b.create(t.doc,e)}function E(t){if(!t.size)return null;for(var e=t.content,r=t.openStart,n=t.openEnd;1==e.childCount&&(r>0&&n>0||"table"==e.firstChild.type.spec.tableRole);)r--,n--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,s=o.type.schema,p=[];if("row"==i)for(var c=0;c<e.childCount;c++){var l=e.child(c).content,h=c?0:Math.max(0,r-1),f=c<e.childCount-1?0:Math.max(0,n-1);(h||f)&&(l=_(w(s).row,new a.j(l,h,f)).content),p.push(l)}else{if("cell"!=i&&"header_cell"!=i)return null;p.push(r||n?_(w(s).row,new a.j(e,r,n)).content:e)}return function(t,e){for(var r=[],n=0;n<e.length;n++)for(var o=e[n],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,p=s.rowspan,c=s.colspan,l=n;l<n+p;l++)r[l]=(r[l]||0)+c;for(var h=0,f=0;f<r.length;f++)h=Math.max(h,r[f]);for(var u=0;u<r.length;u++)if(u>=e.length&&e.push(a.c.empty),r[u]<h){for(var d=w(t).cell.createAndFill(),v=[],m=r[u];m<h;m++)v.push(d);e[u]=e[u].append(a.c.from(v))}return{height:e.length,width:h,rows:e}}(s,p)}function _(t,e){var r=t.createAndFill();return new c.e(r).replace(0,r.content.size,e).doc}function T(t,e,r,n,o,i,a,s){if(0==a||a==e.height)return!1;for(var p=!1,c=o;c<i;c++){var l=a*e.width+c,h=e.map[l];if(e.map[l-e.width]==h){p=!0;var f=r.nodeAt(h),u=e.findCell(h),d=u.top,v=u.left;t.setNodeMarkup(t.mapping.slice(s).map(h+n),null,R(f.attrs,"rowspan",a-d)),t.insert(t.mapping.slice(s).map(e.positionAt(a,v,r)),f.type.createAndFill(R(f.attrs,"rowspan",d+f.attrs.rowspan-a))),c+=f.attrs.colspan-1}}return p}function I(t,e,r,n,o,i,a,s){if(0==a||a==e.width)return!1;for(var p=!1,c=o;c<i;c++){var l=c*e.width+a,h=e.map[l];if(e.map[l-1]==h){p=!0;var f=r.nodeAt(h),u=e.colCount(h),d=t.mapping.slice(s).map(h+n);t.setNodeMarkup(d,null,N(f.attrs,a-u,f.attrs.colspan-(a-u))),t.insert(d+f.nodeSize,f.type.createAndFill(N(f.attrs,0,a-u))),c+=f.attrs.rowspan-1}}return p}function F(t,e,r,n,o){var i=r?t.doc.nodeAt(r-1):t.doc,s=d.get(i),p=n.top,c=n.left,l=c+o.width,h=p+o.height,f=t.tr,u=0;function v(){i=r?f.doc.nodeAt(r-1):f.doc,s=d.get(i),u=f.mapping.maps.length}(function(t,e,r,n,o,i,s){var p,c,l=w(t.doc.type.schema);if(o>e.width)for(var h=0,f=0;h<e.height;h++){var u=r.child(h);f+=u.nodeSize;var d=[],v=void 0;v=null==u.lastChild||u.lastChild.type==l.cell?p||(p=l.cell.createAndFill()):c||(c=l.header_cell.createAndFill());for(var m=e.width;m<o;m++)d.push(v);t.insert(t.mapping.slice(s).map(f-1+n),d)}if(i>e.height){for(var g=[],y=0,b=(e.height-1)*e.width;y<Math.max(e.width,o);y++){var S=!(y>=e.width)&&r.nodeAt(e.map[b+y]).type==l.header_cell;g.push(S?c||(c=l.header_cell.createAndFill()):p||(p=l.cell.createAndFill()))}for(var C=l.row.create(null,a.c.from(g)),k=[],M=e.height;M<i;M++)k.push(C);t.insert(t.mapping.slice(s).map(n+r.nodeSize-2),k)}return!(!p&&!c)})(f,s,i,r,l,h,u)&&v(),T(f,s,i,r,c,l,p,u)&&v(),T(f,s,i,r,c,l,h,u)&&v(),I(f,s,i,r,p,h,c,u)&&v(),I(f,s,i,r,p,h,l,u)&&v();for(var m=p;m<h;m++){var g=s.positionAt(m,c,i),y=s.positionAt(m,l,i);f.replace(f.mapping.slice(u).map(g+r),f.mapping.slice(u).map(y+r),new a.j(o.rows[m-p],0,0))}v(),f.setSelection(new x(f.doc.resolve(r+s.positionAt(p,c,i)),f.doc.resolve(r+s.positionAt(h-1,l-1,i)))),e(f)}j.prototype.map=function(t){return new j(t.map(this.anchor),t.map(this.head))},j.prototype.resolve=function(t){var e=t.resolve(this.anchor),r=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==r.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&r.index()<r.parent.childCount&&$(e,r)?new x(e,r):i.f.near(r,1)};var D=Object(s.a)({ArrowLeft:B("horiz",-1),ArrowRight:B("horiz",1),ArrowUp:B("vert",-1),ArrowDown:B("vert",1),"Shift-ArrowLeft":W("horiz",-1),"Shift-ArrowRight":W("horiz",1),"Shift-ArrowUp":W("vert",-1),"Shift-ArrowDown":W("vert",1),Backspace:L,"Mod-Backspace":L,Delete:L,"Mod-Delete":L});function J(t,e,r){return!r.eq(t.selection)&&(e&&e(t.tr.setSelection(r).scrollIntoView()),!0)}function B(t,e){return function(r,n,o){var a=r.selection;if(a instanceof x)return J(r,n,i.f.near(a.$headCell,e));if("horiz"!=t&&!a.empty)return!1;var s=V(o,t,e);if(null==s)return!1;if("horiz"==t)return J(r,n,i.f.near(r.doc.resolve(a.head+e),e));var p,c=r.doc.resolve(s),l=A(c,t,e);return p=l?i.f.near(l,1):e<0?i.f.near(r.doc.resolve(c.before(-1)),-1):i.f.near(r.doc.resolve(c.after(-1)),1),J(r,n,p)}}function W(t,e){return function(r,n,o){var i=r.selection;if(!(i instanceof x)){var a=V(o,t,e);if(null==a)return!1;i=new x(r.doc.resolve(a))}var s=A(i.$headCell,t,e);return!!s&&J(r,n,new x(i.$anchorCell,s))}}function L(t,e){var r=t.selection;if(!(r instanceof x))return!1;if(e){var n=t.tr,o=w(t.schema).cell.createAndFill().content;r.forEachCell((function(t,e){t.content.eq(o)||n.replace(n.mapping.map(e+1),n.mapping.map(e+t.nodeSize-1),new a.j(o,0,0))})),n.docChanged&&e(n)}return!0}function H(t,e){var r=S(t.state.doc.resolve(e));return!!r&&(t.dispatch(t.state.tr.setSelection(new x(r))),!0)}function q(t,e,r){if(!C(t.state))return!1;var n=E(r),o=t.state.selection;if(o instanceof x){n||(n={width:1,height:1,rows:[a.c.from(_(w(t.state.schema).cell,r))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),p=d.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return n=function(t,e,r){var n=t.width,o=t.height,i=t.rows;if(n!=e){for(var s=[],p=[],c=0;c<i.length;c++){for(var l=i[c],h=[],f=s[c]||0,u=0;f<e;u++){var d=l.child(u%l.childCount);f+d.attrs.colspan>e&&(d=d.type.create(N(d.attrs,d.attrs.colspan,f+d.attrs.colspan-e),d.content)),h.push(d),f+=d.attrs.colspan;for(var v=1;v<d.attrs.rowspan;v++)s[c+v]=(s[c+v]||0)+d.attrs.colspan}p.push(a.c.from(h))}i=p,n=e}if(o!=r){for(var m=[],g=0,y=0;g<r;g++,y++){for(var w=[],b=i[y%o],S=0;S<b.childCount;S++){var C=b.child(S);g+C.attrs.rowspan>r&&(C=C.type.create(R(C.attrs,"rowspan",Math.max(1,r-C.attrs.rowspan)),C.content)),w.push(C)}m.push(a.c.from(w))}i=m,o=r}return{width:n,height:o,rows:i}}(n,p.right-p.left,p.bottom-p.top),F(t.state,t.dispatch,s,p,n),!0}if(n){var c=k(t.state),l=c.start(-1);return F(t.state,t.dispatch,l,d.get(c.node(-1)).findCell(c.pos-l),n),!0}return!1}function P(t,e){if(!e.ctrlKey&&!e.metaKey){var r,n=K(t,e.target);if(e.shiftKey&&t.state.selection instanceof x)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&n&&null!=(r=S(t.state.selection.$anchor))&&X(t,e).pos!=r.pos)o(r,e),e.preventDefault();else if(!n)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function o(e,r){var n=X(t,r),o=null==b.getState(t.state);if(!n||!$(e,n)){if(!o)return;n=e}var i=new x(e,n);if(o||!t.state.selection.eq(i)){var a=t.state.tr.setSelection(i);o&&a.setMeta(b,e.pos),t.dispatch(a)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),null!=b.getState(t.state)&&t.dispatch(t.state.tr.setMeta(b,-1))}function a(r){var a,s=b.getState(t.state);if(null!=s)a=t.state.doc.resolve(s);else if(K(t,r.target)!=n&&!(a=X(t,e)))return i();a&&o(a,r)}}function V(t,e,r){if(!(t.state.selection instanceof i.h))return null;for(var n=t.state.selection.$head,o=n.depth-1;o>=0;o--){var a=n.node(o);if((r<0?n.index(o):n.indexAfter(o))!=(r<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var s=n.before(o),p="vert"==e?r>0?"down":"up":r>0?"right":"left";return t.endOfTextblock(p)?s:null}}return null}function K(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function X(t,e){var r=t.posAtCoords({left:e.clientX,top:e.clientY});return r&&r?S(t.state.doc.resolve(r.pos)):null}var G=new i.e("fix-tables");function U(t,e){var r,n=function(e,n){"table"==e.type.spec.tableRole&&(r=function(t,e,r,n){var o=d.get(e);if(!o.problems)return n;n||(n=t.tr);for(var i,a,s=[],p=0;p<o.height;p++)s.push(0);for(var c=0;c<o.problems.length;c++){var l=o.problems[c];if("collision"==l.type){for(var h=e.nodeAt(l.pos),f=0;f<h.attrs.rowspan;f++)s[l.row+f]+=l.n;n.setNodeMarkup(n.mapping.map(r+1+l.pos),null,N(h.attrs,h.attrs.colspan-l.n,l.n))}else if("missing"==l.type)s[l.row]+=l.n;else if("overlong_rowspan"==l.type){var u=e.nodeAt(l.pos);n.setNodeMarkup(n.mapping.map(r+1+l.pos),null,R(u.attrs,"rowspan",u.attrs.rowspan-l.n))}else if("colwidth mismatch"==l.type){var v=e.nodeAt(l.pos);n.setNodeMarkup(n.mapping.map(r+1+l.pos),null,R(v.attrs,"colwidth",l.colwidth))}}for(var m=0;m<s.length;m++)s[m]&&(null==i&&(i=m),a=m);for(var g=0,y=r+1;g<o.height;g++){var b=e.child(g),S=y+b.nodeSize,C=s[g];if(C>0){var k="cell";b.firstChild&&(k=b.firstChild.type.spec.tableRole);for(var M=[],$=0;$<C;$++)M.push(w(t.schema)[k].createAndFill());var A=0!=g&&i!=g-1||a!=g?S-1:y+1;n.insert(n.mapping.map(A),M)}y=S}return n.setMeta(G,{fixTables:!0})}(t,e,n,r))};return e?e.doc!=t.doc&&function t(e,r,n,o){var i=e.childCount,a=r.childCount;t:for(var s=0,p=0;s<a;s++){for(var c=r.child(s),l=p,h=Math.min(i,s+3);l<h;l++)if(e.child(l)==c){p=l+1,n+=c.nodeSize;continue t}o(c,n),p<i&&e.child(p).sameMarkup(c)?t(e.child(p),c,n+1,o):c.nodesBetween(0,c.content.size,o,n+1),n+=c.nodeSize}}(e.doc,t.doc,0,n):t.doc.descendants(n),r}function Y(t){var e,r=t.selection,n=k(t),o=n.node(-1),i=n.start(-1),a=d.get(o);return(e=r instanceof x?a.rectBetween(r.$anchorCell.pos-i,r.$headCell.pos-i):a.findCell(n.pos-i)).tableStart=i,e.map=a,e.table=o,e}function Q(t,e,r){var n=e.map,o=e.tableStart,i=e.table,a=r>0?-1:0;(function(t,e,r){for(var n=w(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[r+o*t.width]).type!=n)return!1;return!0})(n,i,r+a)&&(a=0==r||r==n.width?null:0);for(var s=0;s<n.height;s++){var p=s*n.width+r;if(r>0&&r<n.width&&n.map[p-1]==n.map[p]){var c=n.map[p],l=i.nodeAt(c);t.setNodeMarkup(t.mapping.map(o+c),null,O(l.attrs,r-n.colCount(c))),s+=l.attrs.rowspan-1}else{var h=null==a?w(i.type.schema).cell:i.nodeAt(n.map[p+a]).type,f=n.positionAt(s,r,i);t.insert(t.mapping.map(o+f),h.createAndFill())}}return t}function Z(t,e){if(!C(t))return!1;if(e){var r=Y(t);e(Q(t.tr,r,r.left))}return!0}function tt(t,e){if(!C(t))return!1;if(e){var r=Y(t);e(Q(t.tr,r,r.right))}return!0}function et(t,e,r){for(var n=e.map,o=e.table,i=e.tableStart,a=t.mapping.maps.length,s=0;s<n.height;){var p=s*n.width+r,c=n.map[p],l=o.nodeAt(c);if(r>0&&n.map[p-1]==c||r<n.width-1&&n.map[p+1]==c)t.setNodeMarkup(t.mapping.slice(a).map(i+c),null,N(l.attrs,r-n.colCount(c)));else{var h=t.mapping.slice(a).map(i+c);t.delete(h,h+l.nodeSize)}s+=l.attrs.rowspan}}function rt(t,e){if(!C(t))return!1;if(e){var r=Y(t),n=t.tr;if(0==r.left&&r.right==r.map.width)return!1;for(var o=r.right-1;et(n,r,o),o!=r.left;o--)r.table=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc,r.map=d.get(r.table);e(n)}return!0}function nt(t,e,r){for(var n=e.map,o=e.tableStart,i=e.table,a=o,s=0;s<r;s++)a+=i.child(s).nodeSize;var p=[],c=r>0?-1:0;(function(t,e,r){for(var n=w(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+r*t.width]).type!=n)return!1;return!0})(n,i,r+c)&&(c=0==r||r==n.height?null:0);for(var l=0,h=n.width*r;l<n.width;l++,h++)if(r>0&&r<n.height&&n.map[h]==n.map[h-n.width]){var f=n.map[h],u=i.nodeAt(f).attrs;t.setNodeMarkup(o+f,null,R(u,"rowspan",u.rowspan+1)),l+=u.colspan-1}else{var d=null==c?w(i.type.schema).cell:i.nodeAt(n.map[h+c*n.width]).type;p.push(d.createAndFill())}return t.insert(a,w(i.type.schema).row.create(null,p)),t}function ot(t,e){if(!C(t))return!1;if(e){var r=Y(t);e(nt(t.tr,r,r.top))}return!0}function it(t,e){if(!C(t))return!1;if(e){var r=Y(t);e(nt(t.tr,r,r.bottom))}return!0}function at(t,e,r){for(var n=e.map,o=e.table,i=e.tableStart,a=0,s=0;s<r;s++)a+=o.child(s).nodeSize;var p=a+o.child(r).nodeSize,c=t.mapping.maps.length;t.delete(a+i,p+i);for(var l=0,h=r*n.width;l<n.width;l++,h++){var f=n.map[h];if(r>0&&f==n.map[h-n.width]){var u=o.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(c).map(f+i),null,R(u,"rowspan",u.rowspan-1)),l+=u.colspan-1}else if(r<n.width&&f==n.map[h+n.width]){var d=o.nodeAt(f),v=d.type.create(R(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),m=n.positionAt(r+1,l,o);t.insert(t.mapping.slice(c).map(i+m),v),l+=d.attrs.colspan-1}}}function st(t,e){if(!C(t))return!1;if(e){var r=Y(t),n=t.tr;if(0==r.top&&r.bottom==r.map.height)return!1;for(var o=r.bottom-1;at(n,r,o),o!=r.top;o--)r.table=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc,r.map=d.get(r.table);e(n)}return!0}function pt(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function ct(t,e){var r=t.selection;if(!(r instanceof x)||r.$anchorCell.pos==r.$headCell.pos)return!1;var n=Y(t),o=n.map;if(function(t,e){for(var r=t.width,n=t.height,o=t.map,i=e.top*r+e.left,a=i,s=(e.bottom-1)*r+e.left,p=i+(e.right-e.left-1),c=e.top;c<e.bottom;c++){if(e.left>0&&o[a]==o[a-1]||e.right<r&&o[p]==o[p+1])return!0;a+=r,p+=r}for(var l=e.left;l<e.right;l++){if(e.top>0&&o[i]==o[i-r]||e.bottom<n&&o[s]==o[s+r])return!0;i++,s++}return!1}(o,n))return!1;if(e){for(var i,s,p=t.tr,c={},l=a.c.empty,h=n.top;h<n.bottom;h++)for(var f=n.left;f<n.right;f++){var u=o.map[h*o.width+f],d=n.table.nodeAt(u);if(!c[u])if(c[u]=!0,null==i)i=u,s=d;else{pt(d)||(l=l.append(d.content));var v=p.mapping.map(u+n.tableStart);p.delete(v,v+d.nodeSize)}}if(p.setNodeMarkup(i+n.tableStart,null,R(O(s.attrs,s.attrs.colspan,n.right-n.left-s.attrs.colspan),"rowspan",n.bottom-n.top)),l.size){var m=i+1+s.content.size,g=pt(s)?i+1:m;p.replaceWith(g+n.tableStart,m+n.tableStart,l)}p.setSelection(new x(p.doc.resolve(i+n.tableStart))),e(p)}return!0}function lt(t,e){var r,n=w(t.schema);return(r=function(t){var e=t.node;return n[e.type.spec.tableRole]},function(t,e){var n,o,i=t.selection;if(i instanceof x){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;n=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(n=function(t){for(var e=t.depth;e>0;e--){var r=t.node(e).type.spec.tableRole;if("cell"===r||"header_cell"===r)return t.node(e)}return null}(i.$from)))return!1;o=S(i.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(e){var a=n.attrs,s=[],p=a.colwidth;a.rowspan>1&&(a=R(a,"rowspan",1)),a.colspan>1&&(a=R(a,"colspan",1));for(var c,l=Y(t),h=t.tr,f=0;f<l.right-l.left;f++)s.push(p?R(a,"colwidth",p&&p[f]?[p[f]]:null):a);for(var u=l.top;u<l.bottom;u++){var d=l.map.positionAt(u,l.left,l.table);u==l.top&&(d+=n.nodeSize);for(var v=l.left,m=0;v<l.right;v++,m++)v==l.left&&u==l.top||h.insert(c=h.mapping.map(d+l.tableStart,1),r({node:n,row:u,col:v}).createAndFill(s[m]))}h.setNodeMarkup(o,r({node:n,row:l.top,col:l.left}),s[0]),i instanceof x&&h.setSelection(new x(h.doc.resolve(i.$anchorCell.pos),c&&h.doc.resolve(c))),e(h)}return!0})(t,e)}function ht(t,e){return function(r,n){if(!C(r))return!1;var o=k(r);if(o.nodeAfter.attrs[t]===e)return!1;if(n){var i=r.tr;r.selection instanceof x?r.selection.forEachCell((function(r,n){r.attrs[t]!==e&&i.setNodeMarkup(n,null,R(r.attrs,t,e))})):i.setNodeMarkup(o.pos,null,R(o.nodeAfter.attrs,t,e)),n(i)}return!0}}function ft(t,e,r){for(var n=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<n.length;o++){var i=e.table.nodeAt(n[o]);if(i&&i.type!==r.header_cell)return!1}return!0}function ut(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,r){if(!C(e))return!1;if(r){for(var n=w(e.schema),o=Y(e),i=e.tr,a=o.map.cellsInRect("column"==t?new u(o.left,0,o.right,o.map.height):"row"==t?new u(0,o.top,o.map.width,o.bottom):o),s=a.map((function(t){return o.table.nodeAt(t)})),p=0;p<a.length;p++)s[p].type==n.header_cell&&i.setNodeMarkup(o.tableStart+a[p],n.cell,s[p].attrs);if(0==i.steps.length)for(var c=0;c<a.length;c++)i.setNodeMarkup(o.tableStart+a[c],n.header_cell,s[c].attrs);r(i)}return!0}}(t):function(e,r){if(!C(e))return!1;if(r){var n=w(e.schema),o=Y(e),i=e.tr,a=ft("row",o,n),s=ft("column",o,n),p=("column"===t?a:"row"===t&&s)?1:0,c="column"==t?new u(0,p,1,o.map.height):"row"==t?new u(p,0,o.map.width,1):o,l="column"==t?s?n.cell:n.header_cell:"row"==t?a?n.cell:n.header_cell:n.cell;o.map.cellsInRect(c).forEach((function(t){var e=t+o.tableStart,r=i.doc.nodeAt(e);r&&i.setNodeMarkup(e,l,r.attrs)})),r(i)}return!0}}var dt=ut("row",{useDeprecatedLogic:!0}),vt=ut("column",{useDeprecatedLogic:!0}),mt=ut("cell",{useDeprecatedLogic:!0});function gt(t){return function(e,r){if(!C(e))return!1;var n=function(t,e){if(e<0){var r=t.nodeBefore;if(r)return t.pos-r.nodeSize;for(var n=t.index(-1)-1,o=t.before();n>=0;n--){var i=t.node(-1).child(n);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var a=t.node(-1),s=t.indexAfter(-1),p=t.after();s<a.childCount;s++){var c=a.child(s);if(c.childCount)return p+1;p+=c.nodeSize}}}(k(e),t);if(null!=n){if(r){var o=e.doc.resolve(n);r(e.tr.setSelection(i.h.between(o,(a=o,a.node(0).resolve(a.pos+a.nodeAfter.nodeSize)))).scrollIntoView())}var a;return!0}}}function yt(t,e){for(var r=t.selection.$anchor,n=r.depth;n>0;n--){if("table"==r.node(n).type.spec.tableRole)return e&&e(t.tr.delete(r.before(n),r.after(n)).scrollIntoView()),!0}return!1}var wt=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),bt(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function bt(t,e,r,n,o,i){for(var a=0,s=!0,p=e.firstChild,c=t.firstChild,l=0,h=0;l<c.childCount;l++)for(var f=c.child(l).attrs,u=f.colspan,d=f.colwidth,v=0;v<u;v++,h++){var m=o==h?i:d&&d[v],g=m?m+"px":"";a+=m||n,m||(s=!1),p?(p.style.width!=g&&(p.style.width=g),p=p.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;p;){var y=p.nextSibling;p.parentNode.removeChild(p),p=y}s?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}wt.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,bt(t,this.colgroup,this.table,this.cellMinWidth),!0)},wt.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var St=new i.e("tableColumnResizing");function Ct(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var r=t.cellMinWidth;void 0===r&&(r=25);var n=t.View;void 0===n&&(n=wt);var o=t.lastColumnResizable;return void 0===o&&(o=!0),new i.d({key:St,state:{init:function(t,e){return this.spec.props.nodeViews[w(e.schema).table.name]=function(t,e){return new n(t,r,e)},new kt(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return St.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,r){!function(t,e,r,n,o){var i=St.getState(t.state);if(!i.dragging){var a=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),s=-1;if(a){var p=a.getBoundingClientRect(),c=p.left,l=p.right;e.clientX-c<=r?s=Mt(t,e,"left"):l-e.clientX<=r&&(s=Mt(t,e,"right"))}if(s!=i.activeHandle){if(!o&&-1!==s){var h=t.state.doc.resolve(s),f=h.node(-1),u=d.get(f),v=h.start(-1);if(u.colCount(h.pos-v)+h.nodeAfter.attrs.colspan-1==u.width-1)return}At(t,s)}}}(t,r,e,0,o)},mouseleave:function(t){!function(t){var e=St.getState(t.state);e.activeHandle>-1&&!e.dragging&&At(t,-1)}(t)},mousedown:function(t,e){!function(t,e,r){var n=St.getState(t.state);if(-1==n.activeHandle||n.dragging)return!1;var o=t.state.doc.nodeAt(n.activeHandle),i=function(t,e,r){var n=r.colspan,o=r.colwidth,i=o&&o[o.length-1];if(i)return i;var a=t.domAtPos(e),s=a.node.childNodes[a.offset].offsetWidth,p=n;if(o)for(var c=0;c<n;c++)o[c]&&(s-=o[c],p--);return s/p}(t,n.activeHandle,o.attrs);function a(e){window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",s);var n=St.getState(t.state);n.dragging&&(!function(t,e,r){for(var n=t.state.doc.resolve(e),o=n.node(-1),i=d.get(o),a=n.start(-1),s=i.colCount(n.pos-a)+n.nodeAfter.attrs.colspan-1,p=t.state.tr,c=0;c<i.height;c++){var l=c*i.width+s;if(!c||i.map[l]!=i.map[l-i.width]){var h=i.map[l],f=o.nodeAt(h).attrs,u=1==f.colspan?0:s-i.colCount(h);if(!f.colwidth||f.colwidth[u]!=r){var v=f.colwidth?f.colwidth.slice():Rt(f.colspan);v[u]=r,p.setNodeMarkup(a+h,null,R(f,"colwidth",v))}}}p.docChanged&&t.dispatch(p)}(t,n.activeHandle,$t(n.dragging,e,r)),t.dispatch(t.state.tr.setMeta(St,{setDragging:null})))}function s(e){if(!e.which)return a(e);var n=St.getState(t.state),o=$t(n.dragging,e,r);!function(t,e,r,n){var o=t.state.doc.resolve(e),i=o.node(-1),a=o.start(-1),s=d.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,p=t.domAtPos(o.start(-1)).node;for(;"TABLE"!=p.nodeName;)p=p.parentNode;bt(i,p.firstChild,p,n,s,r)}(t,n.activeHandle,o,r)}t.dispatch(t.state.tr.setMeta(St,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",a),window.addEventListener("mousemove",s),e.preventDefault()}(t,e,r)}},decorations:function(t){var e=St.getState(t);if(e.activeHandle>-1)return function(t,e){for(var r=[],n=t.doc.resolve(e),o=n.node(-1),i=d.get(o),a=n.start(-1),s=i.colCount(n.pos-a)+n.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var l=s+c*i.width-1;if(!(s!=i.width&&i.map[l]==i.map[l+1]||0!=c&&i.map[l-1]==i.map[l-1-i.width])){var h=i.map[l],f=a+h+o.nodeAt(h).nodeSize-1,u=document.createElement("div");u.className="column-resize-handle",r.push(p.a.widget(f,u))}}return p.b.create(t.doc,r)}(t,e.activeHandle)},nodeViews:{}}})}var kt=function(t,e){this.activeHandle=t,this.dragging=e};function Mt(t,e,r){var n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return-1;var o=n.pos,i=S(t.state.doc.resolve(o));if(!i)return-1;if("right"==r)return i.pos;var a=d.get(i.node(-1)),s=i.start(-1),p=a.map.indexOf(i.pos-s);return p%a.width==0?-1:s+a.map[p-1]}function $t(t,e,r){var n=e.clientX-t.startX;return Math.max(r,t.startWidth+n)}function At(t,e){t.dispatch(t.state.tr.setMeta(St,{setHandle:e}))}function Rt(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Nt(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new i.d({key:b,state:{init:function(){return null},apply:function(t,e){var r=t.getMeta(b);if(null!=r)return-1==r?null:r;if(null==e||!t.docChanged)return e;var n=t.mapping.mapResult(e),o=n.deleted,i=n.pos;return o?null:i}},props:{decorations:z,handleDOMEvents:{mousedown:P},createSelectionBetween:function(t){if(null!=b.getState(t.state))return t.state.selection},handleTripleClick:H,handleKeyDown:D,handlePaste:q},appendTransaction:function(t,r,n){return function(t,e,r){var n,o,a=(e||t).selection,s=(e||t).doc;if(a instanceof i.c&&(o=a.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)n=x.create(s,a.from);else if("row"==o){var p=s.resolve(a.from+1);n=x.rowSelection(p,p)}else if(!r){var c=d.get(a.node),l=a.from+1,h=l+c.map[c.width*c.height-1];n=x.create(s,l+1,h)}}else a instanceof i.h&&function(t){var e=t.$from,r=t.$to;if(e.pos==r.pos||e.pos<e.pos-6)return!1;for(var n=e.pos,o=r.pos,i=e.depth;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(var a=r.depth;a>=0&&!(r.before(a+1)>r.start(a));a--,o--);return n==o&&/row|table/.test(e.node(i).type.spec.tableRole)}(a)?n=i.h.create(s,a.from):a instanceof i.h&&function(t){for(var e,r,n=t.$from,o=t.$to,i=n.depth;i>0;i--){var a=n.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){e=a;break}}for(var s=o.depth;s>0;s--){var p=o.node(s);if("cell"===p.type.spec.tableRole||"header_cell"===p.type.spec.tableRole){r=p;break}}return e!==r&&0===o.parentOffset}(a)&&(n=i.h.create(s,a.$from.start(),a.$from.end()));return n&&(e||(e=t.tr)).setSelection(n),e}(n,U(n,r),e)}})}kt.prototype.apply=function(t){var e=this,r=t.getMeta(St);if(r&&null!=r.setHandle)return new kt(r.setHandle,null);if(r&&void 0!==r.setDragging)return new kt(e.activeHandle,r.setDragging);if(e.activeHandle>-1&&t.docChanged){var n=t.mapping.map(e.activeHandle,-1);M(t.doc.resolve(n))||(n=null),e=new kt(n,e.dragging)}return e}}}]);